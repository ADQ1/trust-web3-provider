!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";let e;const t=new Uint8Array(16);function r(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function o(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}function s(e){if(!function(e){return"string"==typeof e&&n.test(e)}(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function a(e,t,r){function n(e,n,i,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=s(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=u[e];return i}return o(u)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function c(e){return 14+(e+64>>>9<<4)+1}function u(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function h(e,t,r,n,i,o){return u((s=u(u(t,e),u(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function l(e,t,r,n,i,o,s){return h(t&r|~t&n,e,t,i,o,s)}function f(e,t,r,n,i,o,s){return h(t&n|r&~n,e,t,i,o,s)}function d(e,t,r,n,i,o,s){return h(t^r^n,e,t,i,o,s)}function p(e,t,r,n,i,o,s){return h(r^(t|~n),e,t,i,o,s)}a("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[c(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let t=0;t<e.length;t+=16){const s=r,a=n,c=i,h=o;r=l(r,n,i,o,e[t],7,-680876936),o=l(o,r,n,i,e[t+1],12,-389564586),i=l(i,o,r,n,e[t+2],17,606105819),n=l(n,i,o,r,e[t+3],22,-1044525330),r=l(r,n,i,o,e[t+4],7,-176418897),o=l(o,r,n,i,e[t+5],12,1200080426),i=l(i,o,r,n,e[t+6],17,-1473231341),n=l(n,i,o,r,e[t+7],22,-45705983),r=l(r,n,i,o,e[t+8],7,1770035416),o=l(o,r,n,i,e[t+9],12,-1958414417),i=l(i,o,r,n,e[t+10],17,-42063),n=l(n,i,o,r,e[t+11],22,-1990404162),r=l(r,n,i,o,e[t+12],7,1804603682),o=l(o,r,n,i,e[t+13],12,-40341101),i=l(i,o,r,n,e[t+14],17,-1502002290),n=l(n,i,o,r,e[t+15],22,1236535329),r=f(r,n,i,o,e[t+1],5,-165796510),o=f(o,r,n,i,e[t+6],9,-1069501632),i=f(i,o,r,n,e[t+11],14,643717713),n=f(n,i,o,r,e[t],20,-373897302),r=f(r,n,i,o,e[t+5],5,-701558691),o=f(o,r,n,i,e[t+10],9,38016083),i=f(i,o,r,n,e[t+15],14,-660478335),n=f(n,i,o,r,e[t+4],20,-405537848),r=f(r,n,i,o,e[t+9],5,568446438),o=f(o,r,n,i,e[t+14],9,-1019803690),i=f(i,o,r,n,e[t+3],14,-187363961),n=f(n,i,o,r,e[t+8],20,1163531501),r=f(r,n,i,o,e[t+13],5,-1444681467),o=f(o,r,n,i,e[t+2],9,-51403784),i=f(i,o,r,n,e[t+7],14,1735328473),n=f(n,i,o,r,e[t+12],20,-1926607734),r=d(r,n,i,o,e[t+5],4,-378558),o=d(o,r,n,i,e[t+8],11,-2022574463),i=d(i,o,r,n,e[t+11],16,1839030562),n=d(n,i,o,r,e[t+14],23,-35309556),r=d(r,n,i,o,e[t+1],4,-1530992060),o=d(o,r,n,i,e[t+4],11,1272893353),i=d(i,o,r,n,e[t+7],16,-155497632),n=d(n,i,o,r,e[t+10],23,-1094730640),r=d(r,n,i,o,e[t+13],4,681279174),o=d(o,r,n,i,e[t],11,-358537222),i=d(i,o,r,n,e[t+3],16,-722521979),n=d(n,i,o,r,e[t+6],23,76029189),r=d(r,n,i,o,e[t+9],4,-640364487),o=d(o,r,n,i,e[t+12],11,-421815835),i=d(i,o,r,n,e[t+15],16,530742520),n=d(n,i,o,r,e[t+2],23,-995338651),r=p(r,n,i,o,e[t],6,-198630844),o=p(o,r,n,i,e[t+7],10,1126891415),i=p(i,o,r,n,e[t+14],15,-1416354905),n=p(n,i,o,r,e[t+5],21,-57434055),r=p(r,n,i,o,e[t+12],6,1700485571),o=p(o,r,n,i,e[t+3],10,-1894986606),i=p(i,o,r,n,e[t+10],15,-1051523),n=p(n,i,o,r,e[t+1],21,-2054922799),r=p(r,n,i,o,e[t+8],6,1873313359),o=p(o,r,n,i,e[t+15],10,-30611744),i=p(i,o,r,n,e[t+6],15,-1560198380),n=p(n,i,o,r,e[t+13],21,1309151649),r=p(r,n,i,o,e[t+4],6,-145523070),o=p(o,r,n,i,e[t+11],10,-1120210379),i=p(i,o,r,n,e[t+2],15,718787259),n=p(n,i,o,r,e[t+9],21,-343485551),r=u(r,s),n=u(n,a),i=u(i,c),o=u(o,h)}return[r,n,i,o]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(c(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var g={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(e,t,n){if(g.randomUUID&&!t&&!e)return g.randomUUID();const i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return o(i)}function m(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function w(e,t){return e<<t|e>>>32-t}a("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let t=0;t<i;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=r}o[i-1][14]=8*(e.length-1)/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<i;++e){const n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=o[e][t];for(let e=16;e<80;++e)n[e]=w(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],s=r[1],a=r[2],c=r[3],u=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=w(i,5)+m(r,s,a,c)+u+t[r]+n[e]>>>0;u=c,c=a,a=w(s,30)>>>0,s=i,i=o}r[0]=r[0]+i>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+a>>>0,r[3]=r[3]+c>>>0,r[4]=r[4]+u>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}));var b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},v=[],_=[],E="undefined"!=typeof Uint8Array?Uint8Array:Array,S=!1;function A(){S=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)v[t]=e[t],_[e.charCodeAt(t)]=t;_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63}function x(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(v[(i=n)>>18&63]+v[i>>12&63]+v[i>>6&63]+v[63&i]);return o.join("")}function k(e){var t;S||A();for(var r=e.length,n=r%3,i="",o=[],s=16383,a=0,c=r-n;a<c;a+=s)o.push(x(e,a,a+s>c?c:a+s));return 1===n?(t=e[r-1],i+=v[t>>2],i+=v[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=v[t>>10],i+=v[t>>4&63],i+=v[t<<2&63],i+="="),o.push(i),o.join("")}function B(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?i-1:0,f=r?-1:1,d=e[t+l];for(l+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+e[t+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+e[t+l],l+=f,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)}function I(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(t*c-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+d]=255&s,d+=p,s/=256,u-=8);e[r+d-p]|=128*g}var T={}.toString,R=Array.isArray||function(e){return"[object Array]"==T.call(e)};C.TYPED_ARRAY_SUPPORT=void 0===b.TYPED_ARRAY_SUPPORT||b.TYPED_ARRAY_SUPPORT;var O=L();function L(){return C.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function M(e,t){if(L()<t)throw new RangeError("Invalid typed array length");return C.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=C.prototype:(null===e&&(e=new C(t)),e.length=t),e}function C(e,t,r){if(!(C.TYPED_ARRAY_SUPPORT||this instanceof C))return new C(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return U(this,e)}return P(this,e,t,r)}function P(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);C.TYPED_ARRAY_SUPPORT?(e=t).__proto__=C.prototype:e=j(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!C.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|z(t,r);e=M(e,n);var i=e.write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(H(t)){var r=0|$(t.length);return 0===(e=M(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?M(e,0):j(e,t);if("Buffer"===t.type&&R(t.data))return j(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function N(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function U(e,t){if(N(t),e=M(e,t<0?0:0|$(t)),!C.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function j(e,t){var r=t.length<0?0:0|$(t.length);e=M(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function $(e){if(e>=L())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L().toString(16)+" bytes");return 0|e}function H(e){return!(null==e||!e._isBuffer)}function z(e,t){if(H(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return pe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ge(e).length;default:if(n)return pe(e).length;t=(""+t).toLowerCase(),n=!0}}function D(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return ne(this,t,r);case"utf8":case"utf-8":return Q(this,t,r);case"ascii":return te(this,t,r);case"latin1":case"binary":return re(this,t,r);case"base64":return X(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function F(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function q(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=C.from(t,n)),H(t))return 0===t.length?-1:K(e,t,r,n,i);if("number"==typeof t)return t&=255,C.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):K(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function K(e,t,r,n,i){var o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var h=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var l=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){l=!1;break}if(l)return o}return-1}function W(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function V(e,t,r,n){return ye(pe(t,e.length-r),e,r,n)}function Z(e,t,r,n){return ye(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function G(e,t,r,n){return Z(e,t,r,n)}function J(e,t,r,n){return ye(ge(t),e,r,n)}function Y(e,t,r,n){return ye(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function X(e,t,r){return 0===t&&r===e.length?k(e):k(e.slice(t,r))}function Q(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,u=e[i],h=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(h=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,l=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=l}return function(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}(n)}C.poolSize=8192,C._augment=function(e){return e.__proto__=C.prototype,e},C.from=function(e,t,r){return P(null,e,t,r)},C.TYPED_ARRAY_SUPPORT&&(C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&C[Symbol.species]),C.alloc=function(e,t,r){return function(e,t,r,n){return N(t),t<=0?M(e,t):void 0!==r?"string"==typeof n?M(e,t).fill(r,n):M(e,t).fill(r):M(e,t)}(null,e,t,r)},C.allocUnsafe=function(e){return U(null,e)},C.allocUnsafeSlow=function(e){return U(null,e)},C.isBuffer=me,C.compare=function(e,t){if(!H(e)||!H(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},C.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(e,t){if(!R(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return C.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=C.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!H(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},C.byteLength=z,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)F(this,t,t+1);return this},C.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)F(this,t,t+3),F(this,t+1,t+2);return this},C.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)F(this,t,t+7),F(this,t+1,t+6),F(this,t+2,t+5),F(this,t+3,t+4);return this},C.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Q(this,0,e):D.apply(this,arguments)},C.prototype.equals=function(e){if(!H(e))throw new TypeError("Argument must be a Buffer");return this===e||0===C.compare(this,e)},C.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},C.prototype.compare=function(e,t,r,n,i){if(!H(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(n,i),u=e.slice(t,r),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},C.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},C.prototype.indexOf=function(e,t,r){return q(this,e,t,r,!0)},C.prototype.lastIndexOf=function(e,t,r){return q(this,e,t,r,!1)},C.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return W(this,e,t,r);case"utf8":case"utf-8":return V(this,e,t,r);case"ascii":return Z(this,e,t,r);case"latin1":case"binary":return G(this,e,t,r);case"base64":return J(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;function te(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function re(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function ne(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=de(e[o]);return i}function ie(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function oe(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function se(e,t,r,n,i,o){if(!H(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function ae(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function ce(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function ue(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function he(e,t,r,n,i){return i||ue(e,0,r,4),I(e,t,r,n,23,4),r+4}function le(e,t,r,n,i){return i||ue(e,0,r,8),I(e,t,r,n,52,8),r+8}C.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),C.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=C.prototype;else{var i=t-e;r=new C(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},C.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||oe(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},C.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||oe(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},C.prototype.readUInt8=function(e,t){return t||oe(e,1,this.length),this[e]},C.prototype.readUInt16LE=function(e,t){return t||oe(e,2,this.length),this[e]|this[e+1]<<8},C.prototype.readUInt16BE=function(e,t){return t||oe(e,2,this.length),this[e]<<8|this[e+1]},C.prototype.readUInt32LE=function(e,t){return t||oe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},C.prototype.readUInt32BE=function(e,t){return t||oe(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},C.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||oe(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},C.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||oe(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},C.prototype.readInt8=function(e,t){return t||oe(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},C.prototype.readInt16LE=function(e,t){t||oe(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},C.prototype.readInt16BE=function(e,t){t||oe(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},C.prototype.readInt32LE=function(e,t){return t||oe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},C.prototype.readInt32BE=function(e,t){return t||oe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},C.prototype.readFloatLE=function(e,t){return t||oe(e,4,this.length),B(this,e,!0,23,4)},C.prototype.readFloatBE=function(e,t){return t||oe(e,4,this.length),B(this,e,!1,23,4)},C.prototype.readDoubleLE=function(e,t){return t||oe(e,8,this.length),B(this,e,!0,52,8)},C.prototype.readDoubleBE=function(e,t){return t||oe(e,8,this.length),B(this,e,!1,52,8)},C.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||se(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},C.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||se(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},C.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,1,255,0),C.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},C.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ae(this,e,t,!0),t+2},C.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ae(this,e,t,!1),t+2},C.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ce(this,e,t,!0),t+4},C.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ce(this,e,t,!1),t+4},C.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);se(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},C.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);se(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},C.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,1,127,-128),C.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},C.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ae(this,e,t,!0),t+2},C.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ae(this,e,t,!1),t+2},C.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,4,2147483647,-2147483648),C.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ce(this,e,t,!0),t+4},C.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||se(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),C.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ce(this,e,t,!1),t+4},C.prototype.writeFloatLE=function(e,t,r){return he(this,e,t,!0,r)},C.prototype.writeFloatBE=function(e,t,r){return he(this,e,t,!1,r)},C.prototype.writeDoubleLE=function(e,t,r){return le(this,e,t,!0,r)},C.prototype.writeDoubleBE=function(e,t,r){return le(this,e,t,!1,r)},C.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!C.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},C.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!C.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=H(e)?e:pe(new C(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var fe=/[^+\/0-9A-Za-z-_]/g;function de(e){return e<16?"0"+e.toString(16):e.toString(16)}function pe(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function ge(e){return function(e){var t,r,n,i,o,s;S||A();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new E(3*a/4-o),n=o>0?a-4:a;var c=0;for(t=0,r=0;t<n;t+=4,r+=3)i=_[e.charCodeAt(t)]<<18|_[e.charCodeAt(t+1)]<<12|_[e.charCodeAt(t+2)]<<6|_[e.charCodeAt(t+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=_[e.charCodeAt(t)]<<2|_[e.charCodeAt(t+1)]>>4,s[c++]=255&i):1===o&&(i=_[e.charCodeAt(t)]<<10|_[e.charCodeAt(t+1)]<<4|_[e.charCodeAt(t+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(fe,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ye(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function me(e){return null!=e&&(!!e._isBuffer||we(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&we(e.slice(0,0))}(e))}function we(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var be=Object.freeze({__proto__:null,Buffer:C,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),C.alloc(+e)},isBuffer:me,kMaxLength:O});function ve(){}function _e(){_e.init.call(this)}function Ee(e){return void 0===e._maxListeners?_e.defaultMaxListeners:e._maxListeners}function Se(e,t,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new ve,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=Ee(e))&&i>0&&s.length>i){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=r,++e._eventsCount;return e}function Ae(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function xe(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function ke(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}ve.prototype=Object.create(null),_e.EventEmitter=_e,_e.usingDomains=!1,_e.prototype.domain=void 0,_e.prototype._events=void 0,_e.prototype._maxListeners=void 0,_e.defaultMaxListeners=10,_e.init=function(){this.domain=null,_e.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ve,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_e.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},_e.prototype.getMaxListeners=function(){return Ee(this)},_e.prototype.emit=function(e){var t,r,n,i,o,s,a,c="error"===e;if(s=this._events)c=c&&null==s.error;else if(!c)return!1;if(a=this.domain,c){if(t=arguments[1],!a){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=s[e]))return!1;var h="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=ke(e,n),o=0;o<n;++o)i[o].call(r)}(r,h,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=ke(e,i),s=0;s<i;++s)o[s].call(r,n)}(r,h,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=ke(e,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,h,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=ke(e,s),c=0;c<s;++c)a[c].call(r,n,i,o)}(r,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=ke(e,i),s=0;s<i;++s)o[s].apply(r,n)}(r,h,this,i)}return!0},_e.prototype.addListener=function(e,t){return Se(this,e,t,!1)},_e.prototype.on=_e.prototype.addListener,_e.prototype.prependListener=function(e,t){return Se(this,e,t,!0)},_e.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Ae(this,e,t)),this},_e.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ae(this,e,t)),this},_e.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new ve:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new ve,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,s||t)}return this},_e.prototype.off=function(e,t){return this.removeListener(e,t)},_e.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new ve,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new ve:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new ve,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},_e.prototype.listeners=function(e){var t,r,n=this._events;return r=n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[],r},_e.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):xe.call(e,t)},_e.prototype.listenerCount=xe,_e.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Be=Object.freeze({__proto__:null,default:_e,EventEmitter:_e});const Ie="PROMISES",Te="CALLBACK";class Re{static isCallbackAdapterRequest(e){return void 0!==e.id}constructor(e){this.setStrategy(e)}setHandler(e){return this.handler=e,this}request(e,t){if(!this.handler)throw new Error("No handler defined for Adapter");return Re.isCallbackAdapterRequest(e)?this.handler({network:t,id:e.id,name:e.method,params:e.params,object:e.params}):this.handler({name:e.method,network:t,params:e.params,object:e.params})}setStrategy(e){return this.strategy=e,this}getStrategy(){return this.strategy}}class Oe extends Error{constructor(e,t){super(),this.code=e,this.message=t}toString(){return`${this.message} (${this.code})`}}var Le=Object.defineProperty,Me=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,je=(e,t,r)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class $e extends Re{constructor(){super(Te),this.callback=new Map}async request(e,t){return new Promise(((r,n)=>{const i=(new Date).getTime()+Math.floor(1e3*Math.random());this.callback.set(i.toString(),{reject:n,resolve:r}),super.request(((e,t)=>Me(e,Ce(t)))(((e,t)=>{for(var r in t||(t={}))Ne.call(t,r)&&je(e,r,t[r]);if(Pe)for(var r of Pe(t))Ue.call(t,r)&&je(e,r,t[r]);return e})({},e),{id:i}),t)}))}sendResponse(e,t){if(this.callback.has(e.toString())){const r=this.callback.get(e.toString());this.callback.delete(e.toString()),r?.resolve(t)}else console.error(`Unable to find callback for requestId: ${e}`)}sendError(e,t){if(this.callback.has(e.toString())){const r=this.callback.get(e.toString());this.callback.delete(e.toString());let n=t;"string"==typeof n&&!isNaN(parseInt(n,10))&&(n=new Oe(parseInt(n,10),n)),r?.reject(n)}else console.error(`Unable to find callback for requestId: ${e}`)}}class He extends Re{constructor(){super(Ie)}request(e,t){return super.request(e,t)}}class ze extends _e{setAdapter(e){return this.adapter=e,this}async request(e){try{if(!this.adapter)throw new Error("No adapter set, maybe you forgot to register the provider?");const t=await this.adapter.request(e,this.getNetwork());return this.emit("onResponseReady",e,t),t}catch(e){throw e}}sendResponse(e,t){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==Te)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendResponse(e,t)}sendError(e,t){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==Te)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendError(e,t)}}class De{constructor(e){const t=e.strategy===Te?new $e:new He;e.handler&&t.setHandler(e.handler),this.setAdapter(t)}setHandler(e){this.adapter.setHandler(e)}setAdapter(e){return this.adapter=e,this}registerProvider(e){return e.setAdapter(this.adapter),this}registerProviders(e){return e.forEach((e=>this.registerProvider(e))),this}sendResponse(e,t){"CALLBACK"===this.adapter.getStrategy()&&this.adapter.sendResponse(e,t)}sendError(e,t){"CALLBACK"===this.adapter.getStrategy()&&this.adapter.sendError(e,t)}}function Fe(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function qe(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ke(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const We="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Ve=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ze=(e,t)=>e<<32-t|e>>>t;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ge(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),qe(e),e}new Uint8Array(new Uint32Array([287454020]).buffer)[0];class Je{clone(){return this._cloneInto()}}function Ye(e){const t=t=>e().update(Ge(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Xe(e=32){if(We&&"function"==typeof We.getRandomValues)return We.getRandomValues(new Uint8Array(e));if(We&&"function"==typeof We.randomBytes)return We.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Qe=(e,t,r)=>e&t^~e&r,et=(e,t,r)=>e&t^e&r^t&r;class tt extends Je{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ve(this.buffer)}update(e){Ke(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=Ge(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Ve(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ke(this),function(e,t){qe(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=Ve(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const rt=BigInt(2**32-1),nt=BigInt(32);function it(e,t=!1){return t?{h:Number(e&rt),l:Number(e>>nt&rt)}:{h:0|Number(e>>nt&rt),l:0|Number(e&rt)}}const ot={fromBig:it,split:function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=it(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]},toBig:(e,t)=>BigInt(e>>>0)<<nt|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[st,at]=(()=>ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),ct=new Uint32Array(80),ut=new Uint32Array(80);class ht extends tt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:h,Fl:l,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,n,i,o,s,a,c,u,h,l,f,d,p,g]}set(e,t,r,n,i,o,s,a,c,u,h,l,f,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|h,this.Fl=0|l,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)ct[r]=e.getUint32(t),ut[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|ct[e-15],r=0|ut[e-15],n=ot.rotrSH(t,r,1)^ot.rotrSH(t,r,8)^ot.shrSH(t,r,7),i=ot.rotrSL(t,r,1)^ot.rotrSL(t,r,8)^ot.shrSL(t,r,7),o=0|ct[e-2],s=0|ut[e-2],a=ot.rotrSH(o,s,19)^ot.rotrBH(o,s,61)^ot.shrSH(o,s,6),c=ot.rotrSL(o,s,19)^ot.rotrBL(o,s,61)^ot.shrSL(o,s,6),u=ot.add4L(i,c,ut[e-7],ut[e-16]),h=ot.add4H(u,n,a,ct[e-7],ct[e-16]);ct[e]=0|h,ut[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:h,El:l,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){const t=ot.rotrSH(h,l,14)^ot.rotrSH(h,l,18)^ot.rotrBH(h,l,41),w=ot.rotrSL(h,l,14)^ot.rotrSL(h,l,18)^ot.rotrBL(h,l,41),b=h&f^~h&p,v=l&d^~l&g,_=ot.add5L(m,w,v,at[e],ut[e]),E=ot.add5H(_,y,t,b,st[e],ct[e]),S=0|_,A=ot.rotrSH(r,n,28)^ot.rotrBH(r,n,34)^ot.rotrBH(r,n,39),x=ot.rotrSL(r,n,28)^ot.rotrBL(r,n,34)^ot.rotrBL(r,n,39),k=r&i^r&s^i&s,B=n&o^n&a^o&a;y=0|p,m=0|g,p=0|f,g=0|d,f=0|h,d=0|l,({h:h,l:l}=ot.add(0|c,0|u,0|E,0|S)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const I=ot.add3L(S,x,B);r=ot.add3H(I,E,A,k),n=0|I}({h:r,l:n}=ot.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=ot.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=ot.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=ot.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:h,l:l}=ot.add(0|this.Eh,0|this.El,0|h,0|l)),({h:f,l:d}=ot.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=ot.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=ot.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(r,n,i,o,s,a,c,u,h,l,f,d,p,g,y,m)}roundClean(){ct.fill(0),ut.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const lt=Ye((()=>new ht)),ft=BigInt(0),dt=BigInt(1),pt=BigInt(2);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gt(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function yt(e){if(!gt(e))throw new Error("Uint8Array expected")}function mt(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const wt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bt(e){yt(e);let t="";for(let r=0;r<e.length;r++)t+=wt[e[r]];return t}function vt(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function _t(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Et=48,St=57,At=65,xt=70,kt=97,Bt=102;function It(e){return e>=Et&&e<=St?e-Et:e>=At&&e<=xt?e-(At-10):e>=kt&&e<=Bt?e-(kt-10):void 0}function Tt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=It(e.charCodeAt(i)),o=It(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function Rt(e){return _t(bt(e))}function Ot(e){return yt(e),_t(bt(Uint8Array.from(e).reverse()))}function Lt(e,t){return Tt(e.toString(16).padStart(2*t,"0"))}function Mt(e,t){return Lt(e,t).reverse()}function Ct(e,t,r){let n;if("string"==typeof t)try{n=Tt(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!gt(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Pt(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];yt(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Nt=e=>"bigint"==typeof e&&ft<=e;function Ut(e,t,r){return Nt(e)&&Nt(t)&&Nt(r)&&t<=e&&e<r}function jt(e,t,r,n){if(!Ut(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function $t(e){let t;for(t=0;e>ft;e>>=dt,t+=1);return t}const Ht=e=>(pt<<BigInt(e-1))-dt,zt=e=>new Uint8Array(e),Dt=e=>Uint8Array.from(e);function Ft(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=zt(e),i=zt(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),c=(e=zt())=>{i=a(Dt([0]),e),n=a(),0!==e.length&&(i=a(Dt([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Pt(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}}const qt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||gt(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Kt(e,t,r={}){const n=(t,r,n)=>{const i=qt[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function Wt(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const o=e(r,...n);return t.set(r,o),o}}var Vt=Object.freeze({__proto__:null,isBytes:gt,abytes:yt,abool:mt,bytesToHex:bt,numberToHexUnpadded:vt,hexToNumber:_t,hexToBytes:Tt,bytesToNumberBE:Rt,bytesToNumberLE:Ot,numberToBytesBE:Lt,numberToBytesLE:Mt,numberToVarBytesBE:function(e){return Tt(vt(e))},ensureBytes:Ct,concatBytes:Pt,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},inRange:Ut,aInRange:jt,bitLen:$t,bitGet:function(e,t){return e>>BigInt(t)&dt},bitSet:function(e,t,r){return e|(r?dt:ft)<<BigInt(t)},bitMask:Ht,createHmacDrbg:Ft,validateObject:Kt,notImplemented:()=>{throw new Error("not implemented")},memoized:Wt});
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zt=BigInt(0),Gt=BigInt(1),Jt=BigInt(2),Yt=BigInt(3),Xt=BigInt(4),Qt=BigInt(5),er=BigInt(8);function tr(e,t){const r=e%t;return r>=Zt?r:t+r}function rr(e,t,r){if(r<=Zt||t<Zt)throw new Error("Expected power/modulo > 0");if(r===Gt)return Zt;let n=Gt;for(;t>Zt;)t&Gt&&(n=n*e%r),e=e*e%r,t>>=Gt;return n}function nr(e,t,r){let n=e;for(;t-- >Zt;)n*=n,n%=r;return n}function ir(e,t){if(e===Zt||t<=Zt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=tr(e,t),n=t,i=Zt,o=Gt;for(;r!==Zt;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==Gt)throw new Error("invert: does not exist");return tr(i,t)}function or(e){if(e%Xt===Yt){const t=(e+Gt)/Xt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%er===Qt){const t=(e-Qt)/er;return function(e,r){const n=e.mul(r,Jt),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,Jt),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Gt)/Jt;let r,n,i;for(r=e-Gt,n=0;r%Jt===Zt;r/=Jt,n++);for(i=Jt;i<e&&rr(i,t,e)!==e-Gt;i++);if(1===n){const t=(e+Gt)/Xt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+Gt)/Jt;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),h=e.pow(s,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,Gt<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}(e)}BigInt(9),BigInt(16);const sr=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ar(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function cr(e,t,r=!1,n={}){if(e<=Zt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=ar(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=or(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ht(i),ZERO:Zt,ONE:Gt,create:t=>tr(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Zt<=t&&t<e},is0:e=>e===Zt,isOdd:e=>(e&Gt)===Gt,neg:t=>tr(-t,e),eql:(e,t)=>e===t,sqr:t=>tr(t*t,e),add:(t,r)=>tr(t+r,e),sub:(t,r)=>tr(t-r,e),mul:(t,r)=>tr(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Zt)throw new Error("Expected power > 0");if(r===Zt)return e.ONE;if(r===Gt)return t;let n=e.ONE,i=t;for(;r>Zt;)r&Gt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Gt;return n}(a,e,t),div:(t,r)=>tr(t*ir(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ir(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Mt(e,o):Lt(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?Ot(e):Rt(e)}});return Object.freeze(a)}function ur(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function hr(e){const t=ur(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const lr=BigInt(0),fr=BigInt(1),dr=new WeakMap,pr=new WeakMap;function gr(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},i=e=>{n(e);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>lr;)r&fr&&(n=n.add(i)),i=i.double(),r>>=fr;return n},precomputeWindow(e,t){const{windows:r,windowSize:n}=i(t),o=[];let s=e,a=s;for(let e=0;e<r;e++){a=s,o.push(a);for(let e=1;e<n;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,n,o){const{windows:s,windowSize:a}=i(t);let c=e.ZERO,u=e.BASE;const h=BigInt(2**t-1),l=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let i=Number(o&h);o>>=f,i>a&&(i-=l,o+=fr);const s=t,d=t+Math.abs(i)-1,p=e%2!=0,g=i<0;0===i?u=u.add(r(p,n[s])):c=c.add(r(g,n[d]))}return{p:c,f:u}},wNAFCached(e,t,r){const n=pr.get(e)||1;let i=dr.get(e);return i||(i=this.precomputeWindow(e,n),1!==n&&dr.set(e,r(i))),this.wNAF(n,i,t)},setWindowSize(e,t){n(t),pr.set(e,t),dr.delete(e)}}}function yr(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach(((e,r)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${r}`)})),r.forEach(((t,r)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${r}`)}));const i=$t(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,s=(1<<o)-1,a=new Array(s+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/o)*o;let u=e.ZERO;for(let t=c;t>=0;t-=o){a.fill(e.ZERO);for(let e=0;e<n.length;e++){const i=n[e],o=Number(i>>BigInt(t)&BigInt(s));a[o]=a[o].add(r[e])}let i=e.ZERO;for(let t=a.length-1,r=e.ZERO;t>0;t--)r=r.add(a[t]),i=i.add(r);if(u=u.add(i),0!==t)for(let e=0;e<o;e++)u=u.double()}return u}function mr(e){return function(e){const t=sr.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Kt(e,t)}(e.Fp),Kt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ar(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wr=BigInt(0),br=BigInt(1),vr=BigInt(2),_r=BigInt(8),Er={zip215:!0};function Sr(e){const t=function(e){const t=mr(e);return Kt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=t,u=vr<<BigInt(8*a)-br,h=r.create,l=cr(t.n,t.nBitLength),f=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:wr}}}),d=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(mt("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){jt("coordinate "+e,t,wr,u)}function y(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const m=Wt(((e,t)=>{const{ex:n,ey:i,ez:o}=e,s=e.is0();null==t&&(t=s?_r:r.inv(o));const a=h(n*t),c=h(i*t),u=h(o*t);if(s)return{x:wr,y:br};if(u!==br)throw new Error("invZ was invalid");return{x:a,y:c}})),w=Wt((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:o,ez:s,et:a}=e,c=h(i*i),u=h(o*o),l=h(s*s),f=h(l*l),d=h(c*r);if(h(l*h(d+u))!==h(f+h(n*h(c*u))))throw new Error("bad point: equation left != right (1)");if(h(i*o)!==h(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,br,h(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return yr(b,l,e,t)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){y(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=e,a=h(t*s),c=h(i*n),u=h(r*s),l=h(o*n);return a===c&&u===l}is0(){return this.equals(b.ZERO)}negate(){return new b(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,o=h(r*r),s=h(n*n),a=h(vr*h(i*i)),c=h(e*o),u=r+n,l=h(h(u*u)-o-s),f=c+s,d=f-a,p=c-s,g=h(l*d),y=h(f*p),m=h(l*p),w=h(d*f);return new b(g,y,w,m)}add(e){y(e);const{a:r,d:n}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:c,ey:u,ez:l,et:f}=e;if(r===BigInt(-1)){const e=h((o-i)*(u+c)),t=h((o+i)*(u-c)),r=h(t-e);if(r===wr)return this.double();const n=h(s*vr*f),d=h(a*vr*l),p=d+n,g=t+e,y=d-n,m=h(p*r),w=h(g*y),v=h(p*y),_=h(r*g);return new b(m,w,_,v)}const d=h(i*c),p=h(o*u),g=h(a*n*f),m=h(s*l),w=h((i+o)*(c+u)-d-p),v=m-g,_=m+g,E=h(p-r*d),S=h(w*v),A=h(_*E),x=h(w*E),k=h(v*_);return new b(S,A,k,x)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;jt("scalar",t,br,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e){const t=e;return jt("scalar",t,wr,n),t===wr?_:this.equals(_)||t===br?this:this.equals(v)?this.wNAF(t).p:E.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){return m(this,e)}clearCofactor(){const{h:e}=t;return e===br?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:o}=t,s=r.BYTES;e=Ct("pointHex",e,s),mt("zip215",n);const a=e.slice(),c=e[s-1];a[s-1]=-129&c;const l=Ot(a),d=n?u:r.ORDER;jt("pointHex.y",l,wr,d);const p=h(l*l),g=h(p-br),y=h(i*p-o);let{isValid:m,value:w}=f(g,y);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&br)===br,_=!!(128&c);if(!n&&w===wr&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==v&&(w=h(-w)),b.fromAffine({x:w,y:l})}static fromPrivateKey(e){return x(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=Mt(t,r.BYTES);return n[n.length-1]|=e&br?128:0,n}toHex(){return bt(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,br,h(t.Gx*t.Gy)),b.ZERO=new b(wr,br,br,wr);const{BASE:v,ZERO:_}=b,E=gr(b,8*a);function S(e){return tr(e,n)}function A(e){return S(Ot(e))}function x(e){const t=a;e=Ct("private key",e,t);const r=Ct("hashed private key",o(e),2*t),n=d(r.slice(0,t)),i=r.slice(t,2*t),s=A(n),c=v.multiply(s),u=c.toRawBytes();return{head:n,prefix:i,scalar:s,point:c,pointBytes:u}}function k(e=new Uint8Array,...t){const r=Pt(...t);return A(o(p(r,Ct("context",e),!!i)))}const B=Er;v._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return x(e).pointBytes},sign:function(e,t,o={}){e=Ct("message",e),i&&(e=i(e));const{prefix:s,scalar:c,pointBytes:u}=x(t),h=k(o.context,s,e),l=v.multiply(h).toRawBytes(),f=S(h+k(o.context,l,u,e)*c);return jt("signature.s",f,wr,n),Ct("result",Pt(l,Mt(f,r.BYTES)),2*a)},verify:function(e,t,n,o=B){const{context:s,zip215:a}=o,c=r.BYTES;e=Ct("signature",e,2*c),t=Ct("message",t),void 0!==a&&mt("zip215",a),i&&(t=i(t));const u=Ot(e.slice(c,2*c));let h,l,f;try{h=b.fromHex(n,a),l=b.fromHex(e.slice(0,c),a),f=v.multiplyUnsafe(u)}catch(e){return!1}if(!a&&h.isSmallOrder())return!1;const d=k(s,l.toRawBytes(),h.toRawBytes(),t);return l.add(h.multiplyUnsafe(d)).subtract(f).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>s(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ar=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const kr=BigInt(1),Br=BigInt(2);BigInt(3);const Ir=BigInt(5),Tr=BigInt(8);function Rr(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Or(e,t){const r=Ar,n=tr(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=Ar,s=e*e%o*e%o,a=nr(s,Br,o)*s%o,c=nr(a,kr,o)*e%o,u=nr(c,Ir,o)*c%o,h=nr(u,t,o)*u%o,l=nr(h,r,o)*h%o,f=nr(l,n,o)*l%o,d=nr(f,i,o)*f%o,p=nr(d,i,o)*f%o,g=nr(p,t,o)*u%o;return{pow_p_5_8:nr(g,Br,o)*e%o,b2:s}}(e*tr(n*n*t,r)).pow_p_5_8;let o=tr(e*n*i,r);const s=tr(t*o*o,r),a=o,c=tr(o*xr,r),u=s===e,h=s===tr(-e,r),l=s===tr(-e*xr,r);return u&&(o=a),(h||l)&&(o=c),(tr(o,r)&Gt)===Gt&&(o=tr(-o,r)),{isValid:u||h,value:o}}const Lr=(()=>cr(Ar,void 0,!0))(),Mr=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Lr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Tr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:lt,randomBytes:Xe,adjustScalarBytes:Rr,uvRatio:Or}))(),Cr=(()=>Sr(Mr))();var Pr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nr(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var Ur={exports:{}},jr=Nr(be);(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:jr.Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,n,i){for(var o=0,s=0,a=Math.min(e.length,n),c=t;c<a;c++){var u=e.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&s<i,"Invalid character"),o+=s}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,h=r;h<a;h+=n)u=c(e,h,h+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(e,h,e.length,t),h=0;h<s;h++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){u(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,f=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=f;d++){var p=u-d|0;h+=(s=(i=0|e.words[p])*(o=0|t.words[d])+l)/67108864|0,l=67108863&s}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?l[6-c.length]+c+n:c+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],h=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(h).toString(e);n=(p=p.idivn(h)).isZero()?g+n:l[u-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r(!(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r(!(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r(!(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,g=d>>>13,y=0|s[2],m=8191&y,w=y>>>13,b=0|s[3],v=8191&b,_=b>>>13,E=0|s[4],S=8191&E,A=E>>>13,x=0|s[5],k=8191&x,B=x>>>13,I=0|s[6],T=8191&I,R=I>>>13,O=0|s[7],L=8191&O,M=O>>>13,C=0|s[8],P=8191&C,N=C>>>13,U=0|s[9],j=8191&U,$=U>>>13,H=0|a[0],z=8191&H,D=H>>>13,F=0|a[1],q=8191&F,K=F>>>13,W=0|a[2],V=8191&W,Z=W>>>13,G=0|a[3],J=8191&G,Y=G>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,fe=he>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(l,z))|0)+((8191&(i=(i=Math.imul(l,D))+Math.imul(f,z)|0))<<13)|0;u=((o=Math.imul(f,D))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,D))+Math.imul(g,z)|0,o=Math.imul(g,D);var me=(u+(n=n+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,K)|0)+Math.imul(f,q)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,z),i=(i=Math.imul(m,D))+Math.imul(w,z)|0,o=Math.imul(w,D),n=n+Math.imul(p,q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,K)|0;var we=(u+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(v,z),i=(i=Math.imul(v,D))+Math.imul(_,z)|0,o=Math.imul(_,D),n=n+Math.imul(m,q)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,Z)|0;var be=(u+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(f,J)|0))<<13)|0;u=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,D))+Math.imul(A,z)|0,o=Math.imul(A,D),n=n+Math.imul(v,q)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(_,q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(m,V)|0,i=(i=i+Math.imul(m,Z)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Z)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var ve=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(f,Q)|0))<<13)|0;u=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,D))+Math.imul(B,z)|0,o=Math.imul(B,D),n=n+Math.imul(S,q)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(m,J)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0;var _e=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(f,re)|0))<<13)|0;u=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(T,z),i=(i=Math.imul(T,D))+Math.imul(R,z)|0,o=Math.imul(R,D),n=n+Math.imul(k,q)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(B,q)|0,o=o+Math.imul(B,K)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,Z)|0,n=n+Math.imul(v,J)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ee=(u+(n=n+Math.imul(l,oe)|0)|0)+((8191&(i=(i=i+Math.imul(l,se)|0)+Math.imul(f,oe)|0))<<13)|0;u=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,D))+Math.imul(M,z)|0,o=Math.imul(M,D),n=n+Math.imul(T,q)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(R,q)|0,o=o+Math.imul(R,K)|0,n=n+Math.imul(k,V)|0,i=(i=i+Math.imul(k,Z)|0)+Math.imul(B,V)|0,o=o+Math.imul(B,Z)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(m,re)|0,i=(i=i+Math.imul(m,ne)|0)+Math.imul(w,re)|0,o=o+Math.imul(w,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Se=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(i=(i=i+Math.imul(l,ue)|0)+Math.imul(f,ce)|0))<<13)|0;u=((o=o+Math.imul(f,ue)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,D))+Math.imul(N,z)|0,o=Math.imul(N,D),n=n+Math.imul(L,q)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,K)|0,n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(R,V)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(m,oe)|0,i=(i=i+Math.imul(m,se)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(g,ce)|0,o=o+Math.imul(g,ue)|0;var Ae=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,fe)|0)+Math.imul(f,le)|0))<<13)|0;u=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(j,z),i=(i=Math.imul(j,D))+Math.imul($,z)|0,o=Math.imul($,D),n=n+Math.imul(P,q)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(L,V)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,Z)|0,n=n+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(v,oe)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(m,ce)|0,i=(i=i+Math.imul(m,ue)|0)+Math.imul(w,ce)|0,o=o+Math.imul(w,ue)|0,n=n+Math.imul(p,le)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,le)|0,o=o+Math.imul(g,fe)|0;var xe=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(i=(i=i+Math.imul(l,ge)|0)+Math.imul(f,pe)|0))<<13)|0;u=((o=o+Math.imul(f,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,q),i=(i=Math.imul(j,K))+Math.imul($,q)|0,o=Math.imul($,K),n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,Z)|0,n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(B,re)|0,o=o+Math.imul(B,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,n=n+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,ue)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,n=n+Math.imul(m,le)|0,i=(i=i+Math.imul(m,fe)|0)+Math.imul(w,le)|0,o=o+Math.imul(w,fe)|0;var ke=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;u=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(j,V),i=(i=Math.imul(j,Z))+Math.imul($,V)|0,o=Math.imul($,Z),n=n+Math.imul(P,J)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(B,oe)|0,o=o+Math.imul(B,se)|0,n=n+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,ue)|0)+Math.imul(A,ce)|0,o=o+Math.imul(A,ue)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,fe)|0)+Math.imul(_,le)|0,o=o+Math.imul(_,fe)|0;var Be=(u+(n=n+Math.imul(m,pe)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(w,pe)|0))<<13)|0;u=((o=o+Math.imul(w,ge)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(j,J),i=(i=Math.imul(j,Y))+Math.imul($,J)|0,o=Math.imul($,Y),n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(k,ce)|0,i=(i=i+Math.imul(k,ue)|0)+Math.imul(B,ce)|0,o=o+Math.imul(B,ue)|0,n=n+Math.imul(S,le)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(A,le)|0,o=o+Math.imul(A,fe)|0;var Ie=(u+(n=n+Math.imul(v,pe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ge)|0)+Math.imul(_,pe)|0))<<13)|0;u=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(j,Q),i=(i=Math.imul(j,ee))+Math.imul($,Q)|0,o=Math.imul($,ee),n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,n=n+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(R,ce)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(k,le)|0,i=(i=i+Math.imul(k,fe)|0)+Math.imul(B,le)|0,o=o+Math.imul(B,fe)|0;var Te=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(A,pe)|0))<<13)|0;u=((o=o+Math.imul(A,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(j,re),i=(i=Math.imul(j,ne))+Math.imul($,re)|0,o=Math.imul($,ne),n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,ue)|0)+Math.imul(M,ce)|0,o=o+Math.imul(M,ue)|0,n=n+Math.imul(T,le)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(R,le)|0,o=o+Math.imul(R,fe)|0;var Re=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,ge)|0)+Math.imul(B,pe)|0))<<13)|0;u=((o=o+Math.imul(B,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(j,oe),i=(i=Math.imul(j,se))+Math.imul($,oe)|0,o=Math.imul($,se),n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,ue)|0)+Math.imul(N,ce)|0,o=o+Math.imul(N,ue)|0,n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(M,le)|0,o=o+Math.imul(M,fe)|0;var Oe=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ge)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(j,ce),i=(i=Math.imul(j,ue))+Math.imul($,ce)|0,o=Math.imul($,ue),n=n+Math.imul(P,le)|0,i=(i=i+Math.imul(P,fe)|0)+Math.imul(N,le)|0,o=o+Math.imul(N,fe)|0;var Le=(u+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ge)|0)+Math.imul(M,pe)|0))<<13)|0;u=((o=o+Math.imul(M,ge)|0)+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,n=Math.imul(j,le),i=(i=Math.imul(j,fe))+Math.imul($,le)|0,o=Math.imul($,fe);var Me=(u+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(N,pe)|0))<<13)|0;u=((o=o+Math.imul(N,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863;var Ce=(u+(n=Math.imul(j,pe))|0)+((8191&(i=(i=Math.imul(j,ge))+Math.imul($,pe)|0))<<13)|0;return u=((o=Math.imul($,ge))+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,c[0]=ye,c[1]=me,c[2]=we,c[3]=be,c[4]=ve,c[5]=_e,c[6]=Ee,c[7]=Se,c[8]=Ae,c[9]=xe,c[10]=ke,c[11]=Be,c[12]=Ie,c[13]=Te,c[14]=Re,c[15]=Oe,c[16]=Le,c[17]=Me,c[18]=Ce,0!==u&&(c[19]=u,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var h=o-u,l=(0|e.words[h])*(0|t.words[u]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function m(e,t,r){return y(e,t,r)}Math.imul||(g=p),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):r<63?p(this,e,t):r<1024?y(this,e,t):m(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var l=0|this.words[u];this.words[u]=h<<26-o|l>>>o,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),o=e,s=0|o.words[o.length-1];0!=(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,c=n.length-o.length;if("mod"!==t){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(o,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var f=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(o,f,l);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=f)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var o,s,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var h=n.clone(),l=t.clone();!t.isZero();){for(var f=0,d=1;!(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(h),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;!(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(c)):(n.isub(t),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,s=new i(1),a=new i(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,h=1;!(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var l=0,f=1;!(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(o=0===t.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new A(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(v,b),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,b),n(E,b),n(S,b),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new _;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return w[e]=t,t},A.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){r(!(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=s;0!==d.cmp(a);){for(var g=d,y=0;0!==g.cmp(a);y++)g=g.redSqr();r(y<p);var m=this.pow(l,new i(1).iushln(p-y-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=y}return f},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var l=u>>h&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4==++a||0===n&&0===h)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}c=26}return o},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new x(e)},n(x,A),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}})(Ur,Pr);var $r=Ur.exports,Hr={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(e,t){var r=jr,n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(Hr,Hr.exports);var zr=Hr.exports.Buffer;var Dr=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return zr.alloc(0);for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*c+1>>>0,u=new Uint8Array(o);e[r];){var h=t[e.charCodeAt(r)];if(255===h)return;for(var l=0,f=o-1;(0!==h||l<i)&&-1!==f;f--,l++)h+=s*u[f]>>>0,u[f]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var d=o-i;d!==o&&0===u[d];)d++;var p=zr.allocUnsafe(n+(o-d));p.fill(0,0,n);for(var g=n;d!==o;)p[g++]=u[d++];return p}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=zr.from(t)),!zr.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*u+1>>>0,h=new Uint8Array(c);i!==o;){for(var l=t[i],f=0,d=c-1;(0!==l||f<n)&&-1!==d;d--,f++)l+=256*h[d]>>>0,h[d]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,i++}for(var p=c-n;p!==c&&0===h[p];)p++;for(var g=a.repeat(r);p<c;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+s+" character")}}},Fr=Dr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const qr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wr=new Uint32Array(64);class Vr extends tt{constructor(){super(64,32,8,!1),this.A=0|Kr[0],this.B=0|Kr[1],this.C=0|Kr[2],this.D=0|Kr[3],this.E=0|Kr[4],this.F=0|Kr[5],this.G=0|Kr[6],this.H=0|Kr[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Wr[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Wr[e-15],r=Wr[e-2],n=Ze(t,7)^Ze(t,18)^t>>>3,i=Ze(r,17)^Ze(r,19)^r>>>10;Wr[e]=i+Wr[e-7]+n+Wr[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(Ze(s,6)^Ze(s,11)^Ze(s,25))+Qe(s,a,c)+qr[e]+Wr[e]|0,h=(Ze(r,2)^Ze(r,13)^Ze(r,22))+et(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){Wr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Zr=Ye((()=>new Vr));var Gr={};function Jr(e,t,r){return t<=e&&e<=r}function Yr(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function Xr(e){this.tokens=[].slice.call(e)}Xr.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var Qr=-1;function en(e,t){if(e)throw TypeError("Decoder error");return t||65533}var tn="utf-8";function rn(e,t){if(!(this instanceof rn))return new rn(e,t);if((e=void 0!==e?String(e).toLowerCase():tn)!==tn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Yr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function nn(e,t){if(!(this instanceof nn))return new nn(e,t);if((e=void 0!==e?String(e).toLowerCase():tn)!==tn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Yr(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function on(e){var t=e.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(e,a){if(-1===a&&0!==i)return i=0,en(t);if(-1===a)return Qr;if(0===i){if(Jr(a,0,127))return a;if(Jr(a,194,223))i=1,r=a-192;else if(Jr(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,r=a-224;else{if(!Jr(a,240,244))return en(t);240===a&&(o=144),244===a&&(s=143),i=3,r=a-240}return r<<=6*i,null}if(!Jr(a,o,s))return r=i=n=0,o=128,s=191,e.prepend(a),en(t);if(o=128,s=191,r+=a-128<<6*(i-(n+=1)),n!==i)return null;var c=r;return r=i=n=0,c}}function sn(e){e.fatal,this.handler=function(e,t){if(-1===t)return Qr;if(Jr(t,0,127))return t;var r,n;Jr(t,128,2047)?(r=1,n=192):Jr(t,2048,65535)?(r=2,n=224):Jr(t,65536,1114111)&&(r=3,n=240);for(var i=[(t>>6*r)+n];r>0;){var o=t>>6*(r-1);i.push(128|63&o),r-=1}return i}}rn.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=Yr(t),this._streaming||(this._decoder=new on({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var n,i=new Xr(r),o=[];!i.endOfStream()&&(n=this._decoder.handler(i,i.read()))!==Qr;)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if((n=this._decoder.handler(i,i.read()))===Qr)break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(o)}},nn.prototype={encode:function(e,t){e=e?String(e):"",t=Yr(t),this._streaming||(this._encoder=new sn(this._options)),this._streaming=Boolean(t.stream);for(var r,n=[],i=new Xr(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,c=1023&s;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(e));!i.endOfStream()&&(r=this._encoder.handler(i,i.read()))!==Qr;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(i,i.read()))!==Qr;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};var an=Nr(Object.freeze({__proto__:null,TextEncoder:nn,TextDecoder:rn})),cn=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),un=Pr&&Pr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hn=Pr&&Pr.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},ln=Pr&&Pr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&cn(t,e,r);return un(t,e),t},fn=Pr&&Pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gr,"__esModule",{value:!0});var dn=Gr.deserializeUnchecked=Tn=Gr.deserialize=kn=Gr.serialize=Gr.BinaryReader=Gr.BinaryWriter=Gr.BorshError=Gr.baseDecode=Gr.baseEncode=void 0;const pn=fn(Ur.exports),gn=fn(Fr),yn=ln(an),mn=new("function"!=typeof TextDecoder?yn.TextDecoder:TextDecoder)("utf-8",{fatal:!0});Gr.baseEncode=function(e){return"string"==typeof e&&(e=C.from(e,"utf8")),gn.default.encode(C.from(e))},Gr.baseDecode=function(e){return C.from(gn.default.decode(e))};const wn=1024;class bn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Gr.BorshError=bn;class vn{constructor(){this.buf=C.alloc(wn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=C.concat([this.buf,C.alloc(wn)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(C.from(new pn.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(C.from(new pn.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(C.from(new pn.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(C.from(new pn.default(e).toArray("le",64)))}writeBuffer(e){this.buf=C.concat([C.from(this.buf.subarray(0,this.length)),e,C.alloc(wn)]),this.length+=e.length}writeString(e){this.maybeResize();const t=C.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(C.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function _n(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new bn("Reached the end of buffer when deserializing")}throw e}}}Gr.BinaryWriter=vn;class En{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new pn.default(e,"le")}readU128(){const e=this.readBuffer(16);return new pn.default(e,"le")}readU256(){const e=this.readBuffer(32);return new pn.default(e,"le")}readU512(){const e=this.readBuffer(64);return new pn.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new bn(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return mn.decode(t)}catch(e){throw new bn(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function Sn(e){return e.charAt(0).toUpperCase()+e.slice(1)}function An(e,t,r,n,i){try{if("string"==typeof n)i[`write${Sn(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new bn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new bn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)An(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{An(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),An(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,o)=>{An(e,t,o,n.key,i),An(e,t,r,n.value,i)}));break;default:throw new bn(`FieldType ${n} unrecognized`)}else xn(e,r,i)}catch(e){throw e instanceof bn&&e.addToFieldPath(t),e}}function xn(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new bn(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{An(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new bn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),An(e,s,t[s],a,r);break}}}}}hn([_n],En.prototype,"readU8",null),hn([_n],En.prototype,"readU16",null),hn([_n],En.prototype,"readU32",null),hn([_n],En.prototype,"readU64",null),hn([_n],En.prototype,"readU128",null),hn([_n],En.prototype,"readU256",null),hn([_n],En.prototype,"readU512",null),hn([_n],En.prototype,"readString",null),hn([_n],En.prototype,"readFixedArray",null),hn([_n],En.prototype,"readArray",null),Gr.BinaryReader=En;var kn=Gr.serialize=function(e,t,r=vn){const n=new r;return xn(e,t,n),n.toArray()};function Bn(e,t,r,n){try{if("string"==typeof r)return n[`read${Sn(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(Bn(e,null,r[0],n));return t}return n.readArray((()=>Bn(e,t,r[0],n)))}if("option"===r.kind){return n.readU8()?Bn(e,t,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=Bn(e,t,r.key,n),s=Bn(e,t,r.value,n);i.set(o,s)}return i}return In(e,r,n)}catch(e){throw e instanceof bn&&e.addToFieldPath(t),e}}function In(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new bn(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of e.get(t).fields)n[i]=Bn(e,i,o,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new bn(`Enum index: ${i} is out of range`);const[o,s]=n.values[i],a=Bn(e,o,s,r);return new t({[o]:a})}throw new bn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}var Tn=Gr.deserialize=function(e,t,r,n=En){const i=new n(r),o=In(e,t,i);if(i.offset<r.length)throw new bn(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o};dn=Gr.deserializeUnchecked=function(e,t,r,n=En){return In(e,t,new n(r))};var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.s16=Rn.s8=Rn.nu64be=Rn.u48be=Rn.u40be=Rn.u32be=Rn.u24be=Rn.u16be=wi=Rn.nu64=Rn.u48=Rn.u40=mi=Rn.u32=Rn.u24=yi=Rn.u16=gi=Rn.u8=pi=Rn.offset=Rn.greedy=Rn.Constant=Rn.UTF8=Rn.CString=Rn.Blob=Rn.Boolean=Rn.BitField=Rn.BitStructure=Rn.VariantLayout=Rn.Union=Rn.UnionLayoutDiscriminator=Rn.UnionDiscriminator=Rn.Structure=Rn.Sequence=Rn.DoubleBE=Rn.Double=Rn.FloatBE=Rn.Float=Rn.NearInt64BE=Rn.NearInt64=Rn.NearUInt64BE=Rn.NearUInt64=Rn.IntBE=Rn.Int=Rn.UIntBE=Rn.UInt=Rn.OffsetLayout=Rn.GreedyCount=Rn.ExternalLayout=Rn.bindConstructorLayout=Rn.nameWithProperty=Rn.Layout=Rn.uint8ArrayToBuffer=Rn.checkUint8Array=void 0,Rn.constant=Rn.utf8=Rn.cstr=Ei=Rn.blob=Rn.unionLayoutDiscriminator=Rn.union=_i=Rn.seq=Rn.bits=vi=Rn.struct=Rn.f64be=Rn.f64=Rn.f32be=Rn.f32=Rn.ns64be=Rn.s48be=Rn.s40be=Rn.s32be=Rn.s24be=Rn.s16be=bi=Rn.ns64=Rn.s48=Rn.s40=Rn.s32=Rn.s24=void 0;const On=jr;function Ln(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function Mn(e){return Ln(e),On.Buffer.from(e.buffer,e.byteOffset,e.length)}Rn.checkUint8Array=Ln,Rn.uint8ArrayToBuffer=Mn;class Cn{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function Pn(e,t){return t.property?e+"["+t.property+"]":e}Rn.Layout=Cn,Rn.nameWithProperty=Pn,Rn.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Cn))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class Nn extends Cn{isCount(){throw new Error("ExternalLayout is abstract")}}Rn.ExternalLayout=Nn;class Un extends Nn{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Ln(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}Rn.GreedyCount=Un;class jn extends Nn{constructor(e,t=0,r){if(!(e instanceof Cn))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof $n||this.layout instanceof Hn}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}Rn.OffsetLayout=jn;class $n extends Cn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readUIntLE(t,this.span)}encode(e,t,r=0){return Mn(t).writeUIntLE(e,r,this.span),this.span}}Rn.UInt=$n;class Hn extends Cn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readUIntBE(t,this.span)}encode(e,t,r=0){return Mn(t).writeUIntBE(e,r,this.span),this.span}}Rn.UIntBE=Hn;class zn extends Cn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readIntLE(t,this.span)}encode(e,t,r=0){return Mn(t).writeIntLE(e,r,this.span),this.span}}Rn.Int=zn;class Dn extends Cn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Mn(e).readIntBE(t,this.span)}encode(e,t,r=0){return Mn(t).writeIntBE(e,r,this.span),this.span}}Rn.IntBE=Dn;const Fn=Math.pow(2,32);function qn(e){const t=Math.floor(e/Fn);return{hi32:t,lo32:e-t*Fn}}function Kn(e,t){return e*Fn+t}class Wn extends Cn{constructor(e){super(8,e)}decode(e,t=0){const r=Mn(e),n=r.readUInt32LE(t);return Kn(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=qn(e),i=Mn(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}Rn.NearUInt64=Wn;class Vn extends Cn{constructor(e){super(8,e)}decode(e,t=0){const r=Mn(e);return Kn(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=qn(e),i=Mn(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Rn.NearUInt64BE=Vn;class Zn extends Cn{constructor(e){super(8,e)}decode(e,t=0){const r=Mn(e),n=r.readUInt32LE(t);return Kn(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=qn(e),i=Mn(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}Rn.NearInt64=Zn;class Gn extends Cn{constructor(e){super(8,e)}decode(e,t=0){const r=Mn(e);return Kn(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=qn(e),i=Mn(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Rn.NearInt64BE=Gn;class Jn extends Cn{constructor(e){super(4,e)}decode(e,t=0){return Mn(e).readFloatLE(t)}encode(e,t,r=0){return Mn(t).writeFloatLE(e,r),4}}Rn.Float=Jn;class Yn extends Cn{constructor(e){super(4,e)}decode(e,t=0){return Mn(e).readFloatBE(t)}encode(e,t,r=0){return Mn(t).writeFloatBE(e,r),4}}Rn.FloatBE=Yn;class Xn extends Cn{constructor(e){super(8,e)}decode(e,t=0){return Mn(e).readDoubleLE(t)}encode(e,t,r=0){return Mn(t).writeDoubleLE(e,r),8}}Rn.Double=Xn;class Qn extends Cn{constructor(e){super(8,e)}decode(e,t=0){return Mn(e).readDoubleBE(t)}encode(e,t,r=0){return Mn(t).writeDoubleBE(e,r),8}}Rn.DoubleBE=Qn;class ei extends Cn{constructor(e,t,r){if(!(e instanceof Cn))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Nn&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof Nn)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof Nn&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof Nn&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof Nn&&this.count.encode(e.length,t,r),i}}Rn.Sequence=ei;class ti extends Cn{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Cn),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){Ln(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,o=0;for(const n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(o=n.encode(i,t,r),0>s&&(s=n.getSpan(t,r)))}i=r,r+=s}return i+o-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}Rn.Structure=ti;class ri{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}Rn.UnionDiscriminator=ri;class ni extends ri{constructor(e,t){if(!(e instanceof Nn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}Rn.UnionLayoutDiscriminator=ni;class ii extends Cn{constructor(e,t,r){let n;if(e instanceof $n||e instanceof Hn)n=new ni(new jn(e));else if(e instanceof Nn&&e.isCount())n=new ni(e);else{if(!(e instanceof ri))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof Cn))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof $n||e instanceof Hn)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof $n||e instanceof Hn,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const n=this.discriminator,i=n.decode(e,t),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(e,t+s)}else r=o.decode(e,t);return r}encode(e,t,r=0){const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new oi(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}Rn.Union=ii;class oi extends Cn{constructor(e,t,r,n){if(!(e instanceof ii))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Cn))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function si(e){return 0>e&&(e+=4294967296),e}Rn.VariantLayout=oi;class ai extends Cn{constructor(e,t,r){if(!(e instanceof $n||e instanceof Hn))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=si(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const t of this.fields)void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new ci(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new ui(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}Rn.BitStructure=ai;class ci{constructor(e,t,r){if(!(e instanceof ai))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=si(this.valueMask<<this.start),this.property=r}decode(e,t){return si(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==si(e&this.valueMask))throw new TypeError(Pn("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=si(e<<this.start);this.container._packedSetValue(si(t&~this.wordMask)|r)}}Rn.BitField=ci;class ui extends ci{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}Rn.Boolean=ui;class hi extends Cn{constructor(e,t){if(!(e instanceof Nn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Nn||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),Mn(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof Nn&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(Pn("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=Mn(e);return Mn(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof Nn&&this.length.encode(n,t,r),n}}Rn.Blob=hi;class li extends Cn{constructor(e){super(-1,e)}getSpan(e,t=0){Ln(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return Mn(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const n=On.Buffer.from(e,"utf8"),i=n.length;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");const o=Mn(t);return n.copy(o,r),o[r+i]=0,i+1}}Rn.CString=li;class fi extends Cn{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Ln(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Mn(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const n=On.Buffer.from(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(Mn(t),r),i}}Rn.UTF8=fi;class di extends Cn{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}Rn.Constant=di,Rn.greedy=(e,t)=>new Un(e,t);var pi=Rn.offset=(e,t,r)=>new jn(e,t,r),gi=Rn.u8=e=>new $n(1,e),yi=Rn.u16=e=>new $n(2,e);Rn.u24=e=>new $n(3,e);var mi=Rn.u32=e=>new $n(4,e);Rn.u40=e=>new $n(5,e),Rn.u48=e=>new $n(6,e);var wi=Rn.nu64=e=>new Wn(e);Rn.u16be=e=>new Hn(2,e),Rn.u24be=e=>new Hn(3,e),Rn.u32be=e=>new Hn(4,e),Rn.u40be=e=>new Hn(5,e),Rn.u48be=e=>new Hn(6,e),Rn.nu64be=e=>new Vn(e),Rn.s8=e=>new zn(1,e),Rn.s16=e=>new zn(2,e),Rn.s24=e=>new zn(3,e),Rn.s32=e=>new zn(4,e),Rn.s40=e=>new zn(5,e),Rn.s48=e=>new zn(6,e);var bi=Rn.ns64=e=>new Zn(e);Rn.s16be=e=>new Dn(2,e),Rn.s24be=e=>new Dn(3,e),Rn.s32be=e=>new Dn(4,e),Rn.s40be=e=>new Dn(5,e),Rn.s48be=e=>new Dn(6,e),Rn.ns64be=e=>new Gn(e),Rn.f32=e=>new Jn(e),Rn.f32be=e=>new Yn(e),Rn.f64=e=>new Xn(e),Rn.f64be=e=>new Qn(e);var vi=Rn.struct=(e,t,r)=>new ti(e,t,r);Rn.bits=(e,t,r)=>new ai(e,t,r);var _i=Rn.seq=(e,t,r)=>new ei(e,t,r);Rn.union=(e,t,r)=>new ii(e,t,r),Rn.unionLayoutDiscriminator=(e,t)=>new ni(e,t);var Ei=Rn.blob=(e,t)=>new hi(e,t);Rn.cstr=e=>new li(e),Rn.utf8=(e,t)=>new fi(e,t),Rn.constant=(e,t)=>new di(e,t);var Si={};Object.defineProperty(Si,"__esModule",{value:!0});var Ai=Si.toBigIntLE=function(e){{const t=C.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}};Si.toBigIntBE=function(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}};var xi,ki=Si.toBufferLE=function(e,t){{const r=e.toString(16),n=C.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}};Si.toBufferBE=function(e,t){{const r=e.toString(16);return C.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}};class Bi extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function Ii(e){return"object"==typeof e&&null!=e}function Ti(e){return Ii(e)&&!Array.isArray(e)}function Ri(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Oi(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ri(n)}\``}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*Li(e,t,r,n){(function(e){return Ii(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=Oi(i,t,r,n);e&&(yield e)}}function*Mi(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i,mask:s};o&&(e=t.coercer(e,a));let c="valid";for(const n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[u,h,l]of t.entries(e,a)){const t=Mi(h,l,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,h],coerce:o,mask:s,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(h=r[1],void 0===u?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):Ii(e)&&(void 0!==h||u in e)&&(e[u]=h))}if("not_valid"!==c)for(const n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class Ci{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>Li(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>Li(i(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,r){const n=Ui(e,t,{message:r});if(n[0])throw n[0]}(e,this,t)}create(e,t){return Pi(e,this,t)}is(e){return Ni(e,this)}mask(e,t){return function(e,t,r){const n=Ui(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return Ui(e,this,t)}}function Pi(e,t,r){const n=Ui(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Ni(e,t){return!Ui(e,t)[0]}function Ui(e,t,r={}){const n=Mi(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){const e=new Bi(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])}));return[e,void 0]}return[void 0,i[1]]}function ji(e,t){return new Ci({type:e,schema:null,validator:t})}function $i(e){return new Ci({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Ri(e)}`})}function Hi(){return ji("boolean",(e=>"boolean"==typeof e))}function zi(e){return ji("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${Ri(t)}`))}function Di(e){const t=Ri(e),r=typeof e;return new Ci({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${Ri(r)}`})}function Fi(e){return new Ci({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function qi(){return ji("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Ri(e)}`))}function Ki(e){return new Ci({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function Wi(e,t){return new Ci({type:"record",schema:null,*entries(r){if(Ii(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>Ti(e)||`Expected an object, but received: ${Ri(e)}`,coercer:e=>Ti(e)?{...e}:e})}function Vi(){return ji("string",(e=>"string"==typeof e||`Expected a string, but received: ${Ri(e)}`))}function Zi(e){const t=ji("never",(()=>!1));return new Ci({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${Ri(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function Gi(e){const t=Object.keys(e);return new Ci({type:"type",schema:e,*entries(r){if(Ii(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>Ti(e)||`Expected an object, but received: ${Ri(e)}`,coercer:e=>Ti(e)?{...e}:e})}function Ji(e){const t=e.map((e=>e.type)).join(" | ");return new Ci({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=Mi(r,t,n),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ri(r)}`,...i]}})}function Yi(){return ji("unknown",(()=>!0))}function Xi(e,t,r){return new Ci({...e,coercer:(n,i)=>Ni(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var Qi=new Uint8Array(16);function eo(){if(!xi&&!(xi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xi(Qi)}var to=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ro(e){return"string"==typeof e&&to.test(e)}for(var no,io,oo=[],so=0;so<256;++so)oo.push((so+256).toString(16).substr(1));function ao(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(oo[e[t+0]]+oo[e[t+1]]+oo[e[t+2]]+oo[e[t+3]]+"-"+oo[e[t+4]]+oo[e[t+5]]+"-"+oo[e[t+6]]+oo[e[t+7]]+"-"+oo[e[t+8]]+oo[e[t+9]]+"-"+oo[e[t+10]]+oo[e[t+11]]+oo[e[t+12]]+oo[e[t+13]]+oo[e[t+14]]+oo[e[t+15]]).toLowerCase();if(!ro(r))throw TypeError("Stringified UUID is invalid");return r}var co=0,uo=0;function ho(e){if(!ro(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function lo(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=ho(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return ao(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function fo(e){return 14+(e+64>>>9<<4)+1}function po(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function go(e,t,r,n,i,o){return po((s=po(po(t,e),po(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function yo(e,t,r,n,i,o,s){return go(t&r|~t&n,e,t,i,o,s)}function mo(e,t,r,n,i,o,s){return go(t&n|r&~n,e,t,i,o,s)}function wo(e,t,r,n,i,o,s){return go(t^r^n,e,t,i,o,s)}function bo(e,t,r,n,i,o,s){return go(r^(t|~n),e,t,i,o,s)}var vo=lo("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[fo(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,c=n,u=i,h=o;r=yo(r,n,i,o,e[s],7,-680876936),o=yo(o,r,n,i,e[s+1],12,-389564586),i=yo(i,o,r,n,e[s+2],17,606105819),n=yo(n,i,o,r,e[s+3],22,-1044525330),r=yo(r,n,i,o,e[s+4],7,-176418897),o=yo(o,r,n,i,e[s+5],12,1200080426),i=yo(i,o,r,n,e[s+6],17,-1473231341),n=yo(n,i,o,r,e[s+7],22,-45705983),r=yo(r,n,i,o,e[s+8],7,1770035416),o=yo(o,r,n,i,e[s+9],12,-1958414417),i=yo(i,o,r,n,e[s+10],17,-42063),n=yo(n,i,o,r,e[s+11],22,-1990404162),r=yo(r,n,i,o,e[s+12],7,1804603682),o=yo(o,r,n,i,e[s+13],12,-40341101),i=yo(i,o,r,n,e[s+14],17,-1502002290),r=mo(r,n=yo(n,i,o,r,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=mo(o,r,n,i,e[s+6],9,-1069501632),i=mo(i,o,r,n,e[s+11],14,643717713),n=mo(n,i,o,r,e[s],20,-373897302),r=mo(r,n,i,o,e[s+5],5,-701558691),o=mo(o,r,n,i,e[s+10],9,38016083),i=mo(i,o,r,n,e[s+15],14,-660478335),n=mo(n,i,o,r,e[s+4],20,-405537848),r=mo(r,n,i,o,e[s+9],5,568446438),o=mo(o,r,n,i,e[s+14],9,-1019803690),i=mo(i,o,r,n,e[s+3],14,-187363961),n=mo(n,i,o,r,e[s+8],20,1163531501),r=mo(r,n,i,o,e[s+13],5,-1444681467),o=mo(o,r,n,i,e[s+2],9,-51403784),i=mo(i,o,r,n,e[s+7],14,1735328473),r=wo(r,n=mo(n,i,o,r,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=wo(o,r,n,i,e[s+8],11,-2022574463),i=wo(i,o,r,n,e[s+11],16,1839030562),n=wo(n,i,o,r,e[s+14],23,-35309556),r=wo(r,n,i,o,e[s+1],4,-1530992060),o=wo(o,r,n,i,e[s+4],11,1272893353),i=wo(i,o,r,n,e[s+7],16,-155497632),n=wo(n,i,o,r,e[s+10],23,-1094730640),r=wo(r,n,i,o,e[s+13],4,681279174),o=wo(o,r,n,i,e[s],11,-358537222),i=wo(i,o,r,n,e[s+3],16,-722521979),n=wo(n,i,o,r,e[s+6],23,76029189),r=wo(r,n,i,o,e[s+9],4,-640364487),o=wo(o,r,n,i,e[s+12],11,-421815835),i=wo(i,o,r,n,e[s+15],16,530742520),r=bo(r,n=wo(n,i,o,r,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=bo(o,r,n,i,e[s+7],10,1126891415),i=bo(i,o,r,n,e[s+14],15,-1416354905),n=bo(n,i,o,r,e[s+5],21,-57434055),r=bo(r,n,i,o,e[s+12],6,1700485571),o=bo(o,r,n,i,e[s+3],10,-1894986606),i=bo(i,o,r,n,e[s+10],15,-1051523),n=bo(n,i,o,r,e[s+1],21,-2054922799),r=bo(r,n,i,o,e[s+8],6,1873313359),o=bo(o,r,n,i,e[s+15],10,-30611744),i=bo(i,o,r,n,e[s+6],15,-1560198380),n=bo(n,i,o,r,e[s+13],21,1309151649),r=bo(r,n,i,o,e[s+4],6,-145523070),o=bo(o,r,n,i,e[s+11],10,-1120210379),i=bo(i,o,r,n,e[s+2],15,718787259),n=bo(n,i,o,r,e[s+9],21,-343485551),r=po(r,a),n=po(n,c),i=po(i,u),o=po(o,h)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(fo(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),_o=vo;function Eo(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function So(e,t){return e<<t|e>>>32-t}var Ao=lo("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),h=0;h<16;++h)u[h]=e[64*c+4*h]<<24|e[64*c+4*h+1]<<16|e[64*c+4*h+2]<<8|e[64*c+4*h+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<s;++l){for(var f=new Uint32Array(80),d=0;d<16;++d)f[d]=a[l][d];for(var p=16;p<80;++p)f[p]=So(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var g=r[0],y=r[1],m=r[2],w=r[3],b=r[4],v=0;v<80;++v){var _=Math.floor(v/20),E=So(g,5)+Eo(_,y,m,w)+b+t[_]+f[v]>>>0;b=w,w=m,m=So(y,30)>>>0,y=g,g=E}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),xo=Ao;var ko=Object.freeze({__proto__:null,v1:function(e,t,r){var n=t&&r||0,i=t||new Array(16),o=(e=e||{}).node||no,s=void 0!==e.clockseq?e.clockseq:io;if(null==o||null==s){var a=e.random||(e.rng||eo)();null==o&&(o=no=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=io=16383&(a[6]<<8|a[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:uo+1,h=c-co+(u-uo)/1e4;if(h<0&&void 0===e.clockseq&&(s=s+1&16383),(h<0||c>co)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");co=c,uo=u,io=s;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var f=c/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var d=0;d<6;++d)i[n+d]=o[d];return t||ao(i)},v3:_o,v4:function(e,t,r){var n=(e=e||{}).random||(e.rng||eo)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return ao(n)},v5:xo,NIL:"00000000-0000-0000-0000-000000000000",version:function(e){if(!ro(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)},validate:ro,stringify:ao,parse:ho}),Bo=Nr(ko);const Io=Bo.v4;var To=function(e,t,r,n){if("string"!=typeof e)throw new TypeError(e+" must be a string");const i="number"==typeof(n=n||{}).version?n.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const o={method:e};if(2===i&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(void 0===r){const e="function"==typeof n.generator?n.generator:function(){return Io()};o.id=e(o,n)}else 2===i&&null===r?n.notificationIdNull&&(o.id=null):o.id=r;return o};const Ro=Bo.v4,Oo=To,Lo=function(e,t){if(!(this instanceof Lo))return new Lo(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return Ro()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};var Mo=Lo;Lo.prototype.request=function(e,t,r,n){const i=this;let o=null;const s=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&"object"==typeof e&&"function"==typeof t)n=t,o=e;else{"function"==typeof r&&(n=r,r=void 0);const i="function"==typeof n;try{o=Oo(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(i)return n(e);throw e}if(!i)return o}let a;try{a=JSON.stringify(o,this.options.replacer)}catch(e){return n(e)}return this.callServer(a,(function(e,t){i._parseResponse(e,t,n)})),o},Lo.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)};var Co={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,o),!0;case 6:return h.fn.call(h.context,t,n,i,o,s),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var f,d=h.length;for(u=0;u<d;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,n);break;case 4:h[u].fn.call(h[u].context,t,n,i);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(Co);var Po=Co.exports,No=class extends Po{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};var Uo=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},jo=class extends Po{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},a,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=a||(()=>++this.rpc_id),this.dataPack=c||new Uo,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise(((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const s=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:s};this.socket.send(this.dataPack.encode(a),n,(e=>{if(e)return o(e);this.queue[s]={promise:[i,o]},r&&(this.queue[s].timeout=setTimeout((()=>{delete this.queue[s],o(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=C.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}};const $o=[],Ho=BigInt(0),zo=BigInt(1),Do=BigInt(2),Fo=BigInt(7),qo=BigInt(256),Ko=BigInt(113);for(let e=0,t=zo,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5];let e=Ho;for(let r=0;r<7;r++)t=(t<<zo^(t>>Fo)*Ko)%qo,t&Do&&(e^=zo<<(zo<<BigInt(r))-zo);$o.push(e)}class Wo extends Je{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Fe(e.outputLen),Fe(e.blockLen)}(e);const r=Ge(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ke(this),this.iHash.update(e),this}digestInto(e){Ke(this),qe(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Vo=(e,t,r)=>new Wo(e,t).update(r).digest();
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function Zo(e){void 0!==e.lowS&&mt("lowS",e.lowS),void 0!==e.prehash&&mt("prehash",e.prehash)}Vo.create=(e,t)=>new Wo(e,t);const{bytesToNumberBE:Go,hexToBytes:Jo}=Vt,Yo={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:r}=Yo;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=vt(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?vt(i.length/2|128):"";return`${vt(e)}${o}${i}${t}`},decode(e,t){const{Err:r}=Yo;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let o=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;const s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=Yo;if(e<Xo)throw new t("integer: negative integers are not allowed");let r=vt(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected assertion");return r},decode(e){const{Err:t}=Yo;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return Go(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Yo,i="string"==typeof e?Jo(e):e;yt(i);const{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,o),{v:u,l:h}=n.decode(2,c);if(h.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=Yo,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},Xo=BigInt(0),Qo=BigInt(1);BigInt(2);const es=BigInt(3);function ts(e){const t=function(e){const t=mr(e);Kt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=cr(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Pt(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!=typeof e){if(gt(e)&&(e=bt(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:Rt(Ct("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=tr(s,o)),jt("private key",s,Qo,o),s}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const u=Wt(((e,t)=>{const{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),h=Wt((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(o(Ct("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return yr(l,n,e,t)}_setWindowSize(e){d.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),h=r.eql(r.mul(n,a),r.mul(s,i));return u&&h}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,es),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,h=r.ZERO,f=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),h=r.mul(o,a),h=r.add(h,h),c=r.mul(e,h),u=r.mul(i,p),u=r.add(c,u),c=r.sub(d,u),u=r.add(d,u),u=r.mul(c,u),c=r.mul(g,c),h=r.mul(i,h),p=r.mul(e,p),g=r.sub(f,p),g=r.mul(e,g),g=r.add(g,h),h=r.add(f,f),f=r.add(h,f),f=r.add(f,p),f=r.mul(f,g),u=r.add(u,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,g),c=r.sub(c,f),h=r.mul(p,d),h=r.add(h,h),h=r.add(h,h),new l(c,u,h)}add(e){c(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e;let h=r.ZERO,f=r.ZERO,d=r.ZERO;const p=t.a,g=r.mul(t.b,es);let y=r.mul(n,s),m=r.mul(i,a),w=r.mul(o,u),b=r.add(n,i),v=r.add(s,a);b=r.mul(b,v),v=r.add(y,m),b=r.sub(b,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(y,w),v=r.sub(v,_),_=r.add(i,o),h=r.add(a,u),_=r.mul(_,h),h=r.add(m,w),_=r.sub(_,h),d=r.mul(p,v),h=r.mul(g,w),d=r.add(h,d),h=r.sub(m,d),d=r.add(m,d),f=r.mul(h,d),m=r.add(y,y),m=r.add(m,y),w=r.mul(p,w),v=r.mul(g,v),m=r.add(m,w),w=r.sub(y,w),w=r.mul(p,w),v=r.add(v,w),y=r.mul(m,v),f=r.add(f,y),y=r.mul(_,v),h=r.mul(b,h),h=r.sub(h,y),y=r.mul(b,m),d=r.mul(_,d),d=r.add(d,y),new l(h,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return d.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){jt("scalar",e,Xo,t.n);const n=l.ZERO;if(e===Xo)return n;if(e===Qo)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:a,k2:c}=i.splitScalar(e),u=n,h=n,f=this;for(;s>Xo||c>Xo;)s&Qo&&(u=u.add(f)),c&Qo&&(h=h.add(f)),f=f.double(),s>>=Qo,c>>=Qo;return o&&(u=u.negate()),a&&(h=h.negate()),h=new l(r.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){const{endo:n,n:i}=t;let o,s;if(jt("scalar",e,Qo,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:h}=this.wNAF(i),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(t,u),f=d.constTimeNegate(a,f),f=new l(r.mul(f.px,n.beta),f.py,f.pz),o=u.add(f),s=h.add(p)}else{const{p:t,f:r}=this.wNAF(e);o=t,s=r}return l.normalizeZ([o,s])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==Xo&&t!==Qo&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===Qo)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===Qo?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return mt("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return mt("isCompressed",e),bt(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const f=t.nBitLength,d=gr(l,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return Ut(e,Qo,t.n)}}}function rs(e){const t=function(e){const t=mr(e);return Kt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return tr(e,n)}function a(e){return ir(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:l}=ts({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=Pt;return mt("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=Rt(s);if(!Ut(e,Qo,r.ORDER))throw new Error("Point is not on curve");const t=h(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((i&Qo)===Qo)&&(i=r.neg(i)),{x:e,y:i}}}}),f=e=>bt(Lt(e,t.nByteLength));function d(e){return e>n>>Qo}const p=(e,t,r)=>Rt(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Ct("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Yo.toSig(Ct("DER",e));return new g(t,r)}assertValidity(){jt("r",this.r,Qo,n),jt("s",this.s,Qo,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,u=b(Ct("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?n+t.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&o?"03":"02",d=c.fromHex(l+f(h)),p=a(h),g=s(-u*p),y=s(i*p),m=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Tt(this.toDERHex())}toDERHex(){return Yo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Tt(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=hr(t.n);return function(e,t,r=!1){const n=e.length,i=ur(t),o=hr(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=tr(r?Rt(e):Ot(e),t-Gt)+Gt;return r?Mt(s,i):Lt(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e){const t=gt(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof c}const w=t.bits2int||function(e){const r=Rt(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return s(w(e))},v=Ht(t.nBitLength);function _(e){return jt(`num < 2^${t.nBitLength}`,e,Xo,v),Lt(e,t.nByteLength)}function E(e,n,i=S){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=t;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),e=Ct("msgHash",e),Zo(i),p&&(e=Ct("prehashed msgHash",o(e)));const m=b(e),v=u(n),E=[_(v),_(m)];if(null!=y&&!1!==y){const e=!0===y?h(r.BYTES):y;E.push(Ct("extraEntropy",e))}const A=Pt(...E),x=m;return{seed:A,k2sig:function(e){const t=w(e);if(!l(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=s(n.x);if(i===Xo)return;const o=s(r*s(x+i*v));if(o===Xo)return;let u=(n.x===i?0:2)|Number(n.y&Qo),h=o;return f&&d(o)&&(h=function(e){return d(e)?s(-e):e}(o),u^=1),new g(i,h,u)}}}const S={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,r,n=S){const{seed:i,k2sig:o}=E(e,r,n),s=t;return Ft(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,r,n,i=A){const o=e;if(r=Ct("msgHash",r),n=Ct("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");Zo(i);const{lowS:u,prehash:h}=i;let l,f;try{if("string"==typeof o||gt(o))try{l=g.fromDER(o)}catch(e){if(!(e instanceof Yo.Err))throw e;l=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;l=new g(e,t)}}f=c.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;h&&(r=t.hash(r));const{r:d,s:p}=l,y=b(r),m=a(p),w=s(y*m),v=s(d*m),_=c.BASE.multiplyAndAddUnsafe(f,w,v)?.toAffine();return!!_&&s(_.x)===d},ProjectivePoint:c,Signature:g,utils:y}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ns(e){return{hash:e,hmac:(t,...r)=>Vo(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];qe(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:Xe}}BigInt(4);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const is=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),os=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ss=BigInt(1),as=BigInt(2),cs=(e,t)=>(e+t/as)/t;const us=cr(is,void 0,void 0,{sqrt:function(e){const t=is,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=nr(h,r,t)*h%t,f=nr(l,r,t)*h%t,d=nr(f,as,t)*u%t,p=nr(d,i,t)*d%t,g=nr(p,o,t)*p%t,y=nr(g,a,t)*g%t,m=nr(y,c,t)*y%t,w=nr(m,a,t)*g%t,b=nr(w,r,t)*h%t,v=nr(b,s,t)*p%t,_=nr(v,n,t)*u%t,E=nr(_,as,t);if(!us.eql(us.sqr(E),e))throw new Error("Cannot find square root");return E}}),hs=function(e,t){const r=t=>rs({...e,...ns(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:us,n:os,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=os,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ss*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=cs(o*e,t),c=cs(-n*e,t);let u=tr(e-a*r-c*i,t),h=tr(-a*n-c*o,t);const l=u>s,f=h>s;if(l&&(u=t-u),f&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:h}}}},Zr);function ls(e){try{return Cr.ExtendedPoint.fromHex(e),!0}catch{return!1}}BigInt(0),hs.ProjectivePoint,Cr.utils.randomPrivateKey;const fs=(e,t)=>Cr.sign(e,t.slice(0,32)),ds=Cr.verify,ps=e=>C.isBuffer(e)?e:e instanceof Uint8Array?C.from(e.buffer,e.byteOffset,e.byteLength):C.from(e);class gs{constructor(e){Object.assign(this,e)}encode(){return C.from(kn(ys,this))}static decode(e){return Tn(ys,this,e)}static decodeUnchecked(e){return dn(ys,this,e)}}const ys=new Map;var ms;const ws=32;let bs=1;class vs extends gs{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=Fr.decode(e);if(t.length!=ws)throw new Error("Invalid public key input");this._bn=new $r(t)}else this._bn=new $r(e);if(this._bn.byteLength()>ws)throw new Error("Invalid public key input")}}static unique(){const e=new vs(bs);return bs+=1,new vs(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Fr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(C);if(e.length===ws)return e;const t=C.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=C.concat([e.toBuffer(),C.from(t),r.toBuffer()]),i=Zr(n);return new vs(i)}static createProgramAddressSync(e,t){let r=C.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=C.concat([r,ps(e)])})),r=C.concat([r,t.toBuffer(),C.from("ProgramDerivedAddress")]);const n=Zr(r);if(ls(n))throw new Error("Invalid seeds, address must fall off the curve");return new vs(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const i=e.concat(C.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return ls(new vs(e).toBytes())}}ms=vs,vs.default=new ms("11111111111111111111111111111111"),ys.set(vs,{kind:"struct",fields:[["_bn","u256"]]}),new vs("BPFLoader1111111111111111111111111111111111");const _s=1232;class Es extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Es.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ss extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ss.prototype,"name",{value:"TransactionExpiredTimeoutError"});class As extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(As.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class xs{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const ks=(e="publicKey")=>Ei(32,e),Bs=(e="signature")=>Ei(64,e),Is=(e="string")=>{const t=vi([mi("length"),mi("lengthPadding"),Ei(pi(mi(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(e,t)=>r(e,t).chars.toString(),i.encode=(e,t,r)=>{const i={chars:C.from(e,"utf8")};return n(i,t,r)},i.alloc=e=>mi().span+mi().span+C.from(e,"utf8").length,i};function Ts(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function Rs(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function Os(e,t){if(!e)throw new Error(t||"Assertion failed")}class Ls{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new Ls(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Os(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Os(t.length>0,"Expected at least one writable signer key");const[e]=t[0];Os(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const s=[...t.map((([e])=>new vs(e))),...r.map((([e])=>new vs(e))),...n.map((([e])=>new vs(e))),...i.map((([e])=>new vs(e)))];return[o,s]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const t=new vs(i),o=e.findIndex((e=>e.equals(t)));o>=0&&(Os(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const Ms="Reached end of buffer unexpectedly";function Cs(e){if(0===e.length)throw new Error(Ms);return e.shift()}function Ps(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Ms);return e.splice(...t)}class Ns{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new vs(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Fr.decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new xs(this.staticAccountKeys)}static compile(e){const t=Ls.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new xs(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:Fr.encode(e.data)})));return new Ns({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];Rs(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(Fr.decode(e.data));let i=[];Rs(i,t.length);let o=[];return Rs(o,n.length),{programIdIndex:r,keyIndicesCount:C.from(i),keyIndices:t,dataLength:C.from(o),data:n}}));let n=[];Rs(n,r.length);let i=C.alloc(_s);C.from(n).copy(i);let o=n.length;r.forEach((e=>{const t=vi([gi("programIdIndex"),Ei(e.keyIndicesCount.length,"keyIndicesCount"),_i(gi("keyIndex"),e.keyIndices.length,"keyIndices"),Ei(e.dataLength.length,"dataLength"),_i(gi("userdatum"),e.data.length,"data")]).encode(e,i,o);o+=t})),i=i.slice(0,o);const s=vi([Ei(1,"numRequiredSignatures"),Ei(1,"numReadonlySignedAccounts"),Ei(1,"numReadonlyUnsignedAccounts"),Ei(t.length,"keyCount"),_i(ks("key"),e,"keys"),ks("recentBlockhash")]),a={numRequiredSignatures:C.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:C.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:C.from([this.header.numReadonlyUnsignedAccounts]),keyCount:C.from(t),keys:this.accountKeys.map((e=>ps(e.toBytes()))),recentBlockhash:Fr.decode(this.recentBlockhash)};let c=C.alloc(2048);const u=s.encode(a,c);return i.copy(c,u),c.slice(0,u+i.length)}static from(e){let t=[...e];const r=Cs(t);if(r!==(127&r))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=Cs(t),i=Cs(t),o=Ts(t);let s=[];for(let e=0;e<o;e++){const e=Ps(t,0,ws);s.push(new vs(C.from(e)))}const a=Ps(t,0,ws),c=Ts(t);let u=[];for(let e=0;e<c;e++){const e=Cs(t),r=Ps(t,0,Ts(t)),n=Ps(t,0,Ts(t)),i=Fr.encode(C.from(n));u.push({programIdIndex:e,accounts:r,data:i})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:Fr.encode(C.from(a)),accountKeys:s,instructions:u};return new Ns(h)}}class Us{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new xs(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const t=e-r,n=this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0);return t<n}if(e>=this.header.numRequiredSignatures){return e-t<r-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=Ls.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:o}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...o)}}const[o,s]=t.getMessageComponents(),a=new xs(s,n).compileInstructions(e.instructions);return new Us({header:o,staticAccountKeys:s,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();Rs(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Rs(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Rs(i,this.addressTableLookups.length);const o=vi([gi("prefix"),vi([gi("numRequiredSignatures"),gi("numReadonlySignedAccounts"),gi("numReadonlyUnsignedAccounts")],"header"),Ei(e.length,"staticAccountKeysLength"),_i(ks(),this.staticAccountKeys.length,"staticAccountKeys"),ks("recentBlockhash"),Ei(r.length,"instructionsLength"),Ei(t.length,"serializedInstructions"),Ei(i.length,"addressTableLookupsLength"),Ei(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(_s),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:Fr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(_s);for(const r of this.compiledInstructions){const n=Array();Rs(n,r.accountKeyIndexes.length);const i=Array();Rs(i,r.data.length);e+=vi([gi("programIdIndex"),Ei(n.length,"encodedAccountKeyIndexesLength"),_i(gi(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ei(i.length,"encodedDataLength"),Ei(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(_s);for(const r of this.addressTableLookups){const n=Array();Rs(n,r.writableIndexes.length);const i=Array();Rs(i,r.readonlyIndexes.length);e+=vi([ks("accountKey"),Ei(n.length,"encodedWritableIndexesLength"),_i(gi(),r.writableIndexes.length,"writableIndexes"),Ei(i.length,"encodedReadonlyIndexesLength"),_i(gi(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Cs(t),n=127&r;Os(r!==n,"Expected versioned message but received legacy message");Os(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:Cs(t),numReadonlySignedAccounts:Cs(t),numReadonlyUnsignedAccounts:Cs(t)},o=[],s=Ts(t);for(let e=0;e<s;e++)o.push(new vs(Ps(t,0,ws)));const a=Fr.encode(Ps(t,0,ws)),c=Ts(t),u=[];for(let e=0;e<c;e++){const e=Cs(t),r=Ps(t,0,Ts(t)),n=Ts(t),i=new Uint8Array(Ps(t,0,n));u.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const h=Ts(t),l=[];for(let e=0;e<h;e++){const e=new vs(Ps(t,0,ws)),r=Ps(t,0,Ts(t)),n=Ps(t,0,Ts(t));l.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new Us({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:u,addressTableLookups:l})}}const js={deserializeMessageVersion(e){const t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{const t=js.deserializeMessageVersion(e);if("legacy"===t)return Ns.from(e);if(0===t)return Us.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let $s=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const Hs=C.alloc(64).fill(0);class zs{constructor(e){this.keys=void 0,this.programId=void 0,this.data=C.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class Ds{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new zs(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new vs(e),isSigner:!1,isWritable:!1})}));const o=[];i.forEach((e=>{const t=e.pubkey.toString(),r=o.findIndex((e=>e.pubkey.toString()===t));r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)})),o.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const s=o.findIndex((e=>e.pubkey.equals(r)));if(s>-1){const[e]=o.splice(s,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=o.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,u=0;const h=[],l=[];o.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),a+=1,r||(c+=1)):(l.push(e.toString()),r||(u+=1))}));const f=h.concat(l),d=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:f.indexOf(r.toString()),accounts:e.keys.map((e=>f.indexOf(e.pubkey.toString()))),data:Fr.encode(t)}}));return d.forEach((e=>{Os(e.programIdIndex>=0),e.accounts.forEach((e=>Os(e>=0)))})),new Ns({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:d})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every(((e,r)=>t[r].equals(e.publicKey))))return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=fs(r,e.secretKey);this._addSignature(e.publicKey,ps(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Os(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=C.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):ds(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];Rs(r,t.length);const n=r.length+64*t.length+e.length,i=C.alloc(n);return Os(t.length<256),C.from(r).copy(i,0),t.forEach((({signature:e},t)=>{null!==e&&(Os(64===e.length,"signature has invalid length"),C.from(e).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),Os(i.length<=_s,`Transaction too large: ${i.length} > 1232`),i}get keys(){return Os(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return Os(1===this.instructions.length),this.instructions[0].programId}get data(){return Os(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=Ts(t);let n=[];for(let e=0;e<r;e++){const e=Ps(t,0,64);n.push(Fr.encode(C.from(e)))}return Ds.populate(Ns.from(t),n)}static populate(e,t=[]){const r=new Ds;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==Fr.encode(Hs)?null:Fr.decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new zs({keys:n,programId:e.accountKeys[t.programIdIndex],data:Fr.decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class Fs{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)Os(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Rs(t,this.signatures.length);const r=vi([Ei(t.length,"encodedSignaturesLength"),_i(Bs(),this.signatures.length,"signatures"),Ei(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=Ts(t);for(let e=0;e<n;e++)r.push(new Uint8Array(Ps(t,0,64)));const i=js.deserialize(new Uint8Array(t));return new Fs(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));Os(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=fs(t,n.secretKey)}}addSignature(e,t){Os(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));Os(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}new vs("SysvarC1ock11111111111111111111111111111111"),new vs("SysvarEpochSchedu1e111111111111111111111111"),new vs("Sysvar1nstructions1111111111111111111111111"),new vs("SysvarRecentB1ockHashes11111111111111111111"),new vs("SysvarRent111111111111111111111111111111111"),new vs("SysvarRewards111111111111111111111111111111"),new vs("SysvarS1otHashes111111111111111111111111111"),new vs("SysvarS1otHistory11111111111111111111111111"),new vs("SysvarStakeHistory1111111111111111111111111");class qs extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let s;switch(e){case"send":s=`Transaction ${t} resulted in an error. \n${r}. `+i+o;break;case"simulate":s=`Simulation failed. \nMessage: ${r}. \n`+i+o;break;default:s=`Unknown action '${e}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}class Ks extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Ws(e){return new Promise((t=>setTimeout(t,e)))}const Vs=wi("lamportsPerSignature"),Zs=vi([mi("version"),mi("state"),ks("authorizedPubkey"),ks("nonce"),vi([Vs],"feeCalculator")]);Zs.span;class Gs{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Zs.decode(ps(e),0);return new Gs({authorizedPubkey:new vs(t.authorizedPubkey),nonce:new vs(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Js=(Ys=8,e=>{const t=Ei(Ys,e),{encode:r,decode:n}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),i=t;return i.decode=(e,t)=>{const r=n(e,t);return Ai(C.from(r))},i.encode=(e,t,n)=>{const i=ki(e,Ys);return r(i,t,n)},i});var Ys,Xs,Qs;function ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ta(){if(Qs)return Xs;Qs=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var o,s,a,c,u,h,l;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(l=e.call(n))){for(a="[",s=n.length-1,o=0;o<s;o++)a+=r(n[o],!0)+",";return s>-1&&(a+=r(n[o],!0)),a+"]"}if("[object Object]"===l){for(s=(c=t(n).sort()).length,a="",o=0;o<s;)void 0!==(h=r(n[u=c[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),o++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Xs=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}Object.freeze({Create:{index:0,layout:vi([mi("instruction"),bi("lamports"),bi("space"),ks("programId")])},Assign:{index:1,layout:vi([mi("instruction"),ks("programId")])},Transfer:{index:2,layout:vi([mi("instruction"),Js("lamports")])},CreateWithSeed:{index:3,layout:vi([mi("instruction"),ks("base"),Is("seed"),bi("lamports"),bi("space"),ks("programId")])},AdvanceNonceAccount:{index:4,layout:vi([mi("instruction")])},WithdrawNonceAccount:{index:5,layout:vi([mi("instruction"),bi("lamports")])},InitializeNonceAccount:{index:6,layout:vi([mi("instruction"),ks("authorized")])},AuthorizeNonceAccount:{index:7,layout:vi([mi("instruction"),ks("authorized")])},Allocate:{index:8,layout:vi([mi("instruction"),bi("space")])},AllocateWithSeed:{index:9,layout:vi([mi("instruction"),ks("base"),Is("seed"),bi("space"),ks("programId")])},AssignWithSeed:{index:10,layout:vi([mi("instruction"),ks("base"),Is("seed"),ks("programId")])},TransferWithSeed:{index:11,layout:vi([mi("instruction"),Js("lamports"),Is("seed"),ks("programId")])},UpgradeNonceAccount:{index:12,layout:vi([mi("instruction")])}}),new vs("11111111111111111111111111111111"),new vs("BPFLoader2111111111111111111111111111111111");var ra=ea(ta());function na(e){let t=0;for(;e>1;)e/=2,t++;return t}class ia{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=na(function(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32))}(e+32+1))-na(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+na(32)):this.slotsPerEpoch}}var oa=globalThis.fetch;class sa extends jo{constructor(e,t,r){super((e=>{const r=function(e,t){return new No(e,t)}(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r}),e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class aa{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(ca,e),r=e.length-56;Os(r>=0,"lookup table is invalid"),Os(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=vi([_i(ks(),n,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new vs(t.authority[0]):void 0,addresses:i.map((e=>new vs(e)))}}}const ca={index:1,layout:vi([mi("typeIndex"),Js("deactivationSlot"),wi("lastExtendedSlot"),gi("lastExtendedStartIndex"),gi(),_i(ks(),pi(gi(),-1),"authority")])},ua=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;const ha=Xi(zi(vs),Vi(),(e=>new vs(e))),la=Zi([Vi(),Di("base64")]),fa=Xi(zi(C),la,(e=>C.from(e[0],"base64")));function da(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function pa(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function ga(e){return Ji([Gi({jsonrpc:Di("2.0"),id:Vi(),result:e}),Gi({jsonrpc:Di("2.0"),id:Vi(),error:Gi({code:Yi(),message:Vi(),data:Ki(ji("any",(()=>!0)))})})])}const ya=ga(Yi());function ma(e){return Xi(ga(e),ya,(t=>"error"in t?t:{...t,result:Pi(t.result,e)}))}function wa(e){return ma(Gi({context:Gi({slot:qi()}),value:e}))}function ba(e){return Gi({context:Gi({slot:qi()}),value:e})}function va(e,t){return 0===e?new Us({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new vs(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Fr.decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new Ns(t)}const _a=Gi({foundation:qi(),foundationTerm:qi(),initial:qi(),taper:qi(),terminal:qi()}),Ea=ma($i(Fi(Gi({epoch:qi(),effectiveSlot:qi(),amount:qi(),postBalance:qi(),commission:Ki(Fi(qi()))})))),Sa=$i(Gi({slot:qi(),prioritizationFee:qi()})),Aa=Gi({total:qi(),validator:qi(),foundation:qi(),epoch:qi()}),xa=Gi({epoch:qi(),slotIndex:qi(),slotsInEpoch:qi(),absoluteSlot:qi(),blockHeight:Ki(qi()),transactionCount:Ki(qi())}),ka=Gi({slotsPerEpoch:qi(),leaderScheduleSlotOffset:qi(),warmup:Hi(),firstNormalEpoch:qi(),firstNormalSlot:qi()}),Ba=Wi(Vi(),$i(qi())),Ia=Fi(Ji([Gi({}),Vi()])),Ta=Gi({err:Ia}),Ra=Di("receivedSignature"),Oa=Gi({"solana-core":Vi(),"feature-set":Ki(qi())}),La=Gi({program:Vi(),programId:ha,parsed:Yi()}),Ma=Gi({programId:ha,accounts:$i(ha),data:Vi()}),Ca=wa(Gi({err:Fi(Ji([Gi({}),Vi()])),logs:Fi($i(Vi())),accounts:Ki(Fi($i(Fi(Gi({executable:Hi(),owner:Vi(),lamports:qi(),data:$i(Vi()),rentEpoch:Ki(qi())}))))),unitsConsumed:Ki(qi()),returnData:Ki(Fi(Gi({programId:Vi(),data:Zi([Vi(),Di("base64")])}))),innerInstructions:Ki(Fi($i(Gi({index:qi(),instructions:$i(Ji([La,Ma]))}))))})),Pa=wa(Gi({byIdentity:Wi(Vi(),$i(qi())),range:Gi({firstSlot:qi(),lastSlot:qi()})}));const Na=ma(_a),Ua=ma(Aa),ja=ma(Sa),$a=ma(xa),Ha=ma(ka),za=ma(Ba),Da=ma(qi()),Fa=wa(Gi({total:qi(),circulating:qi(),nonCirculating:qi(),nonCirculatingAccounts:$i(ha)})),qa=Gi({amount:Vi(),uiAmount:Fi(qi()),decimals:qi(),uiAmountString:Ki(Vi())}),Ka=wa($i(Gi({address:ha,amount:Vi(),uiAmount:Fi(qi()),decimals:qi(),uiAmountString:Ki(Vi())}))),Wa=wa($i(Gi({pubkey:ha,account:Gi({executable:Hi(),owner:ha,lamports:qi(),data:fa,rentEpoch:qi()})}))),Va=Gi({program:Vi(),parsed:Yi(),space:qi()}),Za=wa($i(Gi({pubkey:ha,account:Gi({executable:Hi(),owner:ha,lamports:qi(),data:Va,rentEpoch:qi()})}))),Ga=wa($i(Gi({lamports:qi(),address:ha}))),Ja=Gi({executable:Hi(),owner:ha,lamports:qi(),data:fa,rentEpoch:qi()}),Ya=Gi({pubkey:ha,account:Ja}),Xa=Xi(Ji([zi(C),Va]),Ji([la,Va]),(e=>Array.isArray(e)?Pi(e,fa):e)),Qa=Gi({executable:Hi(),owner:ha,lamports:qi(),data:Xa,rentEpoch:qi()}),ec=Gi({pubkey:ha,account:Qa}),tc=Gi({state:Ji([Di("active"),Di("inactive"),Di("activating"),Di("deactivating")]),active:qi(),inactive:qi()}),rc=ma($i(Gi({signature:Vi(),slot:qi(),err:Ia,memo:Fi(Vi()),blockTime:Ki(Fi(qi()))}))),nc=ma($i(Gi({signature:Vi(),slot:qi(),err:Ia,memo:Fi(Vi()),blockTime:Ki(Fi(qi()))}))),ic=Gi({subscription:qi(),result:ba(Ja)}),oc=Gi({pubkey:ha,account:Ja}),sc=Gi({subscription:qi(),result:ba(oc)}),ac=Gi({parent:qi(),slot:qi(),root:qi()}),cc=Gi({subscription:qi(),result:ac}),uc=Ji([Gi({type:Ji([Di("firstShredReceived"),Di("completed"),Di("optimisticConfirmation"),Di("root")]),slot:qi(),timestamp:qi()}),Gi({type:Di("createdBank"),parent:qi(),slot:qi(),timestamp:qi()}),Gi({type:Di("frozen"),slot:qi(),timestamp:qi(),stats:Gi({numTransactionEntries:qi(),numSuccessfulTransactions:qi(),numFailedTransactions:qi(),maxTransactionsPerEntry:qi()})}),Gi({type:Di("dead"),slot:qi(),timestamp:qi(),err:Vi()})]),hc=Gi({subscription:qi(),result:uc}),lc=Gi({subscription:qi(),result:ba(Ji([Ta,Ra]))}),fc=Gi({subscription:qi(),result:qi()}),dc=Gi({pubkey:Vi(),gossip:Fi(Vi()),tpu:Fi(Vi()),rpc:Fi(Vi()),version:Fi(Vi())}),pc=Gi({votePubkey:Vi(),nodePubkey:Vi(),activatedStake:qi(),epochVoteAccount:Hi(),epochCredits:$i(Zi([qi(),qi(),qi()])),commission:qi(),lastVote:qi(),rootSlot:Fi(qi())}),gc=ma(Gi({current:$i(pc),delinquent:$i(pc)})),yc=Ji([Di("processed"),Di("confirmed"),Di("finalized")]),mc=Gi({slot:qi(),confirmations:Fi(qi()),err:Ia,confirmationStatus:Ki(yc)}),wc=wa($i(Fi(mc))),bc=ma(qi()),vc=Gi({accountKey:ha,writableIndexes:$i(qi()),readonlyIndexes:$i(qi())}),_c=Gi({signatures:$i(Vi()),message:Gi({accountKeys:$i(Vi()),header:Gi({numRequiredSignatures:qi(),numReadonlySignedAccounts:qi(),numReadonlyUnsignedAccounts:qi()}),instructions:$i(Gi({accounts:$i(qi()),data:Vi(),programIdIndex:qi()})),recentBlockhash:Vi(),addressTableLookups:Ki($i(vc))})}),Ec=Gi({pubkey:ha,signer:Hi(),writable:Hi(),source:Ki(Ji([Di("transaction"),Di("lookupTable")]))}),Sc=Gi({accountKeys:$i(Ec),signatures:$i(Vi())}),Ac=Gi({parsed:Yi(),program:Vi(),programId:ha}),xc=Gi({accounts:$i(ha),data:Vi(),programId:ha}),kc=Xi(Ji([xc,Ac]),Ji([Gi({parsed:Yi(),program:Vi(),programId:Vi()}),Gi({accounts:$i(Vi()),data:Vi(),programId:Vi()})]),(e=>Pi(e,"accounts"in e?xc:Ac))),Bc=Gi({signatures:$i(Vi()),message:Gi({accountKeys:$i(Ec),instructions:$i(kc),recentBlockhash:Vi(),addressTableLookups:Ki(Fi($i(vc)))})}),Ic=Gi({accountIndex:qi(),mint:Vi(),owner:Ki(Vi()),uiTokenAmount:qa}),Tc=Gi({writable:$i(ha),readonly:$i(ha)}),Rc=Gi({err:Ia,fee:qi(),innerInstructions:Ki(Fi($i(Gi({index:qi(),instructions:$i(Gi({accounts:$i(qi()),data:Vi(),programIdIndex:qi()}))})))),preBalances:$i(qi()),postBalances:$i(qi()),logMessages:Ki(Fi($i(Vi()))),preTokenBalances:Ki(Fi($i(Ic))),postTokenBalances:Ki(Fi($i(Ic))),loadedAddresses:Ki(Tc),computeUnitsConsumed:Ki(qi())}),Oc=Gi({err:Ia,fee:qi(),innerInstructions:Ki(Fi($i(Gi({index:qi(),instructions:$i(kc)})))),preBalances:$i(qi()),postBalances:$i(qi()),logMessages:Ki(Fi($i(Vi()))),preTokenBalances:Ki(Fi($i(Ic))),postTokenBalances:Ki(Fi($i(Ic))),loadedAddresses:Ki(Tc),computeUnitsConsumed:Ki(qi())}),Lc=Ji([Di(0),Di("legacy")]),Mc=Gi({pubkey:Vi(),lamports:qi(),postBalance:Fi(qi()),rewardType:Fi(Vi()),commission:Ki(Fi(qi()))}),Cc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),transactions:$i(Gi({transaction:_c,meta:Fi(Rc),version:Ki(Lc)})),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),Pc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),Nc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),transactions:$i(Gi({transaction:Sc,meta:Fi(Rc),version:Ki(Lc)})),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),Uc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),transactions:$i(Gi({transaction:Bc,meta:Fi(Oc),version:Ki(Lc)})),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),jc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),transactions:$i(Gi({transaction:Sc,meta:Fi(Oc),version:Ki(Lc)})),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),$c=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),rewards:Ki($i(Mc)),blockTime:Fi(qi()),blockHeight:Fi(qi())}))),Hc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),transactions:$i(Gi({transaction:_c,meta:Fi(Rc)})),rewards:Ki($i(Mc)),blockTime:Fi(qi())}))),zc=ma(Fi(Gi({blockhash:Vi(),previousBlockhash:Vi(),parentSlot:qi(),signatures:$i(Vi()),blockTime:Fi(qi())}))),Dc=ma(Fi(Gi({slot:qi(),meta:Fi(Rc),blockTime:Ki(Fi(qi())),transaction:_c,version:Ki(Lc)}))),Fc=ma(Fi(Gi({slot:qi(),transaction:Bc,meta:Fi(Oc),blockTime:Ki(Fi(qi())),version:Ki(Lc)}))),qc=wa(Gi({blockhash:Vi(),feeCalculator:Gi({lamportsPerSignature:qi()})})),Kc=wa(Gi({blockhash:Vi(),lastValidBlockHeight:qi()})),Wc=wa(Hi()),Vc=ma($i(Gi({slot:qi(),numTransactions:qi(),numSlots:qi(),samplePeriodSecs:qi()}))),Zc=wa(Fi(Gi({feeCalculator:Gi({lamportsPerSignature:qi()})}))),Gc=ma(Vi()),Jc=ma(Vi()),Yc=Gi({err:Ia,logs:$i(Vi()),signature:Vi()}),Xc=Gi({result:ba(Yc),subscription:qi()}),Qc={"solana-client":"js/1.0.0-maintenance"};class eu{constructor(e,t){let r,n,i,o,s,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=da(t),i=this._buildArgs([],r,void 0,n),o=ra(i);return e[o]=e[o]??(async()=>{try{const e=Pi(await this._rpcRequest("getBlockHeight",i),ma(qi()));if("error"in e)throw new Ks(e.error,"failed to get block height information");return e.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,s=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=r||function(e){const t=e.match(ua);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${n}${null==a?"":`:${a+1}`}${o}`}(e),this._rpcClient=function(e,t,r,n,i,o){const s=r||oa;let a;null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(e){i(e)}}));return await s(...r)});const c=new Mo((async(r,n)=>{const o={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Qc)};try{let t,r=5,c=500;for(;t=a?await a(e,o):await s(e,o),429===t.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await Ws(c),c*=2;const u=await t.text();t.ok?n(null,u):n(new Error(`${t.status} ${t.statusText}: ${u}`))}catch(e){e instanceof Error&&n(e)}}),{});return c}(e,n,i,o,s,a),this._rpcRequest=(c=this._rpcClient,(e,t)=>new Promise(((r,n)=>{c.request(e,t,((e,t)=>{e?n(e):r(t)}))}))),this._rpcBatchRequest=function(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}(this._rpcClient),this._rpcWebSocket=new sa(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgs([e.toBase58()],r,void 0,n),o=Pi(await this._rpcRequest("getBalance",i),wa(qi()));if("error"in o)throw new Ks(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=Pi(await this._rpcRequest("getBlockTime",[e]),ma(Fi(qi())));if("error"in t)throw new Ks(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=Pi(await this._rpcRequest("minimumLedgerSlot",[]),ma(qi()));if("error"in e)throw new Ks(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=Pi(await this._rpcRequest("getFirstAvailableBlock",[]),Da);if("error"in e)throw new Ks(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=Pi(await this._rpcRequest("getSupply",[t]),Fa);if("error"in r)throw new Ks(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pi(await this._rpcRequest("getTokenSupply",r),wa(qa));if("error"in n)throw new Ks(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pi(await this._rpcRequest("getTokenAccountBalance",r),wa(qa));if("error"in n)throw new Ks(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=da(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const s=this._buildArgs(o,n,"base64",i),a=Pi(await this._rpcRequest("getTokenAccountsByOwner",s),Wa);if("error"in a)throw new Ks(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=Pi(await this._rpcRequest("getTokenAccountsByOwner",i),Za);if("error"in o)throw new Ks(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=Pi(await this._rpcRequest("getLargestAccounts",r),Ga);if("error"in n)throw new Ks(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=Pi(await this._rpcRequest("getTokenLargestAccounts",r),Ka);if("error"in n)throw new Ks(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgs([e.toBase58()],r,"base64",n),o=Pi(await this._rpcRequest("getAccountInfo",i),wa(Fi(Ja)));if("error"in o)throw new Ks(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=Pi(await this._rpcRequest("getAccountInfo",i),wa(Fi(Qa)));if("error"in o)throw new Ks(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=da(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],r,"jsonParsed",n),s=Pi(await this._rpcRequest("getMultipleAccounts",o),wa($i(Fi(Qa))));if("error"in s)throw new Ks(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=da(t),i=e.map((e=>e.toBase58())),o=this._buildArgs([i],r,"base64",n),s=Pi(await this._rpcRequest("getMultipleAccounts",o),wa($i(Fi(Ja))));if("error"in s)throw new Ks(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=da(t),o=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=Pi(await this._rpcRequest("getStakeActivation",o),ma(tc));if("error"in s)throw new Ks(s.error,`failed to get Stake Activation ${e.toBase58()}`);return s.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=da(t),{encoding:i,...o}=n||{},s=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:pa(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),c=$i(Ya),u=!0===o.withContext?Pi(a,wa(c)):Pi(a,ma(c));if("error"in u)throw new Ks(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=Pi(await this._rpcRequest("getProgramAccounts",i),ma($i(ec)));if("error"in o)throw new Ks(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=Fr.decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return Os(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;const o=new Promise(((o,s)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};o({__type:$s.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)s(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,o({__type:$s.PROCESSED,response:{context:n,value:c}})}})()}catch(e){s(e)}}));return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const o=new Promise((t=>{const n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return-1}};(async()=>{let e=await n();if(!i){for(;e<=r;){if(await Ws(1e3),i)return;if(e=await n(),i)return}t({__type:$s.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let u;try{const e=await Promise.race([c,a,o]);if(e.__type!==$s.PROCESSED)throw new Es(n);u=e.response}finally{i=!0,s()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s=!1;const a=new Promise((t=>{let o=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(e){return o}};(async()=>{if(o=await c(),!s)for(;;){if(i!==o)return void t({__type:$s.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Ws(2e3),s)return;if(o=await c(),s)return}})()})),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(t);let l;try{const t=await Promise.race([h,u,a]);if(t.__type===$s.PROCESSED)l=t.response;else{let n;for(;;){const e=await this.getSignatureStatus(o);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await Ws(400)}if(!n?.value)throw new As(o);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new As(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new As(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new As(o)}l={context:n.context,value:{err:n.value.err}}}}}finally{s=!0,c()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>t({__type:$s.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let s;try{const e=await Promise.race([o,n]);if(e.__type!==$s.PROCESSED)throw new Ss(t,e.timeoutMs/1e3);s=e.response}finally{clearTimeout(r),i()}return s}async getClusterNodes(){const e=Pi(await this._rpcRequest("getClusterNodes",[]),ma($i(dc)));if("error"in e)throw new Ks(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=Pi(await this._rpcRequest("getVoteAccounts",t),gc);if("error"in r)throw new Ks(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,void 0,r),i=Pi(await this._rpcRequest("getSlot",n),ma(qi()));if("error"in i)throw new Ks(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,void 0,r),i=Pi(await this._rpcRequest("getSlotLeader",n),ma(Vi()));if("error"in i)throw new Ks(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],n=Pi(await this._rpcRequest("getSlotLeaders",r),ma($i(ha)));if("error"in n)throw new Ks(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);Os(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=Pi(await this._rpcRequest("getSignatureStatuses",r),wc);if("error"in n)throw new Ks(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,void 0,r),i=Pi(await this._rpcRequest("getTransactionCount",n),ma(qi()));if("error"in i)throw new Ks(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=Pi(await this._rpcRequest("getInflationGovernor",t),Na);if("error"in r)throw new Ks(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=da(r),o=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),s=Pi(await this._rpcRequest("getInflationReward",o),Ea);if("error"in s)throw new Ks(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){const e=Pi(await this._rpcRequest("getInflationRate",[]),Ua);if("error"in e)throw new Ks(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,void 0,r),i=Pi(await this._rpcRequest("getEpochInfo",n),$a);if("error"in i)throw new Ks(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=Pi(await this._rpcRequest("getEpochSchedule",[]),Ha);if("error"in e)throw new Ks(e.error,"failed to get epoch schedule");const t=e.result;return new ia(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=Pi(await this._rpcRequest("getLeaderSchedule",[]),za);if("error"in e)throw new Ks(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=Pi(await this._rpcRequest("getMinimumBalanceForRentExemption",r),bc);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=Pi(await this._rpcRequest("getRecentBlockhash",t),qc);if("error"in r)throw new Ks(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(e){const t=Pi(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),Vc);if("error"in t)throw new Ks(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=Pi(await this._rpcRequest("getFeeCalculatorForBlockhash",r),Zc);if("error"in n)throw new Ks(n.error,"failed to get fee calculator");const{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=ps(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=Pi(await this._rpcRequest("getFeeForMessage",n),wa(Fi(qi())));if("error"in i)throw new Ks(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=Pi(await this._rpcRequest("getRecentPrioritizationFees",r),ja);if("error"in n)throw new Ks(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,void 0,r),i=Pi(await this._rpcRequest("getLatestBlockhash",n),Kc);if("error"in i)throw new Ks(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgs([e],r,void 0,n),o=Pi(await this._rpcRequest("isBlockhashValid",i),Wc);if("error"in o)throw new Ks(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=Pi(await this._rpcRequest("getVersion",[]),ma(Oa));if("error"in e)throw new Ks(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=Pi(await this._rpcRequest("getGenesisHash",[]),ma(Vi()));if("error"in e)throw new Ks(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=Pi(o,Nc);if("error"in e)throw e.error;return e.result}case"none":{const e=Pi(o,Pc);if("error"in e)throw e.error;return e.result}default:{const e=Pi(o,Cc);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:va(r,e.message)},version:r})))}:null}}}catch(e){throw new Ks(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=Pi(o,jc);if("error"in e)throw e.error;return e.result}case"none":{const e=Pi(o,$c);if("error"in e)throw e.error;return e.result}default:{const e=Pi(o,Uc);if("error"in e)throw e.error;return e.result}}}catch(e){throw new Ks(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=Pi(await this._rpcRequest("getBlockProduction",n),Pa);if("error"in i)throw new Ks(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=Pi(await this._rpcRequest("getTransaction",i),Dc);if("error"in o)throw new Ks(o.error,"failed to get transaction");const s=o.result;return s?{...s,transaction:{...s.transaction,message:va(s.version,s.transaction.message)}}:s}async getParsedTransaction(e,t){const{commitment:r,config:n}=da(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=Pi(await this._rpcRequest("getTransaction",i),Fc);if("error"in o)throw new Ks(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=da(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=Pi(e,Fc);if("error"in t)throw new Ks(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){const{commitment:r,config:n}=da(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=Pi(e,Dc);if("error"in t)throw new Ks(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:va(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=Pi(await this._rpcRequest("getConfirmedBlock",r),Hc);if("error"in n)throw new Ks(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");const o={...i,transactions:i.transactions.map((({transaction:e,meta:t})=>{const r=new Ns(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:Ds.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=Pi(await this._rpcRequest("getBlocks",n),ma($i(qi())));if("error"in i)throw new Ks(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=Pi(await this._rpcRequest("getBlock",r),zc);if("error"in n)throw new Ks(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=Pi(await this._rpcRequest("getConfirmedBlock",r),zc);if("error"in n)throw new Ks(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=Pi(await this._rpcRequest("getConfirmedTransaction",r),Dc);if("error"in n)throw new Ks(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const o=new Ns(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:Ds.populate(o,s)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=Pi(await this._rpcRequest("getConfirmedTransaction",r),Fc);if("error"in n)throw new Ks(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=Pi(e,Fc);if("error"in t)throw new Ks(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=Pi(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),rc);if("error"in i)throw new Ks(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=Pi(await this._rpcRequest("getSignaturesForAddress",n),nc);if("error"in i)throw new Ks(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new aa({key:e,state:aa.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=Gs.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=Pi(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),Gc);if("error"in r)throw new Ks(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ws(100);const e=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await Ws(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=da(e),n=this._buildArgs([],t,"base64",r),i=Pi(await this._rpcRequest("getStakeMinimumDelegation",n),wa(qi()));if("error"in i)throw new Ks(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const n=e.serialize(),i=C.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const o=t||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(o.innerInstructions=t.innerInstructions);const s=[i,o],a=Pi(await this._rpcRequest("simulateTransaction",s),Ca);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let n;if(e instanceof Ds){let t=e;n=new Ds,n.feePayer=t.feePayer,n.instructions=e.instructions,n.nonceInfo=t.nonceInfo,n.signatures=t.signatures}else n=Ds.populate(e),n._message=n._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(n.nonceInfo&&i)n.sign(...i);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=t.lastValidBlockHeight,n.recentBlockhash=t.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const o=n._compile(),s=o.serialize(),a=n._serialize(s).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:o.nonProgramIds()).map((e=>e.toBase58()));c.accounts={encoding:"base64",addresses:e}}i&&(c.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(c.innerInstructions=t.innerInstructions);const u=[a,c],h=Pi(await this._rpcRequest("simulateTransaction",u),Ca);if("error"in h){let e;if("data"in h.error&&(e=h.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(h.error.message,r)}throw new qs({action:"simulate",signature:"",transactionMessage:h.error.message,logs:e})}return h.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=ps(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[e,r],s=Pi(await this._rpcRequest("sendTransaction",o),Jc);if("error"in s){let e;throw"data"in s.error&&(e=s.error.data.logs),new qs({action:n?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:e})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=Pi(e,ic);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=ra([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];Os(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=da(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=Pi(e,sc);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:o}=da(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(n?{filters:pa(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=Pi(e,Xc);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=Pi(e,cc);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=Pi(e,hc);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=Pi(e,lc);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,i),s=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(s)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=Pi(e,fc);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}var tu;Object.freeze({CreateLookupTable:{index:0,layout:vi([mi("instruction"),Js("recentSlot"),gi("bumpSeed")])},FreezeLookupTable:{index:1,layout:vi([mi("instruction")])},ExtendLookupTable:{index:2,layout:vi([mi("instruction"),Js(),_i(ks(),pi(mi(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:vi([mi("instruction")])},CloseLookupTable:{index:4,layout:vi([mi("instruction")])}}),new vs("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:vi([gi("instruction"),mi("units"),mi("additionalFee")])},RequestHeapFrame:{index:1,layout:vi([gi("instruction"),mi("bytes")])},SetComputeUnitLimit:{index:2,layout:vi([gi("instruction"),mi("units")])},SetComputeUnitPrice:{index:3,layout:vi([gi("instruction"),Js("microLamports")])}}),new vs("ComputeBudget111111111111111111111111111111"),vi([gi("numSignatures"),gi("padding"),yi("signatureOffset"),yi("signatureInstructionIndex"),yi("publicKeyOffset"),yi("publicKeyInstructionIndex"),yi("messageDataOffset"),yi("messageDataSize"),yi("messageInstructionIndex")]),new vs("Ed25519SigVerify111111111111111111111111111"),hs.utils.isValidPrivateKey,hs.getPublicKey,vi([gi("numSignatures"),yi("signatureOffset"),gi("signatureInstructionIndex"),yi("ethAddressOffset"),gi("ethAddressInstructionIndex"),yi("messageDataOffset"),yi("messageDataSize"),gi("messageInstructionIndex"),Ei(20,"ethAddress"),Ei(64,"signature"),gi("recoveryId")]),new vs("KeccakSecp256k11111111111111111111111111111"),new vs("StakeConfig11111111111111111111111111111111");class ru{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}tu=ru,ru.default=new tu(0,0,vs.default),Object.freeze({Initialize:{index:0,layout:vi([mi("instruction"),((e="authorized")=>vi([ks("staker"),ks("withdrawer")],e))(),((e="lockup")=>vi([bi("unixTimestamp"),bi("epoch"),ks("custodian")],e))()])},Authorize:{index:1,layout:vi([mi("instruction"),ks("newAuthorized"),mi("stakeAuthorizationType")])},Delegate:{index:2,layout:vi([mi("instruction")])},Split:{index:3,layout:vi([mi("instruction"),bi("lamports")])},Withdraw:{index:4,layout:vi([mi("instruction"),bi("lamports")])},Deactivate:{index:5,layout:vi([mi("instruction")])},Merge:{index:7,layout:vi([mi("instruction")])},AuthorizeWithSeed:{index:8,layout:vi([mi("instruction"),ks("newAuthorized"),mi("stakeAuthorizationType"),Is("authoritySeed"),ks("authorityOwner")])}}),Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),new vs("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:vi([mi("instruction"),((e="voteInit")=>vi([ks("nodePubkey"),ks("authorizedVoter"),ks("authorizedWithdrawer"),gi("commission")],e))()])},Authorize:{index:1,layout:vi([mi("instruction"),ks("newAuthorized"),mi("voteAuthorizationType")])},Withdraw:{index:3,layout:vi([mi("instruction"),bi("lamports")])},UpdateValidatorIdentity:{index:4,layout:vi([mi("instruction")])},AuthorizeWithSeed:{index:10,layout:vi([mi("instruction"),((e="voteAuthorizeWithSeedArgs")=>vi([mi("voteAuthorizationType"),ks("currentAuthorityDerivedKeyOwnerPubkey"),Is("currentAuthorityDerivedKeySeed"),ks("newAuthorized")],e))()])}}),Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),new vs("Vote111111111111111111111111111111111111111"),new vs("Va1idator1nfo111111111111111111111111111111"),Gi({name:Vi(),website:Ki(Vi()),details:Ki(Vi()),iconUrl:Ki(Vi()),keybaseUsername:Ki(Vi())}),new vs("Vote111111111111111111111111111111111111111"),vi([ks("nodePubkey"),ks("authorizedWithdrawer"),gi("commission"),wi(),_i(vi([wi("slot"),mi("confirmationCount")]),pi(mi(),-8),"votes"),gi("rootSlotValid"),wi("rootSlot"),wi(),_i(vi([wi("epoch"),ks("authorizedVoter")]),pi(mi(),-8),"authorizedVoters"),vi([_i(vi([ks("authorizedPubkey"),wi("epochOfLastAuthorizedSwitch"),wi("targetEpoch")]),32,"buf"),wi("idx"),gi("isEmpty")],"priorVoters"),wi(),_i(vi([wi("epoch"),wi("credits"),wi("prevCredits")]),pi(mi(),-8),"epochCredits"),vi([wi("slot"),wi("timestamp")],"lastTimestamp")]);const nu="solana:signAndSendTransaction",iu="solana:signIn",ou="solana:signMessage",su="solana:signTransaction",au="standard:connect",cu="standard:disconnect",uu="standard:events";var hu,lu=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class fu extends Event{constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,hu,void 0),((e,t,r,n)=>{lu(e,t,"write to private field"),n?n.call(e,r):t.set(e,r)})(this,hu,e)}get detail(){return((e,t,r)=>(lu(e,t,"read from private field"),r?r.call(e):t.get(e)))(this,hu)}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}function du(e){!function(e){const t=({register:t})=>t(e);try{window.dispatchEvent(new fu(t))}catch(e){console.error("wallet-standard:register-wallet event could not be dispatched\n",e)}try{window.addEventListener("wallet-standard:app-ready",(({detail:e})=>t(e)))}catch(e){console.error("wallet-standard:app-ready event listener could not be added\n",e)}}(e.getInstanceWithAdapter())}hu=new WeakMap;const pu=["solana:mainnet"];function gu(e){return pu.includes(e)}function yu(e){return"version"in e}var mu,wu,bu,vu,_u,Eu,Su=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Au=(e,t,r)=>(Su(e,t,"read from private field"),r?r.call(e):t.get(e)),xu=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ku=(e,t,r,n)=>(Su(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);const Bu=pu,Iu=[nu,su,ou],Tu=class{constructor({address:e,publicKey:t,label:r,icon:n}){xu(this,mu,void 0),xu(this,wu,void 0),xu(this,bu,void 0),xu(this,vu,void 0),xu(this,_u,void 0),xu(this,Eu,void 0),new.target===Tu&&Object.freeze(this),ku(this,mu,e),ku(this,wu,t),ku(this,bu,Bu),ku(this,vu,Iu),ku(this,_u,r),ku(this,Eu,n)}get address(){return Au(this,mu)}get publicKey(){return Au(this,wu).slice()}get chains(){return Au(this,bu).slice()}get features(){return Au(this,vu).slice()}get label(){return Au(this,_u)}get icon(){return Au(this,Eu)}};let Ru=Tu;mu=new WeakMap,wu=new WeakMap,bu=new WeakMap,vu=new WeakMap,_u=new WeakMap,Eu=new WeakMap;var Ou,Lu,Mu,Cu,Pu,Nu,Uu,ju,$u,Hu,zu,Du,Fu,qu,Ku,Wu,Vu,Zu,Gu,Ju,Yu=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Xu=(e,t,r)=>(Yu(e,t,"read from private field"),r?r.call(e):t.get(e)),Qu=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},eh=(e,t,r,n)=>(Yu(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),th=(e,t,r)=>(Yu(e,t,"access private method"),r);const rh="trust:",nh=class{constructor(e){Qu(this,ju),Qu(this,Hu),Qu(this,Ou,{}),Qu(this,Lu,"1.0.0"),Qu(this,Mu,"Trust"),Qu(this,Cu,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K"),Qu(this,Pu,null),Qu(this,Nu,void 0),Qu(this,Uu,((e,t)=>{var r;return null!=(r=Xu(this,Ou)[e])&&r.push(t)||(Xu(this,Ou)[e]=[t]),()=>th(this,Hu,zu).call(this,e,t)})),Qu(this,Du,(()=>{var e;const t=null==(e=Xu(this,Nu).publicKey)?void 0:e.toBase58();if(t){const e=Xu(this,Nu).publicKey.toBytes(),r=Xu(this,Pu);(!r||r.address!==t||!function(e,t){return function(e,t){if(e===t)return!0;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}(e,t)}(r.publicKey,e))&&(eh(this,Pu,new Ru({address:t,publicKey:e})),th(this,ju,$u).call(this,"change",{accounts:this.accounts}))}})),Qu(this,Fu,(()=>{Xu(this,Pu)&&(eh(this,Pu,null),th(this,ju,$u).call(this,"change",{accounts:this.accounts}))})),Qu(this,qu,(()=>{Xu(this,Nu).publicKey?Xu(this,Du).call(this):Xu(this,Fu).call(this)})),Qu(this,Ku,(async({silent:e}={})=>(Xu(this,Pu)||await Xu(this,Nu).connect(e?{onlyIfTrusted:!0}:void 0),Xu(this,Du).call(this),{accounts:this.accounts}))),Qu(this,Wu,(async()=>{await Xu(this,Nu).disconnect()})),Qu(this,Vu,(async(...e)=>{if(!Xu(this,Pu))throw new Error("not connected");const t=[];if(1===e.length){const{transaction:r,account:n,chain:i,options:o}=e[0],{minContextSlot:s,preflightCommitment:a,skipPreflight:c,maxRetries:u}=o||{};if(n!==Xu(this,Pu))throw new Error("invalid account");if(!gu(i))throw new Error("invalid chain");const{signature:h}=await Xu(this,Nu).signAndSendTransaction(Fs.deserialize(r),{preflightCommitment:a,minContextSlot:s,maxRetries:u,skipPreflight:c});t.push({signature:new Uint8Array(Fr.decode(h))})}else if(e.length>1)for(const r of e)t.push(...await Xu(this,Vu).call(this,r));return t})),Qu(this,Zu,(async(...e)=>{if(!Xu(this,Pu))throw new Error("not connected");const t=[];if(1===e.length){const{transaction:r,account:n,chain:i}=e[0];if(n!==Xu(this,Pu))throw new Error("invalid account");if(i&&!gu(i))throw new Error("invalid chain");const o=await Xu(this,Nu).signTransaction(Fs.deserialize(r)),s=yu(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}));t.push({signedTransaction:s})}else if(e.length>1){let r;for(const t of e){if(t.account!==Xu(this,Pu))throw new Error("invalid account");if(t.chain){if(!gu(t.chain))throw new Error("invalid chain");if(r){if(t.chain!==r)throw new Error("conflicting chain")}else r=t.chain}}const n=e.map((({transaction:e})=>Fs.deserialize(e))),i=await Xu(this,Nu).signAllTransactions(n);t.push(...i.map((e=>({signedTransaction:yu(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))))}return t})),Qu(this,Gu,(async(...e)=>{if(!Xu(this,Pu))throw new Error("not connected");const t=[];if(1===e.length){const{message:r,account:n}=e[0];if(n!==Xu(this,Pu))throw new Error("invalid account");const{signature:i}=await Xu(this,Nu).signMessage(r);t.push({signedMessage:r,signature:i})}else if(e.length>1)for(const r of e)t.push(...await Xu(this,Gu).call(this,r));return t})),Qu(this,Ju,(async(...e)=>{const t=[];if(!(e.length>1))return[await Xu(this,Nu).signIn(e[0])];for(const r of e)t.push(await Xu(this,Nu).signIn(r));return t})),new.target===nh&&Object.freeze(this),eh(this,Nu,e),e.on("connect",Xu(this,Du),this),e.on("disconnect",Xu(this,Fu),this),e.on("accountChanged",Xu(this,qu),this),Xu(this,Du).call(this)}get version(){return Xu(this,Lu)}get name(){return Xu(this,Mu)}get icon(){return Xu(this,Cu)}get chains(){return pu.slice()}get features(){return{[au]:{version:"1.0.0",connect:Xu(this,Ku)},[cu]:{version:"1.0.0",disconnect:Xu(this,Wu)},[uu]:{version:"1.0.0",on:Xu(this,Uu)},[nu]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Xu(this,Vu)},[su]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Xu(this,Zu)},[ou]:{version:"1.0.0",signMessage:Xu(this,Gu)},[iu]:{version:"1.0.0",signIn:Xu(this,Ju)},[rh]:{trust:Xu(this,Nu)}}}get accounts(){return Xu(this,Pu)?[Xu(this,Pu)]:[]}};let ih=nh;Ou=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,Cu=new WeakMap,Pu=new WeakMap,Nu=new WeakMap,Uu=new WeakMap,ju=new WeakSet,$u=function(e,...t){var r;null==(r=Xu(this,Ou)[e])||r.forEach((e=>e.apply(null,t)))},Hu=new WeakSet,zu=function(e,t){var r;Xu(this,Ou)[e]=null==(r=Xu(this,Ou)[e])?void 0:r.filter((e=>t!==e))},Du=new WeakMap,Fu=new WeakMap,qu=new WeakMap,Ku=new WeakMap,Wu=new WeakMap,Vu=new WeakMap,Zu=new WeakMap,Gu=new WeakMap,Ju=new WeakMap;class oh{constructor(e,t=!1){this.useLegacySign=!1,this.provider=e,this.useLegacySign=t}async connect(e){const t=await this.provider.internalRequest({method:"requestAccounts",params:{options:e}});return this.provider.emit("connect"),{publicKey:new vs(t[0])}}async signTransaction(e){if(this.useLegacySign)return await this.legacySign(e);const t=JSON.stringify(e);let r,n="legacy";yu(e)?(n=e.version,r=C.from(e.message.serialize()).toString("base64")):r=C.from(e.serializeMessage()).toString("base64");const i=C.from(e.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64"),o=await this.provider.internalRequest({method:"signRawTransaction",params:{data:t,raw:i,rawMessage:r,version:n}});return this.provider.mapSignedTransaction(e,o)}async legacySign(e){const t=JSON.stringify(e),r="number"!=typeof e.version?"legacy":e.version,n=Fr.encode("legacy"===r?e.serializeMessage():0===r?e.message.serialize():e.serialize());try{const i=await this.provider.internalRequest({method:"signRawTransaction",params:{data:t,raw:n,version:r}});return this.provider.mapSignedTransaction(e,i)}catch(e){console.log(`<== Error: ${e}`)}}async request(e,t){var r;switch(e.method){case"signTransaction":return this.signTransaction(e.params);case"connect":return this.connect(null==(r=e?.params)?void 0:r.options)}return t()}}var sh,ah,ch,uh,hh,lh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},fh=(e,t,r)=>(lh(e,t,"read from private field"),r?r.call(e):t.get(e)),dh=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ph=(e,t,r,n)=>(lh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),gh=(e,t,r)=>(lh(e,t,"access private method"),r);const yh=class extends ze{constructor(e){super(),dh(this,uh),dh(this,sh,!1),dh(this,ah,!0),this.isTrust=!0,this.isTrustWallet=!0,dh(this,ch,!1),e&&(typeof e.enableAdapter<"u"&&ph(this,ah,e.enableAdapter),typeof e.cluster<"u"&&(this.connection=new eu(e.cluster,"confirmed")),typeof e.disableMobileAdapter<"u"&&ph(this,sh,e.disableMobileAdapter),typeof e.useLegacySign<"u"&&ph(this,ch,e.useLegacySign),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust)),fh(this,ah)&&du(this),fh(this,sh)||(this.mobileAdapter=new oh(this,fh(this,ch)))}static bufferToHex(e){return"0x"+C.from(e).toString("hex")}static messageToBuffer(e){let t=C.from([]);try{t="string"==typeof e?C.from(e.replace("0x",""),"hex"):C.from(e)}catch(e){console.log(`messageToBuffer error: ${e}`)}return t}getInstanceWithAdapter(){return new ih(this)}async connect(e){const t=await gh(this,uh,hh).call(this,{method:"connect",params:{options:e}});return this.publicKey=t.publicKey,t}disconnect(){return new Promise((e=>{this.publicKey=null,this.emit("disconnect"),e()}))}async signAndSendTransaction(e,t){const r=await this.signTransaction(e);return{signature:await this.connection.sendRawTransaction(r.serialize(),t)}}signTransaction(e){return gh(this,uh,hh).call(this,{method:"signTransaction",params:e})}signAllTransactions(e){return Promise.all(e.map((e=>this.signTransaction(e))))}async signRawTransactionMulti(e){return(await gh(this,uh,hh).call(this,{method:"signRawTransactionMulti",params:{transactions:e.map((e=>{const t=JSON.stringify(e);let r,n="legacy";yu(e)?(n=e.version,r=C.from(e.message.serialize()).toString("base64")):r=C.from(e.serializeMessage()).toString("base64");return{data:t,raw:C.from(e.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64"),rawMessage:r,version:n}}))}})).map(((t,r)=>this.mapSignedTransaction(e[r],t)))}async signMessage(e){var t;const r=yh.bufferToHex(e),n=await gh(this,uh,hh).call(this,{method:"signMessage",params:{data:r}});return{signature:new Uint8Array(C.from(yh.messageToBuffer(n).buffer)),publicKey:null==(t=this.publicKey)?void 0:t.toBase58()}}signIn(e){throw new Error("Method not implemented.")}getNetwork(){return yh.NETWORK}mapSignedTransaction(e,t){return e.addSignature(this.publicKey,Fr.decode(t)),e}request(e){throw new Error("Not implemented")}internalRequest(e){return super.request(e)}};let mh=yh;sh=new WeakMap,ah=new WeakMap,ch=new WeakMap,uh=new WeakSet,hh=function(e){const t=()=>this.internalRequest(e);return this.mobileAdapter?this.mobileAdapter.request(e,t):t()},mh.NETWORK="solana";var wh={},bh={},vh={},_h={},Eh={},Sh={},Ah={},xh={},kh={};function Bh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ih(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function Th(e,...t){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Rh(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Bh(e.outputLen),Bh(e.blockLen)}function Oh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Lh(e,t){Th(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(kh,"__esModule",{value:!0}),kh.output=kh.exists=kh.hash=kh.bytes=kh.bool=kh.number=void 0,kh.number=Bh,kh.bool=Ih,kh.bytes=Th,kh.hash=Rh,kh.exists=Oh,kh.output=Lh;const Mh={number:Bh,bool:Ih,bytes:Th,hash:Rh,exists:Oh,output:Lh};kh.default=Mh;var Ch={},Ph={};Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.crypto=void 0,Ph.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=Ph;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function r(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.rotr=(e,t)=>e<<32-t|e>>>t,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=n[e[r]];return t};const i=48,o=57,s=65,a=70,c=97,u=102;function h(e){return e>=i&&e<=o?e-i:e>=s&&e<=a?e-(s-10):e>=c&&e<=u?e-(c-10):void 0}e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=h(e.charCodeAt(i)),o=h(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n};function l(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function f(e){if("string"==typeof e&&(e=l(e)),!r(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.nextTick=async()=>{},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=l,e.toBytes=f,e.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];if(!r(i))throw new Error("Uint8Array expected");t+=i.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n};e.Hash=class{clone(){return this._cloneInto()}};const d={}.toString;e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==d.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(f(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(f(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(f(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(Ch),Object.defineProperty(xh,"__esModule",{value:!0}),xh.SHA2=void 0;const Nh=kh,Uh=Ch;xh.SHA2=class extends Uh.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Uh.createView)(this.buffer)}update(e){(0,Nh.exists)(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=(0,Uh.toBytes)(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=(0,Uh.createView)(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Nh.exists)(this),(0,Nh.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=(0,Uh.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}},Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.sha224=Ah.sha256=void 0;const jh=xh,$h=Ch,Hh=(e,t,r)=>e&t^~e&r,zh=(e,t,r)=>e&t^e&r^t&r,Dh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fh=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),qh=new Uint32Array(64);class Kh extends jh.SHA2{constructor(){super(64,32,8,!1),this.A=0|Fh[0],this.B=0|Fh[1],this.C=0|Fh[2],this.D=0|Fh[3],this.E=0|Fh[4],this.F=0|Fh[5],this.G=0|Fh[6],this.H=0|Fh[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)qh[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=qh[e-15],r=qh[e-2],n=(0,$h.rotr)(t,7)^(0,$h.rotr)(t,18)^t>>>3,i=(0,$h.rotr)(r,17)^(0,$h.rotr)(r,19)^r>>>10;qh[e]=i+qh[e-7]+n+qh[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+((0,$h.rotr)(s,6)^(0,$h.rotr)(s,11)^(0,$h.rotr)(s,25))+Hh(s,a,c)+Dh[e]+qh[e]|0,h=((0,$h.rotr)(r,2)^(0,$h.rotr)(r,13)^(0,$h.rotr)(r,22))+zh(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){qh.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Wh extends Kh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Ah.sha256=(0,$h.wrapConstructor)((()=>new Kh)),Ah.sha224=(0,$h.wrapConstructor)((()=>new Wh));var Vh={},Zh={};Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.validateObject=Zh.createHmacDrbg=Zh.bitMask=Zh.bitSet=Zh.bitGet=Zh.bitLen=Zh.utf8ToBytes=Zh.equalBytes=Zh.concatBytes=Zh.ensureBytes=Zh.numberToVarBytesBE=Zh.numberToBytesLE=Zh.numberToBytesBE=Zh.bytesToNumberLE=Zh.bytesToNumberBE=Zh.hexToBytes=Zh.hexToNumber=Zh.numberToHexUnpadded=Zh.bytesToHex=Zh.isBytes=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Gh=BigInt(0),Jh=BigInt(1),Yh=BigInt(2);function Xh(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}Zh.isBytes=Xh;const Qh=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function el(e){if(!Xh(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Qh[e[r]];return t}function tl(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function rl(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}Zh.bytesToHex=el,Zh.numberToHexUnpadded=tl,Zh.hexToNumber=rl;const nl=48,il=57,ol=65,sl=70,al=97,cl=102;function ul(e){return e>=nl&&e<=il?e-nl:e>=ol&&e<=sl?e-(ol-10):e>=al&&e<=cl?e-(al-10):void 0}function hl(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=ul(e.charCodeAt(i)),o=ul(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function ll(e,t){return hl(e.toString(16).padStart(2*t,"0"))}function fl(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(!Xh(n))throw new Error("Uint8Array expected");t+=n.length}let r=new Uint8Array(t),n=0;for(let t=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}Zh.hexToBytes=hl,Zh.bytesToNumberBE=function(e){return rl(el(e))},Zh.bytesToNumberLE=function(e){if(!Xh(e))throw new Error("Uint8Array expected");return rl(el(Uint8Array.from(e).reverse()))},Zh.numberToBytesBE=ll,Zh.numberToBytesLE=function(e,t){return ll(e,t).reverse()},Zh.numberToVarBytesBE=function(e){return hl(tl(e))},Zh.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=hl(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!Xh(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n},Zh.concatBytes=fl,Zh.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},Zh.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},Zh.bitLen=function(e){let t;for(t=0;e>Gh;e>>=Jh,t+=1);return t},Zh.bitGet=function(e,t){return e>>BigInt(t)&Jh};Zh.bitSet=(e,t,r)=>e|(r?Jh:Gh)<<BigInt(t);Zh.bitMask=e=>(Yh<<BigInt(e-1))-Jh;const dl=e=>new Uint8Array(e),pl=e=>Uint8Array.from(e);Zh.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=dl(e),i=dl(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),c=(e=dl())=>{i=a(pl([0]),e),n=a(),0!==e.length&&(i=a(pl([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return fl(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}};const gl={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Xh(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};Zh.validateObject=function(e,t,r={}){const n=(t,r,n)=>{const i=gl[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e},Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.mapHashToField=Vh.getMinHashLength=Vh.getFieldBytesLength=Vh.hashToPrivateScalar=Vh.FpSqrtEven=Vh.FpSqrtOdd=Vh.Field=Vh.nLength=Vh.FpIsSquare=Vh.FpDiv=Vh.FpInvertBatch=Vh.FpPow=Vh.validateField=Vh.isNegativeLE=Vh.FpSqrt=Vh.tonelliShanks=Vh.invert=Vh.pow2=Vh.pow=Vh.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const yl=Zh,ml=BigInt(0),wl=BigInt(1),bl=BigInt(2),vl=BigInt(3),_l=BigInt(4),El=BigInt(5),Sl=BigInt(8);function Al(e,t){const r=e%t;return r>=ml?r:t+r}function xl(e,t,r){if(r<=ml||t<ml)throw new Error("Expected power/modulo > 0");if(r===wl)return ml;let n=wl;for(;t>ml;)t&wl&&(n=n*e%r),e=e*e%r,t>>=wl;return n}function kl(e,t){if(e===ml||t<=ml)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Al(e,t),n=t,i=ml,o=wl;for(;r!==ml;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==wl)throw new Error("invert: does not exist");return Al(i,t)}function Bl(e){const t=(e-wl)/bl;let r,n,i;for(r=e-wl,n=0;r%bl===ml;r/=bl,n++);for(i=bl;i<e&&xl(i,t,e)!==e-wl;i++);if(1===n){const t=(e+wl)/_l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+wl)/bl;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),h=e.pow(s,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,wl<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),a=t}return u}}function Il(e){if(e%_l===vl){const t=(e+wl)/_l;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Sl===El){const t=(e-El)/Sl;return function(e,r){const n=e.mul(r,bl),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,bl),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return Bl(e)}BigInt(9),BigInt(16),Vh.mod=Al,Vh.pow=xl,Vh.pow2=function(e,t,r){let n=e;for(;t-- >ml;)n*=n,n%=r;return n},Vh.invert=kl,Vh.tonelliShanks=Bl,Vh.FpSqrt=Il;Vh.isNegativeLE=(e,t)=>(Al(e,t)&wl)===wl;const Tl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rl(e,t,r){if(r<ml)throw new Error("Expected power > 0");if(r===ml)return e.ONE;if(r===wl)return t;let n=e.ONE,i=t;for(;r>ml;)r&wl&&(n=e.mul(n,i)),i=e.sqr(i),r>>=wl;return n}function Ol(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function Ll(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ml(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Cl(e){const t=Ml(e);return t+Math.ceil(t/2)}Vh.validateField=function(e){const t=Tl.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,yl.validateObject)(e,t)},Vh.FpPow=Rl,Vh.FpInvertBatch=Ol,Vh.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?kl(r,e.ORDER):e.inv(r))},Vh.FpIsSquare=function(e){const t=(e.ORDER-wl)/bl;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},Vh.nLength=Ll,Vh.Field=function(e,t,r=!1,n={}){if(e<=ml)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Ll(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Il(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:(0,yl.bitMask)(i),ZERO:ml,ONE:wl,create:t=>Al(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return ml<=t&&t<e},is0:e=>e===ml,isOdd:e=>(e&wl)===wl,neg:t=>Al(-t,e),eql:(e,t)=>e===t,sqr:t=>Al(t*t,e),add:(t,r)=>Al(t+r,e),sub:(t,r)=>Al(t-r,e),mul:(t,r)=>Al(t*r,e),pow:(e,t)=>Rl(a,e,t),div:(t,r)=>Al(t*kl(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>kl(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>Ol(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,yl.numberToBytesLE)(e,o):(0,yl.numberToBytesBE)(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?(0,yl.bytesToNumberLE)(e):(0,yl.bytesToNumberBE)(e)}});return Object.freeze(a)},Vh.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},Vh.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},Vh.hashToPrivateScalar=function(e,t,r=!1){const n=(e=(0,yl.ensureBytes)("privateHash",e)).length,i=Ll(t).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);return Al(r?(0,yl.bytesToNumberLE)(e):(0,yl.bytesToNumberBE)(e),t-wl)+wl},Vh.getFieldBytesLength=Ml,Vh.getMinHashLength=Cl,Vh.mapHashToField=function(e,t,r=!1){const n=e.length,i=Ml(t),o=Cl(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=Al(r?(0,yl.bytesToNumberBE)(e):(0,yl.bytesToNumberLE)(e),t-wl)+wl;return r?(0,yl.numberToBytesLE)(s,i):(0,yl.numberToBytesBE)(s,i)};var Pl={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.validateBasic=Nl.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ul=Vh,jl=Zh,$l=BigInt(0),Hl=BigInt(1);Nl.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>$l;)r&Hl&&(n=n.add(i)),i=i.double(),r>>=Hl;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),o=[];let s=e,a=s;for(let e=0;e<r;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=n(t);let c=e.ZERO,u=e.BASE;const h=BigInt(2**t-1),l=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let n=Number(o&h);o>>=f,n>a&&(n-=l,o+=Hl);const s=t,d=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[s])):c=c.add(r(g,i[d]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}},Nl.validateBasic=function(e){return(0,Ul.validateField)(e.Fp),(0,jl.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Ul.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const t=Vh,r=Zh,n=Zh,i=Nl;const{bytesToNumberBE:o,hexToBytes:s}=r;e.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:r}=e.DER;if(t.length<2||2!==t[0])throw new r("Invalid signature integer tag");const n=t[1],i=t.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(128&i[0])throw new r("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:o(i),l:t.subarray(n+2)}},toSig(t){const{Err:n}=e.DER,i="string"==typeof t?s(t):t;if(!r.isBytes(i))throw new Error("ui8a expected");let o=i.length;if(o<2||48!=i[0])throw new n("Invalid signature tag");if(i[1]!==o-2)throw new n("Invalid signature: incorrect length");const{d:a,l:c}=e.DER._parseInt(i.subarray(2)),{d:u,l:h}=e.DER._parseInt(c);if(h.length)throw new n("Invalid signature: left bytes after parsing");return{r:a,s:u}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}};const a=BigInt(0),c=BigInt(1),u=BigInt(2),h=BigInt(3),l=BigInt(4);function f(e){const o=function(e){const t=(0,i.validateBasic)(e);r.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:o,a:s}=t;if(n){if(!o.eql(s,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=o,u=o.toBytes||((e,t,n)=>{const i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),s.toBytes(i.x),s.toBytes(i.y))}),l=o.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function f(e){const{a:t,b:r}=o,n=s.sqr(e),i=s.mul(n,e);return s.add(s.add(i,s.mul(e,t)),r)}if(!s.eql(s.sqr(o.Gy),f(o.Gx)))throw new Error("bad generator point: equation left != right");function d(e){return"bigint"==typeof e&&a<e&&e<o.n}function p(e){if(!d(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){const{allowedPrivateKeyLengths:i,nByteLength:s,wrapPrivateKey:a,n:c}=o;if(i&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!i.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let u;try{u="bigint"==typeof e?e:r.bytesToNumberBE((0,n.ensureBytes)("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return a&&(u=t.mod(u,c)),p(u),u}const y=new Map;function m(e){if(!(e instanceof w))throw new Error("ProjectivePoint expected")}class w{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==r||!s.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!s.isValid(t)||!s.isValid(r))throw new Error("invalid affine point");if(e instanceof w)throw new Error("projective point not allowed");const n=e=>s.eql(e,s.ZERO);return n(t)&&n(r)?w.ZERO:new w(t,r,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(w.fromAffine)}static fromHex(e){const t=w.fromAffine(l((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return w.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,y.delete(this)}assertValidity(){if(this.is0()){if(o.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:t}=this.toAffine();if(!s.isValid(e)||!s.isValid(t))throw new Error("bad point: x or y not FE");const r=s.sqr(t),n=f(e);if(!s.eql(r,n))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){m(e);const{px:t,py:r,pz:n}=this,{px:i,py:o,pz:a}=e,c=s.eql(s.mul(t,a),s.mul(i,n)),u=s.eql(s.mul(r,a),s.mul(o,n));return c&&u}negate(){return new w(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:t}=o,r=s.mul(t,h),{px:n,py:i,pz:a}=this;let c=s.ZERO,u=s.ZERO,l=s.ZERO,f=s.mul(n,n),d=s.mul(i,i),p=s.mul(a,a),g=s.mul(n,i);return g=s.add(g,g),l=s.mul(n,a),l=s.add(l,l),c=s.mul(e,l),u=s.mul(r,p),u=s.add(c,u),c=s.sub(d,u),u=s.add(d,u),u=s.mul(c,u),c=s.mul(g,c),l=s.mul(r,l),p=s.mul(e,p),g=s.sub(f,p),g=s.mul(e,g),g=s.add(g,l),l=s.add(f,f),f=s.add(l,f),f=s.add(f,p),f=s.mul(f,g),u=s.add(u,f),p=s.mul(i,a),p=s.add(p,p),f=s.mul(p,g),c=s.sub(c,f),l=s.mul(p,d),l=s.add(l,l),l=s.add(l,l),new w(c,u,l)}add(e){m(e);const{px:t,py:r,pz:n}=this,{px:i,py:a,pz:c}=e;let u=s.ZERO,l=s.ZERO,f=s.ZERO;const d=o.a,p=s.mul(o.b,h);let g=s.mul(t,i),y=s.mul(r,a),b=s.mul(n,c),v=s.add(t,r),_=s.add(i,a);v=s.mul(v,_),_=s.add(g,y),v=s.sub(v,_),_=s.add(t,n);let E=s.add(i,c);return _=s.mul(_,E),E=s.add(g,b),_=s.sub(_,E),E=s.add(r,n),u=s.add(a,c),E=s.mul(E,u),u=s.add(y,b),E=s.sub(E,u),f=s.mul(d,_),u=s.mul(p,b),f=s.add(u,f),u=s.sub(y,f),f=s.add(y,f),l=s.mul(u,f),y=s.add(g,g),y=s.add(y,g),b=s.mul(d,b),_=s.mul(p,_),y=s.add(y,b),b=s.sub(g,b),b=s.mul(d,b),_=s.add(_,b),g=s.mul(y,_),l=s.add(l,g),g=s.mul(E,_),u=s.mul(v,u),u=s.sub(u,g),g=s.mul(v,y),f=s.mul(E,f),f=s.add(f,g),new w(u,l,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(w.ZERO)}wNAF(e){return v.wNAFCached(this,y,e,(e=>{const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(w.fromAffine)}))}multiplyUnsafe(e){const t=w.ZERO;if(e===a)return t;if(p(e),e===c)return this;const{endo:r}=o;if(!r)return v.unsafeLadder(this,e);let{k1neg:n,k1:i,k2neg:u,k2:h}=r.splitScalar(e),l=t,f=t,d=this;for(;i>a||h>a;)i&c&&(l=l.add(d)),h&c&&(f=f.add(d)),d=d.double(),i>>=c,h>>=c;return n&&(l=l.negate()),u&&(f=f.negate()),f=new w(s.mul(f.px,r.beta),f.py,f.pz),l.add(f)}multiply(e){p(e);let t,r,n=e;const{endo:i}=o;if(i){const{k1neg:e,k1:o,k2neg:a,k2:c}=i.splitScalar(n);let{p:u,f:h}=this.wNAF(o),{p:l,f:f}=this.wNAF(c);u=v.constTimeNegate(e,u),l=v.constTimeNegate(a,l),l=new w(s.mul(l.px,i.beta),l.py,l.pz),t=u.add(l),r=h.add(f)}else{const{p:e,f:i}=this.wNAF(n);t=e,r=i}return w.normalizeZ([t,r])[0]}multiplyAndAddUnsafe(e,t,r){const n=w.BASE,i=(e,t)=>t!==a&&t!==c&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:n}=this,i=this.is0();null==e&&(e=i?s.ONE:s.inv(n));const o=s.mul(t,e),a=s.mul(r,e),c=s.mul(n,e);if(i)return{x:s.ZERO,y:s.ZERO};if(!s.eql(c,s.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:t}=o;if(e===c)return!0;if(t)return t(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:t}=o;return e===c?this:t?t(w,this):this.multiplyUnsafe(o.h)}toRawBytes(e=!0){return this.assertValidity(),u(w,this,e)}toHex(e=!0){return r.bytesToHex(this.toRawBytes(e))}}w.BASE=new w(o.Gx,o.Gy,s.ONE),w.ZERO=new w(s.ZERO,s.ONE,s.ZERO);const b=o.nBitLength,v=(0,i.wNAF)(w,o.endo?Math.ceil(b/2):b);return{CURVE:o,ProjectivePoint:w,normPrivateKeyToScalar:g,weierstrassEquation:f,isWithinCurveOrder:d}}function d(e,t){const r=e.ORDER;let n=a;for(let e=r-c;e%u===a;e/=u)n+=c;const i=n,o=u<<i-c-c,s=o*u,f=(r-c)/s,d=(f-c)/u,p=s-c,g=o,y=e.pow(t,f),m=e.pow(t,(f+c)/u);let w=(t,r)=>{let n=y,o=e.pow(r,p),s=e.sqr(o);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,d),a=e.mul(a,o),o=e.mul(a,r),s=e.mul(a,t);let h=e.mul(s,o);a=e.pow(h,g);let l=e.eql(a,e.ONE);o=e.mul(s,m),a=e.mul(h,n),s=e.cmov(o,s,l),h=e.cmov(a,h,l);for(let t=i;t>c;t--){let r=t-u;r=u<<r-c;let i=e.pow(h,r);const a=e.eql(i,e.ONE);o=e.mul(s,n),n=e.mul(n,n),i=e.mul(h,n),s=e.cmov(o,s,a),h=e.cmov(i,h,a)}return{isValid:l,value:s}};if(e.ORDER%l===h){const r=(e.ORDER-h)/l,n=e.sqrt(e.neg(t));w=(t,i)=>{let o=e.sqr(i);const s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,r);a=e.mul(a,s);const c=e.mul(a,n),u=e.mul(e.sqr(a),i),h=e.eql(u,t);return{isValid:h,value:e.cmov(c,a,h)}}}return w}e.weierstrassPoints=f,e.weierstrass=function(o){const s=function(e){const t=(0,i.validateBasic)(e);return r.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(o),{Fp:u,n:h}=s,l=u.BYTES+1,d=2*u.BYTES+1;function p(e){return t.mod(e,h)}function g(e){return t.invert(e,h)}const{ProjectivePoint:y,normPrivateKeyToScalar:m,weierstrassEquation:w,isWithinCurveOrder:b}=f({...s,toBytes(e,t,n){const i=t.toAffine(),o=u.toBytes(i.x),s=r.concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,u.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],i=e.subarray(1);if(t!==l||2!==n&&3!==n){if(t===d&&4===n){return{x:u.fromBytes(i.subarray(0,u.BYTES)),y:u.fromBytes(i.subarray(u.BYTES,2*u.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${l} compressed bytes or ${d} uncompressed bytes`)}{const e=r.bytesToNumberBE(i);if(!(a<(o=e)&&o<u.ORDER))throw new Error("Point is not on curve");const t=w(e);let s=u.sqrt(t);return!(1&~n)!==((s&c)===c)&&(s=u.neg(s)),{x:e,y:s}}var o}}),v=e=>r.bytesToHex(r.numberToBytesBE(e,s.nByteLength));function _(e){return e>h>>c}const E=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const t=s.nByteLength;return e=(0,n.ensureBytes)("compactSignature",e,2*t),new S(E(e,0,t),E(e,t,2*t))}static fromDER(t){const{r:r,s:i}=e.DER.toSig((0,n.ensureBytes)("DER",t));return new S(r,i)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:i}=this,o=B((0,n.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const a=2===i||3===i?t+s.n:t;if(a>=u.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=1&i?"03":"02",h=y.fromHex(c+v(a)),l=g(a),f=p(-o*l),d=p(r*l),m=y.BASE.multiplyAndAddUnsafe(h,f,d);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const A={isValidPrivateKey(e){try{return m(e),!0}catch(e){return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const e=t.getMinHashLength(s.n);return t.mapHashToField(s.randomBytes(e),s.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function x(e){const t=r.isBytes(e),n="string"==typeof e,i=(t||n)&&e.length;return t?i===l||i===d:n?i===2*l||i===2*d:e instanceof y}const k=s.bits2int||function(e){const t=r.bytesToNumberBE(e),n=8*e.length-s.nBitLength;return n>0?t>>BigInt(n):t},B=s.bits2int_modN||function(e){return p(k(e))},I=r.bitMask(s.nBitLength);function T(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(a<=e&&e<I))throw new Error(`bigint expected < 2^${s.nBitLength}`);return r.numberToBytesBE(e,s.nByteLength)}function R(e,t,i=O){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=s;let{lowS:l,prehash:f,extraEntropy:d}=i;null==l&&(l=!0),e=(0,n.ensureBytes)("msgHash",e),f&&(e=(0,n.ensureBytes)("prehashed msgHash",o(e)));const w=B(e),v=m(t),E=[T(v),T(w)];if(null!=d){const e=!0===d?h(u.BYTES):d;E.push((0,n.ensureBytes)("extraEntropy",e))}const A=r.concatBytes(...E),x=w;return{seed:A,k2sig:function(e){const t=k(e);if(!b(t))return;const r=g(t),n=y.BASE.multiply(t).toAffine(),i=p(n.x);if(i===a)return;const o=p(r*p(x+i*v));if(o===a)return;let s=(n.x===i?0:2)|Number(n.y&c),u=o;return l&&_(o)&&(u=function(e){return _(e)?p(-e):e}(o),s^=1),new S(i,u,s)}}}const O={lowS:s.lowS,prehash:!1},L={lowS:s.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:s,getPublicKey:function(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(x(e))throw new Error("first arg must be private key");if(!x(t))throw new Error("second arg must be public key");return y.fromHex(t).multiply(m(e)).toRawBytes(r)},sign:function(e,t,n=O){const{seed:i,k2sig:o}=R(e,t,n),a=s;return r.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(t,i,o,a=L){const c=t;if(i=(0,n.ensureBytes)("msgHash",i),o=(0,n.ensureBytes)("publicKey",o),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:h}=a;let l,f;try{if("string"==typeof c||r.isBytes(c))try{l=S.fromDER(c)}catch(t){if(!(t instanceof e.DER.Err))throw t;l=S.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;l=new S(e,t)}}f=y.fromHex(o)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;h&&(i=s.hash(i));const{r:d,s:m}=l,w=B(i),b=g(m),v=p(w*b),_=p(d*b),E=y.BASE.multiplyAndAddUnsafe(f,v,_)?.toAffine();return!!E&&p(E.x)===d},ProjectivePoint:y,Signature:S,utils:A}},e.SWUFpSqrtRatio=d,e.mapToCurveSimpleSWU=function(e,r){if(t.validateField(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=d(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return t=>{let i,o,s,a,c,u,h,l;i=e.sqr(t),i=e.mul(i,r.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,r.B),a=e.cmov(r.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,r.A),o=e.sqr(s),u=e.sqr(a),c=e.mul(u,r.A),o=e.add(o,c),o=e.mul(o,s),u=e.mul(u,a),c=e.mul(u,r.B),o=e.add(o,c),h=e.mul(i,s);const{isValid:f,value:d}=n(o,u);l=e.mul(i,t),l=e.mul(l,d),h=e.cmov(h,s,f),l=e.cmov(l,d,f);const p=e.isOdd(t)===e.isOdd(l);return l=e.cmov(e.neg(l),l,p),h=e.div(h,a),{x:h,y:l}}}}(Pl);var zl={};Object.defineProperty(zl,"__esModule",{value:!0}),zl.createHasher=zl.isogenyMap=zl.hash_to_field=zl.expand_message_xof=zl.expand_message_xmd=void 0;const Dl=Vh,Fl=Zh;const ql=Fl.bytesToNumberBE;function Kl(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function Wl(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Vl(e){if(!(0,Fl.isBytes)(e))throw new Error("Uint8Array expected")}function Zl(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Gl(e,t,r,n){Vl(e),Vl(t),Zl(r),t.length>255&&(t=n((0,Fl.concatBytes)((0,Fl.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=n,s=Math.ceil(r/i);if(s>255)throw new Error("Invalid xmd length");const a=(0,Fl.concatBytes)(t,Kl(t.length,1)),c=Kl(0,o),u=Kl(r,2),h=new Array(s),l=n((0,Fl.concatBytes)(c,e,u,Kl(0,1),a));h[0]=n((0,Fl.concatBytes)(l,Kl(1,1),a));for(let e=1;e<=s;e++){const t=[Wl(l,h[e-1]),Kl(e+1,1),a];h[e]=n((0,Fl.concatBytes)(...t))}return(0,Fl.concatBytes)(...h).slice(0,r)}function Jl(e,t,r,n,i){if(Vl(e),Vl(t),Zl(r),t.length>255){const e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,Fl.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(Kl(r,2)).update(t).update(Kl(t.length,1)).digest()}function Yl(e,t,r){(0,Fl.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:o,hash:s,expand:a,DST:c}=r;Vl(e),Zl(t);const u=function(e){if((0,Fl.isBytes)(e))return e;if("string"==typeof e)return(0,Fl.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(c),h=n.toString(2).length,l=Math.ceil((h+i)/8),f=t*o*l;let d;if("xmd"===a)d=Gl(e,u,f,s);else if("xof"===a)d=Jl(e,u,f,i,s);else{if("_internal_pass"!==a)throw new Error('expand must be "xmd" or "xof"');d=e}const p=new Array(t);for(let e=0;e<t;e++){const t=new Array(o);for(let r=0;r<o;r++){const i=l*(r+e*o),s=d.subarray(i,i+l);t[r]=(0,Dl.mod)(ql(s),n)}p[e]=t}return p}zl.expand_message_xmd=Gl,zl.expand_message_xof=Jl,zl.hash_to_field=Yl,zl.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,o,s,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(i,o),n=e.mul(n,e.div(s,a)),{x:t,y:n}}},zl.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const o=Yl(n,2,{...r,DST:r.DST,...i}),s=e.fromAffine(t(o[0])),a=e.fromAffine(t(o[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){const o=Yl(n,1,{...r,DST:r.encodeDST,...i}),s=e.fromAffine(t(o[0])).clearCofactor();return s.assertValidity(),s}}};var Xl={},Ql={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=kh,r=Ch;class n extends r.Hash{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(e);const i=(0,r.toBytes)(n);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(i.length>o?e.create().update(i).digest():i);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,t.exists)(this),this.iHash.update(e),this}digestInto(e){(0,t.exists)(this),(0,t.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=n;e.hmac=(e,t,r)=>new n(e,t).update(r).digest(),e.hmac.create=(e,t)=>new n(e,t)}(Ql),Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.createCurve=Xl.getHash=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const ef=Ql,tf=Ch,rf=Pl;function nf(e){return{hash:e,hmac:(t,...r)=>(0,ef.hmac)(e,t,(0,tf.concatBytes)(...r)),randomBytes:tf.randomBytes}}Xl.getHash=nf,Xl.createCurve=function(e,t){const r=t=>(0,rf.weierstrass)({...e,...nf(t)});return Object.freeze({...r(t),create:r})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const t=Ah,r=Ch,n=Vh,i=Pl,o=Zh,s=zl,a=Xl,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),l=BigInt(2),f=(e,t)=>(e+t/l)/t;function d(e){const t=c,r=BigInt(3),i=BigInt(6),o=BigInt(11),s=BigInt(22),a=BigInt(23),u=BigInt(44),h=BigInt(88),f=e*e*e%t,d=f*f*e%t,g=(0,n.pow2)(d,r,t)*d%t,y=(0,n.pow2)(g,r,t)*d%t,m=(0,n.pow2)(y,l,t)*f%t,w=(0,n.pow2)(m,o,t)*m%t,b=(0,n.pow2)(w,s,t)*w%t,v=(0,n.pow2)(b,u,t)*b%t,_=(0,n.pow2)(v,h,t)*v%t,E=(0,n.pow2)(_,u,t)*b%t,S=(0,n.pow2)(E,r,t)*d%t,A=(0,n.pow2)(S,a,t)*w%t,x=(0,n.pow2)(A,i,t)*f%t,k=(0,n.pow2)(x,l,t);if(!p.eql(p.sqr(k),e))throw new Error("Cannot find square root");return k}const p=(0,n.Field)(c,void 0,void 0,{sqrt:d});e.secp256k1=(0,a.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=u,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),c=f(s*e,t),l=f(-i*e,t);let d=(0,n.mod)(e-c*r-l*o,t),p=(0,n.mod)(-c*i-l*s,t);const g=d>a,y=p>a;if(g&&(d=t-d),y&&(p=t-p),d>a||p>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:d,k2neg:y,k2:p}}}},t.sha256);const g=BigInt(0),y=e=>"bigint"==typeof e&&g<e&&e<c,m={};function w(e,...r){let n=m[e];if(void 0===n){const r=(0,t.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,o.concatBytes)(r,r),m[e]=n}return(0,t.sha256)((0,o.concatBytes)(n,...r))}const b=e=>e.toRawBytes(!0).slice(1),v=e=>(0,o.numberToBytesBE)(e,32),_=e=>(0,n.mod)(e,c),E=e=>(0,n.mod)(e,u),S=e.secp256k1.ProjectivePoint;function A(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t),n=S.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:E(-r),bytes:b(n)}}function x(e){if(!y(e))throw new Error("bad x: need 0 < x < p");const t=_(e*e);let r=d(_(t*e+BigInt(7)));r%l!==g&&(r=_(-r));const n=new S(e,r,h);return n.assertValidity(),n}function k(...e){return E((0,o.bytesToNumberBE)(w("BIP0340/challenge",...e)))}function B(e){return A(e).bytes}function I(e,t,n=(0,r.randomBytes)(32)){const i=(0,o.ensureBytes)("message",e),{bytes:s,scalar:a}=A(t),c=(0,o.ensureBytes)("auxRand",n,32),u=v(a^(0,o.bytesToNumberBE)(w("BIP0340/aux",c))),h=w("BIP0340/nonce",u,s,i),l=E((0,o.bytesToNumberBE)(h));if(l===g)throw new Error("sign failed: k is zero");const{bytes:f,scalar:d}=A(l),p=k(f,s,i),y=new Uint8Array(64);if(y.set(f,0),y.set(v(E(d+p*a)),32),!T(y,i,s))throw new Error("sign: Invalid signature produced");return y}function T(e,t,r){const n=(0,o.ensureBytes)("signature",e,64),i=(0,o.ensureBytes)("message",t),s=(0,o.ensureBytes)("publicKey",r,32);try{const e=x((0,o.bytesToNumberBE)(s)),t=(0,o.bytesToNumberBE)(n.subarray(0,32));if(!y(t))return!1;const r=(0,o.bytesToNumberBE)(n.subarray(32,64));if(!(e=>"bigint"==typeof e&&g<e&&e<u)(r))return!1;const a=k(v(t),b(e),i),c=((e,t,r)=>S.BASE.multiplyAndAddUnsafe(e,t,r))(e,r,E(-a));return!(!c||!c.hasEvenY()||c.toAffine().x!==t)}catch(e){return!1}}e.schnorr={getPublicKey:B,sign:I,verify:T,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:x,pointToBytes:b,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:w,mod:n.mod}};const R=(()=>(0,s.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),O=(()=>(0,i.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}))(),L=(()=>(0,s.createHasher)(e.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=O(p.create(e[0]));return R(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}))();e.hashToCurve=L.hashToCurve,e.encodeToCurve=L.encodeToCurve}(Sh),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var t=Sh;Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return t.secp256k1}})}(Eh),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;const t=jr,r=Eh;e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=r.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=r.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=t.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=t.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=t.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=t.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16}(_h);var of={};Object.defineProperty(of,"__esModule",{value:!0}),of.GWEI_TO_WEI=void 0,of.GWEI_TO_WEI=BigInt(1e9);var sf={},af={};function cf(e){if(Array.isArray(e)){const t=[];let r=0;for(let n=0;n<e.length;n++){const i=cf(e[n]);t.push(i),r+=i.length}return wf(lf(r,192),...t)}const t=Ef(e);return 1===t.length&&t[0]<128?t:wf(lf(t.length,128),t)}function uf(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function hf(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return yf(gf(e))}function lf(e,t){if(e<56)return Uint8Array.from([e+t]);const r=vf(e),n=vf(t+55+r.length/2);return Uint8Array.from(mf(n+r))}function ff(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=df(Ef(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function df(e){let t,r,n,i,o;const s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,n=128===a?Uint8Array.from([]):uf(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=hf(uf(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=uf(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(a<=247){for(t=a-191,i=uf(e,1,t);i.length;)o=df(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}{if(r=a-246,t=hf(uf(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(i=uf(e,r,n);i.length;)o=df(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(n)}}}Object.defineProperty(af,"__esModule",{value:!0}),af.RLP=af.utils=af.decode=af.encode=void 0,af.encode=cf,af.decode=ff;const pf=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function gf(e){let t="";for(let r=0;r<e.length;r++)t+=pf[e[r]];return t}function yf(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function mf(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=yf(e.slice(n,n+2))}return t}function wf(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}function bf(e){return(new TextEncoder).encode(e)}function vf(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function _f(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function Ef(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return _f(e)?mf(function(e){return e.length%2?`0${e}`:e}("string"!=typeof(t=e)?t:_f(t)?t.slice(2):t)):bf(e);var t;if("number"==typeof e||"bigint"==typeof e)return e?mf(vf(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}af.utils={bytesToHex:gf,concatBytes:wf,hexToBytes:mf,utf8ToBytes:bf},af.RLP={encode:cf,decode:ff};var Sf={},Af={},xf={};Object.defineProperty(xf,"__esModule",{value:!0}),xf.add5L=xf.add5H=xf.add4H=xf.add4L=xf.add3H=xf.add3L=xf.add=xf.rotlBL=xf.rotlBH=xf.rotlSL=xf.rotlSH=xf.rotr32L=xf.rotr32H=xf.rotrBL=xf.rotrBH=xf.rotrSL=xf.rotrSH=xf.shrSL=xf.shrSH=xf.toBig=xf.split=xf.fromBig=void 0;const kf=BigInt(2**32-1),Bf=BigInt(32);function If(e,t=!1){return t?{h:Number(e&kf),l:Number(e>>Bf&kf)}:{h:0|Number(e>>Bf&kf),l:0|Number(e&kf)}}function Tf(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=If(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}xf.fromBig=If,xf.split=Tf;const Rf=(e,t)=>BigInt(e>>>0)<<Bf|BigInt(t>>>0);xf.toBig=Rf;const Of=(e,t,r)=>e>>>r;xf.shrSH=Of;const Lf=(e,t,r)=>e<<32-r|t>>>r;xf.shrSL=Lf;const Mf=(e,t,r)=>e>>>r|t<<32-r;xf.rotrSH=Mf;const Cf=(e,t,r)=>e<<32-r|t>>>r;xf.rotrSL=Cf;const Pf=(e,t,r)=>e<<64-r|t>>>r-32;xf.rotrBH=Pf;const Nf=(e,t,r)=>e>>>r-32|t<<64-r;xf.rotrBL=Nf;const Uf=(e,t)=>t;xf.rotr32H=Uf;const jf=(e,t)=>e;xf.rotr32L=jf;const $f=(e,t,r)=>e<<r|t>>>32-r;xf.rotlSH=$f;const Hf=(e,t,r)=>t<<r|e>>>32-r;xf.rotlSL=Hf;const zf=(e,t,r)=>t<<r-32|e>>>64-r;xf.rotlBH=zf;const Df=(e,t,r)=>e<<r-32|t>>>64-r;function Ff(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}xf.rotlBL=Df,xf.add=Ff;const qf=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);xf.add3L=qf;const Kf=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;xf.add3H=Kf;const Wf=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);xf.add4L=Wf;const Vf=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;xf.add4H=Vf;const Zf=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);xf.add5L=Zf;const Gf=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;xf.add5H=Gf;const Jf={fromBig:If,split:Tf,toBig:Rf,shrSH:Of,shrSL:Lf,rotrSH:Mf,rotrSL:Cf,rotrBH:Pf,rotrBL:Nf,rotr32H:Uf,rotr32L:jf,rotlSH:$f,rotlSL:Hf,rotlBH:zf,rotlBL:Df,add:Ff,add3L:qf,add3H:Kf,add4L:Wf,add4H:Vf,add5H:Gf,add5L:Zf};xf.default=Jf,Object.defineProperty(Af,"__esModule",{value:!0}),Af.shake256=Af.shake128=Af.keccak_512=Af.keccak_384=Af.keccak_256=Af.keccak_224=Af.sha3_512=Af.sha3_384=Af.sha3_256=Af.sha3_224=Af.Keccak=Af.keccakP=void 0;const Yf=kh,Xf=xf,Qf=Ch,[ed,td,rd]=[[],[],[]],nd=BigInt(0),id=BigInt(1),od=BigInt(2),sd=BigInt(7),ad=BigInt(256),cd=BigInt(113);for(let e=0,t=id,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],ed.push(2*(5*n+r)),td.push((e+1)*(e+2)/2%64);let i=nd;for(let e=0;e<7;e++)t=(t<<id^(t>>sd)*cd)%ad,t&od&&(i^=id<<(id<<BigInt(e))-id);rd.push(i)}const[ud,hd]=(0,Xf.split)(rd,!0),ld=(e,t,r)=>r>32?(0,Xf.rotlBH)(e,t,r):(0,Xf.rotlSH)(e,t,r),fd=(e,t,r)=>r>32?(0,Xf.rotlBL)(e,t,r):(0,Xf.rotlSL)(e,t,r);function dd(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=ld(o,s,1)^r[n],c=fd(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=td[r],o=ld(t,i,n),s=fd(t,i,n),a=ed[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=ud[n],e[1]^=hd[n]}r.fill(0)}Af.keccakP=dd;class pd extends Qf.Hash{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Yf.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Qf.u32)(this.state)}keccak(){dd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,Yf.exists)(this);const{blockLen:t,state:r}=this,n=(e=(0,Qf.toBytes)(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,Yf.exists)(this,!1),(0,Yf.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Yf.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Yf.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new pd(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}Af.Keccak=pd;const gd=(e,t,r)=>(0,Qf.wrapConstructor)((()=>new pd(t,e,r)));Af.sha3_224=gd(6,144,28),Af.sha3_256=gd(6,136,32),Af.sha3_384=gd(6,104,48),Af.sha3_512=gd(6,72,64),Af.keccak_224=gd(1,144,28),Af.keccak_256=gd(1,136,32),Af.keccak_384=gd(1,104,48),Af.keccak_512=gd(1,72,64);const yd=(e,t,r)=>(0,Qf.wrapXOFConstructorWithOpts)(((n={})=>new pd(t,e,void 0===n.dkLen?r:n.dkLen,!0)));function md(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}Af.shake128=yd(31,168,16),Af.shake256=yd(31,136,32);var wd={exports:{}};!function(e,t){var r=Pr&&Pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=r(kh),i=Ch,o=n.default.bool;t.assertBool=o;const s=n.default.bytes;t.assertBytes=s;var a=Ch;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return a.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return a.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return a.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(n.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r=md.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()}(wd,wd.exports),Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.keccak512=Sf.keccak384=Sf.keccak256=Sf.keccak224=void 0;const bd=Af,vd=wd.exports;Sf.keccak224=(0,vd.wrapHash)(bd.keccak_224),Sf.keccak256=(()=>{const e=(0,vd.wrapHash)(bd.keccak_256);return e.create=bd.keccak_256.create,e})(),Sf.keccak384=(0,vd.wrapHash)(bd.keccak_384),Sf.keccak512=(0,vd.wrapHash)(bd.keccak_512);var _d={},Ed={},Sd={};function Ad(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.isHexString=Sd.getKeys=Sd.fromAscii=Sd.fromUtf8=Sd.toAscii=Sd.arrayContainsArray=Sd.getBinarySize=Sd.padToEven=Sd.stripHexPrefix=Sd.isHexPrefixed=void 0,Sd.isHexPrefixed=Ad;function xd(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Sd.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return Ad(e)?e.slice(2):e},Sd.padToEven=xd,Sd.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return C.byteLength(e,"utf8")},Sd.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},Sd.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},Sd.fromUtf8=function(e){return`0x${xd(C.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},Sd.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},Sd.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let o=e[i][t];if(!0!==r||o){if("string"!=typeof o)throw new Error("invalid abi - expected type 'string', received "+typeof o)}else o="";n.push(o)}return n},Sd.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)},Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.assertIsString=Ed.assertIsArray=Ed.assertIsBuffer=Ed.assertIsHexString=void 0;const kd=Sd;Ed.assertIsHexString=function(e){if(!(0,kd.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};Ed.assertIsBuffer=function(e){if(!C.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};Ed.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};Ed.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;const t=Ed,r=Sd;e.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};e.intToBuffer=function(t){const n=(0,e.intToHex)(t);return C.from((0,r.padToEven)(n.slice(2)),"hex")};e.zeros=function(e){return C.allocUnsafe(e).fill(0)};const n=function(t,r,n){const i=(0,e.zeros)(r);return n?t.length<r?(t.copy(i),i):t.slice(0,r):t.length<r?(t.copy(i,r-t.length),i):t.slice(-r)};e.setLengthLeft=function(e,r){return(0,t.assertIsBuffer)(e),n(e,r,!1)};e.setLengthRight=function(e,r){return(0,t.assertIsBuffer)(e),n(e,r,!0)};const i=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};e.unpadBuffer=function(e){return(0,t.assertIsBuffer)(e),i(e)};e.unpadArray=function(e){return(0,t.assertIsArray)(e),i(e)};e.unpadHexString=function(e){return(0,t.assertIsHexString)(e),e=(0,r.stripHexPrefix)(e),"0x"+i(e)};e.toBuffer=function(t){if(null==t)return C.allocUnsafe(0);if(C.isBuffer(t))return C.from(t);if(Array.isArray(t)||t instanceof Uint8Array)return C.from(t);if("string"==typeof t){if(!(0,r.isHexString)(t))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return C.from((0,r.padToEven)((0,r.stripHexPrefix)(t)),"hex")}if("number"==typeof t)return(0,e.intToBuffer)(t);if("bigint"==typeof t){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),C.from(e,"hex")}if(t.toArray)return C.from(t.toArray());if(t.toBuffer)return C.from(t.toBuffer());throw new Error("invalid type")};function o(t){const r=(0,e.bufferToHex)(t);return"0x"===r?BigInt(0):BigInt(r)}function s(t){return(0,e.toBuffer)("0x"+t.toString(16))}e.bufferToHex=function(t){return"0x"+(t=(0,e.toBuffer)(t)).toString("hex")},e.bufferToBigInt=o,e.bigIntToBuffer=s;e.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};e.fromSigned=function(e){return BigInt.asIntN(256,o(e))};e.toUnsigned=function(e){return s(BigInt.asUintN(256,e))};e.addHexPrefix=function(e){return"string"!=typeof e||(0,r.isHexPrefixed)(e)?e:"0x"+e},e.short=function(e,t=50){const r=C.isBuffer(e)?e.toString("hex"):e;return r.length<=t?r:r.slice(0,t)+"…"};e.toUtf8=function(e){if((e=(0,r.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return C.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};e.baToJSON=function(t){if(C.isBuffer(t))return`0x${t.toString("hex")}`;if(t instanceof Array){const r=[];for(let n=0;n<t.length;n++)r.push((0,e.baToJSON)(t[n]));return r}};e.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},e.arrToBufArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):C.from(t)},e.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};e.bigIntToHex=e=>"0x"+e.toString(16),e.bigIntToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)(s(t))},e.intToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)((0,e.intToBuffer)(t))}}(_d),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;const t=af,r=Sf,n=Eh,i=wd.exports,o=_d,s=_h,a=Ed,c=Sd,u=BigInt(0);class h{constructor(e=u,t=u,r=s.KECCAK256_RLP,n=s.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new h(void 0!==t?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):void 0,void 0!==r?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):void 0,void 0!==n?(0,o.toBuffer)(n):void 0,void 0!==i?(0,o.toBuffer)(i):void 0)}static fromRlpSerializedAccount(e){const r=(0,o.arrToBufArr)(t.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)}static fromValuesArray(e){const[t,r,n,i]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return C.from(t.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(s.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(s.KECCAK256_NULL)}}e.Account=h;e.isValidAddress=function(e){try{(0,a.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};e.toChecksumAddress=function(e,t){(0,a.assertIsHexString)(e);const n=(0,c.stripHexPrefix)(e).toLowerCase();let s="";if(void 0!==t){s=(0,o.bufferToBigInt)((0,o.toBuffer)(t)).toString()+"0x"}const u=C.from(s+n,"utf8"),h=(0,i.bytesToHex)((0,r.keccak256)(u));let l="0x";for(let e=0;e<n.length;e++)parseInt(h[e],16)>=8?l+=n[e].toUpperCase():l+=n[e];return l};e.isValidChecksumAddress=function(t,r){return(0,e.isValidAddress)(t)&&(0,e.toChecksumAddress)(t,r)===t};e.generateAddress=function(e,n){return(0,a.assertIsBuffer)(e),(0,a.assertIsBuffer)(n),(0,o.bufferToBigInt)(n)===BigInt(0)?C.from((0,r.keccak256)(t.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):C.from((0,r.keccak256)(t.RLP.encode((0,o.bufArrToArr)([e,n])))).slice(-20)};e.generateAddress2=function(e,t,n){if((0,a.assertIsBuffer)(e),(0,a.assertIsBuffer)(t),(0,a.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");const i=(0,r.keccak256)(C.concat([C.from("ff","hex"),e,t,(0,r.keccak256)(n)]));return(0,o.toBuffer)(i).slice(-20)};e.isValidPrivate=function(e){return n.secp256k1.utils.isValidPrivateKey(e)};e.isValidPublic=function(e,t=!1){if((0,a.assertIsBuffer)(e),64===e.length)try{return n.secp256k1.ProjectivePoint.fromHex(C.concat([C.from([4]),e])),!0}catch(e){return!1}if(!t)return!1;try{return n.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};e.pubToAddress=function(e,t=!1){if((0,a.assertIsBuffer)(e),t&&64!==e.length&&(e=C.from(n.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return C.from((0,r.keccak256)(e)).slice(-20)},e.publicToAddress=e.pubToAddress;e.privateToPublic=function(e){return(0,a.assertIsBuffer)(e),C.from(n.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};e.privateToAddress=function(t){return(0,e.publicToAddress)((0,e.privateToPublic)(t))};e.importPublic=function(e){return(0,a.assertIsBuffer)(e),64!==e.length&&(e=C.from(n.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};e.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function l(e){const[t,r,n,i]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?s.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(i).length?s.KECCAK256_NULL:i]}e.isZeroAddress=function(t){try{(0,a.assertIsString)(t)}catch(e){return!1}return(0,e.zeroAddress)()===t},e.accountBodyFromSlim=l;const f=new Uint8Array(0);e.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,o.arrToBufArr)(n).equals(s.KECCAK256_RLP)?f:n,(0,o.arrToBufArr)(i).equals(s.KECCAK256_NULL)?f:i]},e.accountBodyToRLP=function(e,r=!0){const n=r?l(e):e;return(0,o.arrToBufArr)(t.RLP.encode(n))}}(sf);var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Address=void 0;const Id=sf,Td=_d;class Rd{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new Rd((0,Td.zeros)(20))}static fromString(e){if(!(0,Id.isValidAddress)(e))throw new Error("Invalid address");return new Rd((0,Td.toBuffer)(e))}static fromPublicKey(e){if(!C.isBuffer(e))throw new Error("Public key should be Buffer");const t=(0,Id.pubToAddress)(e);return new Rd(t)}static fromPrivateKey(e){if(!C.isBuffer(e))throw new Error("Private key should be Buffer");const t=(0,Id.privateToAddress)(e);return new Rd(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new Rd((0,Id.generateAddress)(e.buf,(0,Td.bigIntToBuffer)(t)))}static generate2(e,t,r){if(!C.isBuffer(t))throw new Error("Expected salt to be a Buffer");if(!C.isBuffer(r))throw new Error("Expected initCode to be a Buffer");return new Rd((0,Id.generateAddress2)(e.buf,t,r))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(Rd.zero())}isPrecompileOrSystemAddress(){const e=(0,Td.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return C.from(this.buf)}}Bd.Address=Rd;var Od={},Ld={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;const t=_d,r=Sd;var n;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(n=e.TypeOutput||(e.TypeOutput={})),e.toType=function(e,i){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!(0,r.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const o=(0,t.toBuffer)(e);switch(i){case n.Buffer:return o;case n.BigInt:return(0,t.bufferToBigInt)(o);case n.Number:{const e=(0,t.bufferToBigInt)(o);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case n.PrefixedHexString:return(0,t.bufferToHex)(o);default:throw new Error("unknown outputType")}}}(Ld),Object.defineProperty(Od,"__esModule",{value:!0}),Od.Withdrawal=void 0;const Md=Bd,Cd=_d,Pd=Ld;class Nd{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:n,amount:i}=e,o=(0,Pd.toType)(t,Pd.TypeOutput.BigInt),s=(0,Pd.toType)(r,Pd.TypeOutput.BigInt),a=new Md.Address((0,Pd.toType)(n,Pd.TypeOutput.Buffer)),c=(0,Pd.toType)(i,Pd.TypeOutput.BigInt);return new Nd(o,s,a,c)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return Nd.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:t,validatorIndex:r,address:n,amount:i}=e,o=(0,Pd.toType)(t,Pd.TypeOutput.BigInt)===BigInt(0)?C.alloc(0):(0,Pd.toType)(t,Pd.TypeOutput.Buffer),s=(0,Pd.toType)(r,Pd.TypeOutput.BigInt)===BigInt(0)?C.alloc(0):(0,Pd.toType)(r,Pd.TypeOutput.Buffer);let a;a=n instanceof Md.Address?n.buf:(0,Pd.toType)(n,Pd.TypeOutput.Buffer);return[o,s,a,(0,Pd.toType)(i,Pd.TypeOutput.BigInt)===BigInt(0)?C.alloc(0):(0,Pd.toType)(i,Pd.TypeOutput.Buffer)]}raw(){return Nd.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,Cd.bigIntToHex)(this.index),validatorIndex:(0,Cd.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,Cd.bigIntToHex)(this.amount)}}}Od.Withdrawal=Nd;var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.hashPersonalMessage=Ud.isValidSignature=Ud.fromRpcSig=Ud.toCompactSig=Ud.toRpcSig=Ud.ecrecover=Ud.ecsign=void 0;const jd=Sf,$d=Eh,Hd=_d,zd=_h,Dd=Ed;function Fd(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function qd(e){return e===BigInt(0)||e===BigInt(1)}Ud.ecsign=function(e,t,r){const n=$d.secp256k1.sign(e,t),i=n.toCompactRawBytes();return{r:C.from(i.slice(0,32)),s:C.from(i.slice(32,64)),v:void 0===r?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2)}};Ud.ecrecover=function(e,t,r,n,i){const o=C.concat([(0,Hd.setLengthLeft)(r,32),(0,Hd.setLengthLeft)(n,32)],64),s=Fd(t,i);if(!qd(s))throw new Error("Invalid signature v value");const a=$d.secp256k1.Signature.fromCompact(o).addRecoveryBit(Number(s)).recoverPublicKey(e);return C.from(a.toRawBytes(!1).slice(1))};Ud.toRpcSig=function(e,t,r,n){if(!qd(Fd(e,n)))throw new Error("Invalid signature v value");return(0,Hd.bufferToHex)(C.concat([(0,Hd.setLengthLeft)(t,32),(0,Hd.setLengthLeft)(r,32),(0,Hd.toBuffer)(e)]))};Ud.toCompactSig=function(e,t,r,n){if(!qd(Fd(e,n)))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=C.from(r),i[0]|=128),(0,Hd.bufferToHex)(C.concat([(0,Hd.setLengthLeft)(t,32),(0,Hd.setLengthLeft)(i,32)]))};Ud.fromRpcSig=function(e){const t=(0,Hd.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,Hd.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,Hd.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};Ud.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!qd(Fd(e,i)))return!1;const o=(0,Hd.bufferToBigInt)(t),s=(0,Hd.bufferToBigInt)(r);return!(o===BigInt(0)||o>=zd.SECP256K1_ORDER||s===BigInt(0)||s>=zd.SECP256K1_ORDER)&&!(n&&s>=zd.SECP256K1_ORDER_DIV_2)};Ud.hashPersonalMessage=function(e){(0,Dd.assertIsBuffer)(e);const t=C.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return C.from((0,jd.keccak256)(C.concat([t,e])))};var Kd={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0;e.hasTerminator=e=>e.length>0&&16===e[e.length-1];e.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};e.nibblesToCompactBytes=t=>{let r=0;(0,e.hasTerminator)(t)&&(r=1,t=t.subarray(0,t.length-1));const n=new Uint8Array(t.length/2+1);return n[0]=r<<5,1&~t.length||(n[0]|=16,n[0]|=t[0],t=t.subarray(1)),(0,e.nibblesToBytes)(t,n.subarray(1)),n};e.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};e.compactBytesToNibbles=t=>{if(0===t.length)return t;let r=(0,e.bytesToNibbles)(t);r[0]<2&&(r=r.subarray(0,r.length-1));const n=2-(1&r[0]);return r.subarray(n)}}(Kd);var Wd={},Vd=Nr(Be);Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.AsyncEventEmitter=void 0;const Zd=Vd;class Gd extends Zd.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let o=i._events[e]??[];return void 0===n&&"function"==typeof r&&(n=r,r=void 0),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=void 0),o=Array.isArray(o)?o:[o],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,o.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,o){r.removeListener(e,n),t(i,o)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,o,s=this._events[e]??[];const a="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),o=s.length,i=s.length;i--;)if(s[i]===t){o=i+a;break}return s.splice(o,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}Wd.AsyncEventEmitter=Gd;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.Lock=void 0;Jd.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}};var Yd={},Xd={};function Qd(){throw new Error("setTimeout has not been defined")}function ep(){throw new Error("clearTimeout has not been defined")}var tp=Qd,rp=ep;function np(e){if(tp===setTimeout)return setTimeout(e,0);if((tp===Qd||!tp)&&setTimeout)return tp=setTimeout,setTimeout(e,0);try{return tp(e,0)}catch(t){try{return tp.call(null,e,0)}catch(t){return tp.call(this,e,0)}}}"function"==typeof b.setTimeout&&(tp=setTimeout),"function"==typeof b.clearTimeout&&(rp=clearTimeout);var ip,op=[],sp=!1,ap=-1;function cp(){sp&&ip&&(sp=!1,ip.length?op=ip.concat(op):ap=-1,op.length&&up())}function up(){if(!sp){var e=np(cp);sp=!0;for(var t=op.length;t;){for(ip=op,op=[];++ap<t;)ip&&ip[ap].run();ap=-1,t=op.length}ip=null,sp=!1,function(e){if(rp===clearTimeout)return clearTimeout(e);if((rp===ep||!rp)&&clearTimeout)return rp=clearTimeout,clearTimeout(e);try{return rp(e)}catch(t){try{return rp.call(null,e)}catch(t){return rp.call(this,e)}}}(e)}}function hp(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];op.push(new lp(e,t)),1!==op.length||sp||np(up)}function lp(e,t){this.fun=e,this.array=t}lp.prototype.run=function(){this.fun.apply(null,this.array)};function fp(){}var dp=fp,pp=fp,gp=fp,yp=fp,mp=fp,wp=fp,bp=fp;var vp=b.performance||{},_p=vp.now||vp.mozNow||vp.msNow||vp.oNow||vp.webkitNow||function(){return(new Date).getTime()};var Ep=new Date;var Sp,Ap,xp={nextTick:hp,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:dp,addListener:pp,once:gp,off:yp,removeListener:mp,removeAllListeners:wp,emit:bp,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*_p.call(vp),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ep)/1e3}},kp=Pp(b.fetch)&&Pp(b.ReadableStream);function Bp(e){Ap||(Ap=new b.XMLHttpRequest).open("GET",b.location.host?"/":"https://example.com");try{return Ap.responseType=e,Ap.responseType===e}catch(e){return!1}}var Ip=void 0!==b.ArrayBuffer,Tp=Ip&&Pp(b.ArrayBuffer.prototype.slice),Rp=Ip&&Bp("arraybuffer"),Op=!kp&&Tp&&Bp("ms-stream"),Lp=!kp&&Ip&&Bp("moz-chunked-arraybuffer"),Mp=Pp(Ap.overrideMimeType),Cp=Pp(b.VBArray);function Pp(e){return"function"==typeof e}Ap=null;var Np="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Up=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},jp=/%[sdj%]/g;function $p(e){if(!tg(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(qp(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(jp,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])Xp(s)||!og(s)?o+=" "+s:o+=" "+qp(s);return o}function Hp(e,t){if(ng(b.process))return function(){return Hp(e,t).apply(this,arguments)};if(!0===xp.noDeprecation)return e;var r=!1;return function(){if(!r){if(xp.throwDeprecation)throw new Error(t);xp.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var zp,Dp={};function Fp(e){if(ng(zp)&&(zp=xp.env.NODE_DEBUG||""),e=e.toUpperCase(),!Dp[e])if(new RegExp("\\b"+e+"\\b","i").test(zp)){Dp[e]=function(){var t=$p.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Dp[e]=function(){};return Dp[e]}function qp(e,t){var r={seen:[],stylize:Wp};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Yp(t)?r.showHidden=t:t&&gg(r,t),ng(r.showHidden)&&(r.showHidden=!1),ng(r.depth)&&(r.depth=2),ng(r.colors)&&(r.colors=!1),ng(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Kp),Vp(r,e,r.depth)}function Kp(e,t){var r=qp.styles[t];return r?"["+qp.colors[r][0]+"m"+e+"["+qp.colors[r][1]+"m":e}function Wp(e,t){return e}function Vp(e,t,r){if(e.customInspect&&t&&cg(t.inspect)&&t.inspect!==qp&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return tg(n)||(n=Vp(e,n,r)),n}var i=function(e,t){if(ng(t))return e.stylize("undefined","undefined");if(tg(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(eg(t))return e.stylize(""+t,"number");if(Yp(t))return e.stylize(""+t,"boolean");if(Xp(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),ag(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Zp(t);if(0===o.length){if(cg(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(ig(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(sg(t))return e.stylize(Date.prototype.toString.call(t),"date");if(ag(t))return Zp(t)}var c,u="",h=!1,l=["{","}"];(Jp(t)&&(h=!0,l=["[","]"]),cg(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return ig(t)&&(u=" "+RegExp.prototype.toString.call(t)),sg(t)&&(u=" "+Date.prototype.toUTCString.call(t)),ag(t)&&(u=" "+Zp(t)),0!==o.length||h&&0!=t.length?r<0?ig(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=h?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)yg(t,String(s))?o.push(Gp(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Gp(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return Gp(e,t,r,s,n,h)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,l)):l[0]+u+l[1]}function Zp(e){return"["+Error.prototype.toString.call(e)+"]"}function Gp(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),yg(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=Xp(r)?Vp(e,c.value,null):Vp(e,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),ng(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Jp(e){return Array.isArray(e)}function Yp(e){return"boolean"==typeof e}function Xp(e){return null===e}function Qp(e){return null==e}function eg(e){return"number"==typeof e}function tg(e){return"string"==typeof e}function rg(e){return"symbol"==typeof e}function ng(e){return void 0===e}function ig(e){return og(e)&&"[object RegExp]"===lg(e)}function og(e){return"object"==typeof e&&null!==e}function sg(e){return og(e)&&"[object Date]"===lg(e)}function ag(e){return og(e)&&("[object Error]"===lg(e)||e instanceof Error)}function cg(e){return"function"==typeof e}function ug(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function hg(e){return C.isBuffer(e)}function lg(e){return Object.prototype.toString.call(e)}function fg(e){return e<10?"0"+e.toString(10):e.toString(10)}qp.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},qp.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var dg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pg(){console.log("%s - %s",function(){var e=new Date,t=[fg(e.getHours()),fg(e.getMinutes()),fg(e.getSeconds())].join(":");return[e.getDate(),dg[e.getMonth()],t].join(" ")}(),$p.apply(null,arguments))}function gg(e,t){if(!t||!og(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function yg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var mg="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function wg(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(mg&&e[mg]){var t;if("function"!=typeof(t=e[mg]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,mg,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),mg&&Object.defineProperty(t,mg,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,Up(e))}function bg(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function vg(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return n.apply(i,arguments)};e.apply(this,t).then((function(e){xp.nextTick(o.bind(null,null,e))}),(function(e){xp.nextTick(bg.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Up(e)),t}wg.custom=mg;var _g={inherits:Np,_extend:gg,log:pg,isBuffer:hg,isPrimitive:ug,isFunction:cg,isError:ag,isDate:sg,isObject:og,isRegExp:ig,isUndefined:ng,isSymbol:rg,isString:tg,isNumber:eg,isNullOrUndefined:Qp,isNull:Xp,isBoolean:Yp,isArray:Jp,inspect:qp,deprecate:Hp,format:$p,debuglog:Fp,promisify:wg,callbackify:vg},Eg=Object.freeze({__proto__:null,format:$p,deprecate:Hp,debuglog:Fp,inspect:qp,isArray:Jp,isBoolean:Yp,isNull:Xp,isNullOrUndefined:Qp,isNumber:eg,isString:tg,isSymbol:rg,isUndefined:ng,isRegExp:ig,isObject:og,isDate:sg,isError:ag,isFunction:cg,isPrimitive:ug,isBuffer:hg,log:pg,inherits:Np,_extend:gg,promisify:wg,callbackify:vg,default:_g});function Sg(){this.head=null,this.tail=null,this.length=0}Sg.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},Sg.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},Sg.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},Sg.prototype.clear=function(){this.head=this.tail=null,this.length=0},Sg.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},Sg.prototype.concat=function(e){if(0===this.length)return C.alloc(0);if(1===this.length)return this.head.data;for(var t=C.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var Ag=C.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function xg(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!Ag(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Bg;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Ig;break;default:return void(this.write=kg)}this.charBuffer=new C(6),this.charReceived=0,this.charLength=0}function kg(e){return e.toString(this.encoding)}function Bg(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Ig(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}xg.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},xg.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},xg.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},Og.ReadableState=Rg;var Tg=Fp("stream");function Rg(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof oy&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Sg,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new xg(e.encoding),this.encoding=e.encoding)}function Og(e){if(!(this instanceof Og))return new Og(e);this._readableState=new Rg(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),_e.call(this)}function Lg(e,t,r,n,i){var o=function(e,t){var r=null;C.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Pg(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Pg(e))),function(e,t){t.readingMore||(t.readingMore=!0,hp(Ug,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}Np(Og,_e),Og.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=C.from(e,t),t=""),Lg(this,r,e,t,!1)},Og.prototype.unshift=function(e){return Lg(this,this._readableState,e,"",!0)},Og.prototype.isPaused=function(){return!1===this._readableState.flowing},Og.prototype.setEncoding=function(e){return this._readableState.decoder=new xg(e),this._readableState.encoding=e,this};var Mg=8388608;function Cg(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=Mg?e=Mg:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Pg(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Tg("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?hp(Ng,e):Ng(e))}function Ng(e){Tg("emit readable"),e.emit("readable"),Hg(e)}function Ug(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Tg("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function jg(e){Tg("readable nexttick read 0"),e.read(0)}function $g(e,t){t.reading||(Tg("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Hg(e),t.flowing&&!t.reading&&e.read(0)}function Hg(e){var t=e._readableState;for(Tg("flow",t.flowing);t.flowing&&null!==e.read(););}function zg(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=C.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function Dg(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,hp(Fg,t,e))}function Fg(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function qg(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Kg(){}function Wg(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function Vg(e,t){Object.defineProperty(this,"buffer",{get:Hp((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof oy&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?hp(i,n):i(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=Xg(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||Yg(e,r),n?hp(Jg,e,r,o,i):Jg(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ty(this)}function Zg(e){if(!(this instanceof Zg||this instanceof oy))return new Zg(e);this._writableState=new Vg(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),_e.call(this)}function Gg(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Jg(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),ey(e,t)}function Yg(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;Gg(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new ty(t)}else{for(;r;){var a=r.chunk,c=r.encoding,u=r.callback;if(Gg(e,t,!1,t.objectMode?1:a.length,a,c,u),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function Xg(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Qg(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function ey(e,t){var r=Xg(t);return r&&(0===t.pendingcb?(Qg(e,t),t.finished=!0,e.emit("finish")):Qg(e,t)),r}function ty(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Og.prototype.read=function(e){Tg("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Tg("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Dg(this):Pg(this),null;if(0===(e=Cg(e,t))&&t.ended)return 0===t.length&&Dg(this),null;var n,i=t.needReadable;return Tg("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&Tg("length less than watermark",i=!0),t.ended||t.reading?Tg("reading or ended",i=!1):i&&(Tg("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Cg(r,t))),null===(n=e>0?zg(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Dg(this)),null!==n&&this.emit("data",n),n},Og.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Og.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Tg("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||!1!==t.end?s:u;function o(e){Tg("onunpipe"),e===r&&u()}function s(){Tg("onend"),e.end()}n.endEmitted?hp(i):r.once("end",i),e.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;Tg("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Hg(e))}}(r);e.on("drain",a);var c=!1;function u(){Tg("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",u),r.removeListener("data",l),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a()}var h=!1;function l(t){Tg("ondata"),h=!1,!1!==e.write(t)||h||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==qg(n.pipes,e))&&!c&&(Tg("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function f(t){Tg("onerror",t),g(),e.removeListener("error",f),0===function(e,t){return e.listeners(t).length}(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",p),g()}function p(){Tg("onfinish"),e.removeListener("close",d),g()}function g(){Tg("unpipe"),r.unpipe(e)}return r.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(Tg("pipe resume"),r.resume()),e},Og.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=qg(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Og.prototype.on=function(e,t){var r=_e.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Pg(this):hp(jg,this))}return r},Og.prototype.addListener=Og.prototype.on,Og.prototype.resume=function(){var e=this._readableState;return e.flowing||(Tg("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,hp($g,e,t))}(this,e)),this},Og.prototype.pause=function(){return Tg("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Tg("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Og.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(Tg("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){(Tg("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){Tg("wrapped _read",t),r&&(r=!1,e.resume())},n},Og._fromList=zg,Zg.WritableState=Vg,Np(Zg,_e),Vg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Zg.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Zg.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),C.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=Kg),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),hp(t,r)}(this,r):function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):C.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),hp(n,o),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=C.from(t,r));return t}(t,r,n),C.isBuffer(r)&&(n="buffer");var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);if(t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new Wg(r,n,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Gg(e,t,!1,o,r,n,i);return s}(this,n,e,t,r)),i},Zg.prototype.cork=function(){this._writableState.corked++},Zg.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Yg(this,e))},Zg.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Zg.prototype._write=function(e,t,r){r(new Error("not implemented"))},Zg.prototype._writev=null,Zg.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,ey(e,t),r&&(t.finished?hp(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Np(oy,Og);for(var ry=Object.keys(Zg.prototype),ny=0;ny<ry.length;ny++){var iy=ry[ny];oy.prototype[iy]||(oy.prototype[iy]=Zg.prototype[iy])}function oy(e){if(!(this instanceof oy))return new oy(e);Og.call(this,e),Zg.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",sy)}function sy(){this.allowHalfOpen||this._writableState.ended||hp(ay,this)}function ay(e){e.end()}function cy(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function uy(e){if(!(this instanceof uy))return new uy(e);oy.call(this,e),this._transformState=new cy(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){hy(t,e)})):hy(t)}))}function hy(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function ly(e){if(!(this instanceof ly))return new ly(e);uy.call(this,e)}function fy(){_e.call(this)}Np(uy,oy),uy.prototype.push=function(e,t){return this._transformState.needTransform=!1,oy.prototype.push.call(this,e,t)},uy.prototype._transform=function(e,t,r){throw new Error("Not implemented")},uy.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},uy.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Np(ly,uy),ly.prototype._transform=function(e,t,r){r(null,e)},Np(fy,_e),fy.Readable=Og,fy.Writable=Zg,fy.Duplex=oy,fy.Transform=uy,fy.PassThrough=ly,fy.Stream=fy,fy.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===_e.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",c),e.on("error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};var dy=3,py=4;function gy(e,t,r){var n,i=this;if(Og.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){xp.nextTick((function(){i.emit("close")}))})),"fetch"===r){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var o,s,a=t.headers[Symbol.iterator]();o=(s=a.next()).value,!s.done;)i.headers[o[0].toLowerCase()]=o[1],i.rawHeaders.push(o[0],o[1]);var c=t.body.getReader();(n=function(){c.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new C(e.value)),n()))}))})()}else{if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(t[2])):void 0!==i.headers[r]?i.headers[r]+=", "+t[2]:i.headers[r]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!Mp){var u=i.rawHeaders["mime-type"];if(u){var h=u.match(/;\s*charset=([^;])(;|$)/);h&&(i._charset=h[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}function yy(e){var t,r=this;Zg.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new C(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!Mp;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return kp&&t?"fetch":Lp?"moz-chunked-arraybuffer":Op?"ms-stream":Rp&&e?"arraybuffer":Cp&&e?"text:vbarray":"text"}(t,n),r.on("finish",(function(){r._onFinish()}))}Np(gy,Og),gy.prototype._read=function(){},gy.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==py)break;try{r=new b.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new C(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new C(n.length),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==py||!t.response)break;r=t.response,e.push(new C(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==dy||!r)break;e.push(new C(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==dy)break;var s=new b.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new C(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r)}e._xhr.readyState===py&&"ms-stream"!==e._mode&&e.push(null)},Np(yy,Zg);var my=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];yy.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===my.indexOf(r)&&(this._headers[r]={name:e,value:t})},yy.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},yy.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},yy.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,r=e._opts,n=e._headers;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method||(t=function(){if(void 0!==Sp)return Sp;try{new b.Blob([new ArrayBuffer(1)]),Sp=!0}catch(e){Sp=!1}return Sp}()?new b.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(me(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(n["content-type"]||{}).value||""}):C.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(n).map((function(e){return[n[e].name,n[e].value]}));b.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var o=e._xhr=new b.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(t){return void xp.nextTick((function(){e.emit("error",t)}))}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach((function(e){o.setRequestHeader(n[e].name,n[e].value)})),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case dy:case py:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(t)}catch(t){return void xp.nextTick((function(){e.emit("error",t)}))}}}},yy.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},yy.prototype._connect=function(){var e=this;e._destroyed||(e._response=new gy(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},yy.prototype._write=function(e,t,r){this._body.push(e),r()},yy.prototype.abort=yy.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},yy.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),Zg.prototype.end.call(this,e,t,r)},yy.prototype.flushHeaders=function(){},yy.prototype.setTimeout=function(){},yy.prototype.setNoDelay=function(){},yy.prototype.setSocketKeepAlive=function(){};
/*! https://mths.be/punycode v1.4.1 by @mathias */
var wy=2147483647,by=/[^\x20-\x7E]/,vy=/[\x2E\u3002\uFF0E\uFF61]/g,_y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ey=Math.floor,Sy=String.fromCharCode;function Ay(e){throw new RangeError(_y[e])}function xy(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function ky(e,t,r){var n=0;for(e=r?Ey(e/700):e>>1,e+=Ey(e/t);e>455;n+=36)e=Ey(e/35);return Ey(n+36*e/(e+38))}function By(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(vy,".")).split("."),t).join(".");return n+i}(e,(function(e){return by.test(e)?"xn--"+function(e){var t,r,n,i,o,s,a,c,u,h,l,f,d,p,g,y=[];for(e=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e),f=e.length,t=128,r=0,o=72,s=0;s<f;++s)(l=e[s])<128&&y.push(Sy(l));for(n=i=y.length,i&&y.push("-");n<f;){for(a=wy,s=0;s<f;++s)(l=e[s])>=t&&l<a&&(a=l);for(a-t>Ey((wy-r)/(d=n+1))&&Ay("overflow"),r+=(a-t)*d,t=a,s=0;s<f;++s)if((l=e[s])<t&&++r>wy&&Ay("overflow"),l==t){for(c=r,u=36;!(c<(h=u<=o?1:u>=o+26?26:u-o));u+=36)g=c-h,p=36-h,y.push(Sy(xy(h+g%p,0))),c=Ey(g/p);y.push(Sy(xy(c,0))),o=ky(r,d,n==i),r=0,++n}++r,++t}return y.join("")}(e):e}))}function Iy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Ty=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Ry(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Oy(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var Ly=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function My(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var u,h,l,f,d=e[c].replace(o,"%20"),p=d.indexOf(r);p>=0?(u=d.substr(0,p),h=d.substr(p+1)):(u=d,h=""),l=decodeURIComponent(u),f=decodeURIComponent(h),Iy(i,l)?Ty(i[l])?i[l].push(f):i[l]=[i[l],f]:i[l]=f}return i}const Cy=b.URL,Py=b.URLSearchParams;var Ny={parse:Yy,resolve:rm,resolveObject:nm,fileURLToPath:Qy,format:em,Url:Uy,URL:Cy,URLSearchParams:Py};function Uy(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var jy=/^([a-z0-9.+-]+:)/i,$y=/:[0-9]*$/,Hy=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,zy=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Dy=["'"].concat(zy),Fy=["%","/","?",";","#"].concat(Dy),qy=["/","?","#"],Ky=255,Wy=/^[+a-z0-9A-Z_-]{0,63}$/,Vy=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Zy={javascript:!0,"javascript:":!0},Gy={javascript:!0,"javascript:":!0},Jy={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Yy(e,t,r){if(e&&og(e)&&e instanceof Uy)return e;var n=new Uy;return n.parse(e,t,r),n}function Xy(e,t,r,n){if(!tg(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var c=Hy.exec(a);if(c)return e.path=a,e.href=a,e.pathname=c[1],c[2]?(e.search=c[2],e.query=r?My(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var u,h,l,f,d=jy.exec(a);if(d){var p=(d=d[0]).toLowerCase();e.protocol=p,a=a.substr(d.length)}if(n||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===a.substr(0,2);!g||d&&Gy[d]||(a=a.substr(2),e.slashes=!0)}if(!Gy[d]&&(g||d&&!Jy[d])){var y,m,w=-1;for(u=0;u<qy.length;u++)-1!==(h=a.indexOf(qy[u]))&&(-1===w||h<w)&&(w=h);for(-1!==(m=-1===w?a.lastIndexOf("@"):a.lastIndexOf("@",w))&&(y=a.slice(0,m),a=a.slice(m+1),e.auth=decodeURIComponent(y)),w=-1,u=0;u<Fy.length;u++)-1!==(h=a.indexOf(Fy[u]))&&(-1===w||h<w)&&(w=h);-1===w&&(w=a.length),e.host=a.slice(0,w),a=a.slice(w),im(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var v=e.hostname.split(/\./);for(u=0,l=v.length;u<l;u++){var _=v[u];if(_&&!_.match(Wy)){for(var E="",S=0,A=_.length;S<A;S++)_.charCodeAt(S)>127?E+="x":E+=_[S];if(!E.match(Wy)){var x=v.slice(0,u),k=v.slice(u+1),B=_.match(Vy);B&&(x.push(B[1]),k.unshift(B[2])),k.length&&(a="/"+k.join(".")+a),e.hostname=x.join(".");break}}}}e.hostname.length>Ky?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=By(e.hostname)),f=e.port?":"+e.port:"";var I=e.hostname||"";e.host=I+f,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Zy[p])for(u=0,l=Dy.length;u<l;u++){var T=Dy[u];if(-1!==a.indexOf(T)){var R=encodeURIComponent(T);R===T&&(R=escape(T)),a=a.split(T).join(R)}}var O=a.indexOf("#");-1!==O&&(e.hash=a.substr(O),a=a.slice(0,O));var L=a.indexOf("?");if(-1!==L?(e.search=a.substr(L),e.query=a.substr(L+1),r&&(e.query=My(e.query)),a=a.slice(0,L)):r&&(e.search="",e.query={}),a&&(e.pathname=a),Jy[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){f=e.pathname||"";var M=e.search||"";e.path=f+M}return e.href=tm(e),e}function Qy(e){if("string"==typeof e)e=(new Uy).parse(e);else if(!(e instanceof Uy))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if("file:"!==e.protocol)throw new TypeError("The URL must be of scheme file");return function(e){const t=e.pathname;for(let e=0;e<t.length;e++)if("%"===t[e]){const r=32|t.codePointAt(e+2);if("2"===t[e+1]&&102===r)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function em(e){return tg(e)&&(e=Xy({},e)),tm(e)}function tm(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&og(e.query)&&Object.keys(e.query).length&&(s=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Oy(Ly(e),(function(n){var i=encodeURIComponent(Ry(n))+r;return Ty(e[n])?Oy(e[n],(function(e){return i+encodeURIComponent(Ry(e))})).join(t):i+encodeURIComponent(Ry(e[n]))})).join(t):n?encodeURIComponent(Ry(n))+r+encodeURIComponent(Ry(e)):""}(e.query));var a=e.search||s&&"?"+s||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||Jy[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),r+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i}function rm(e,t){return Yy(e,!1,!0).resolve(t)}function nm(e,t){return e?Yy(e,!1,!0).resolveObject(t):t}function im(e){var t=e.host,r=$y.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}Uy.prototype.parse=function(e,t,r){return Xy(this,e,t,r)},Uy.prototype.format=function(){return tm(this)},Uy.prototype.resolve=function(e){return this.resolveObject(Yy(e,!1,!0)).format()},Uy.prototype.resolveObject=function(e){if(tg(e)){var t=new Uy;t.parse(e,!1,!0),e=t}for(var r,n=new Uy,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),c=0;c<a.length;c++){var u=a[c];"protocol"!==u&&(n[u]=e[u])}return Jy[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Jy[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var f=h[l];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Gy[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g,y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=m||y||n.host&&e.pathname,b=w,v=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!Jy[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===v[0]?v[0]=n.host:v.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),w=w&&(""===r[0]||""===v[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,v=r;else if(r.length)v||(v=[]),v.pop(),v=v.concat(r),n.search=e.search,n.query=e.query;else if(!Qp(e.search))return _&&(n.hostname=n.host=v.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=e.search,n.query=e.query,Xp(n.pathname)&&Xp(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!v.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=v.slice(-1)[0],S=(n.host||e.host||v.length>1)&&("."===E||".."===E)||""===E,A=0,x=v.length;x>=0;x--)"."===(E=v[x])?v.splice(x,1):".."===E?(v.splice(x,1),A++):A&&(v.splice(x,1),A--);if(!w&&!b)for(;A--;A)v.unshift("..");!w||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),S&&"/"!==v.join("/").substr(-1)&&v.push("");var k=""===v[0]||v[0]&&"/"===v[0].charAt(0);return _&&(n.hostname=n.host=k?"":v.length?v.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(w=w||n.host&&v.length)&&!k&&v.unshift(""),v.length?n.pathname=v.join("/"):(n.pathname=null,n.path=null),Xp(n.pathname)&&Xp(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Uy.prototype.parseHost=function(){return im(this)};var om=Object.freeze({__proto__:null,parse:Yy,resolve:rm,resolveObject:nm,fileURLToPath:Qy,format:em,URL:Cy,URLSearchParams:Py,default:Ny,Url:Uy});function sm(e,t){"string"==typeof e&&(e=Yy(e));var r=-1===b.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new yy(e);return t&&a.on("response",t),a}function am(e,t){var r=sm(e,t);return r.end(),r}function cm(){}cm.defaultMaxSockets=4;var um=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],hm={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},lm={request:sm,get:am,Agent:cm,METHODS:um,STATUS_CODES:hm},fm=Nr(Object.freeze({__proto__:null,request:sm,get:am,Agent:cm,METHODS:um,STATUS_CODES:hm,default:lm}));function dm(e,t){"string"==typeof e&&(e=Yy(e));var r=-1===b.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new yy(e);return t&&a.on("response",t),a}function pm(e,t){var r=dm(e,t);return r.end(),r}function gm(){}gm.defaultMaxSockets=4;var ym=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],mm={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},wm={request:dm,get:pm,Agent:gm,METHODS:ym,STATUS_CODES:mm},bm=Nr(Object.freeze({__proto__:null,request:dm,get:pm,Agent:gm,METHODS:ym,STATUS_CODES:mm,default:wm})),vm={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function _m(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Em(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]}var Sm=Uint8Array,Am=Uint16Array,xm=Int32Array;function km(e){for(var t=e.length;--t>=0;)e[t]=0}var Bm=256,Im=286,Tm=30,Rm=15,Om=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Lm=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Mm=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Cm=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Pm=new Array(576);km(Pm);var Nm=new Array(60);km(Nm);var Um=new Array(512);km(Um);var jm=new Array(256);km(jm);var $m=new Array(29);km($m);var Hm,zm,Dm,Fm=new Array(Tm);function qm(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function Km(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Wm(e){return e<256?Um[e]:Um[256+(e>>>7)]}function Vm(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Zm(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Vm(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Gm(e,t,r){Zm(e,r[2*t],r[2*t+1])}function Jm(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function Ym(e,t,r){var n,i,o=new Array(16),s=0;for(n=1;n<=Rm;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=Jm(o[a]++,a))}}function Xm(e){var t;for(t=0;t<Im;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Tm;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Qm(e){e.bi_valid>8?Vm(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function ew(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function tw(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&ew(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!ew(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function rw(e,t,r){var n,i,o,s,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?Gm(e,i,t):(Gm(e,(o=jm[i])+Bm+1,t),0!==(s=Om[o])&&Zm(e,i-=$m[o],s),Gm(e,o=Wm(--n),r),0!==(s=Lm[o])&&Zm(e,n-=Fm[o],s))}while(a<e.last_lit);Gm(e,256,t)}function nw(e,t){var r,n,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)tw(e,o,r);i=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],tw(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,tw(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,s,a,c=t.dyn_tree,u=t.max_code,h=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=Rm;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(o=c[2*c[2*(n=e.heap[r])+1]+1]+1)>p&&(o=p,g++),c[2*n+1]=o,n>u||(e.bl_count[o]++,s=0,n>=d&&(s=f[n-d]),a=c[2*n],e.opt_len+=a*(o+s),l&&(e.static_len+=a*(h[2*n+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),n--)}}(e,t),Ym(o,u,e.bl_count)}function iw(e,t,r){var n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<c&&i===s||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4))}function ow(e,t,r){var n,i,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<c&&i===s)){if(a<u)do{Gm(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(Gm(e,i,e.bl_tree),a--),Gm(e,16,e.bl_tree),Zm(e,a-3,2)):a<=10?(Gm(e,17,e.bl_tree),Zm(e,a-3,3)):(Gm(e,18,e.bl_tree),Zm(e,a-11,7));a=0,o=i,0===s?(c=138,u=3):i===s?(c=6,u=3):(c=7,u=4)}}km(Fm);var sw=!1;function aw(e){sw||(!function(){var e,t,r,n,i,o=new Array(16);for(r=0,n=0;n<28;n++)for($m[n]=r,e=0;e<1<<Om[n];e++)jm[r++]=n;for(jm[r-1]=n,i=0,n=0;n<16;n++)for(Fm[n]=i,e=0;e<1<<Lm[n];e++)Um[i++]=n;for(i>>=7;n<Tm;n++)for(Fm[n]=i<<7,e=0;e<1<<Lm[n]-7;e++)Um[256+i++]=n;for(t=0;t<=Rm;t++)o[t]=0;for(e=0;e<=143;)Pm[2*e+1]=8,e++,o[8]++;for(;e<=255;)Pm[2*e+1]=9,e++,o[9]++;for(;e<=279;)Pm[2*e+1]=7,e++,o[7]++;for(;e<=287;)Pm[2*e+1]=8,e++,o[8]++;for(Ym(Pm,287,o),e=0;e<Tm;e++)Nm[2*e+1]=5,Nm[2*e]=Jm(e,5);Hm=new qm(Pm,Om,257,Im,Rm),zm=new qm(Nm,Lm,0,Tm,Rm),Dm=new qm(new Array(0),Mm,0,19,7)}(),sw=!0),e.l_desc=new Km(e.dyn_ltree,Hm),e.d_desc=new Km(e.dyn_dtree,zm),e.bl_desc=new Km(e.bl_tree,Dm),e.bi_buf=0,e.bi_valid=0,Xm(e)}function cw(e,t,r,n){Zm(e,0+(n?1:0),3),function(e,t,r,n){Qm(e),n&&(Vm(e,r),Vm(e,~r)),Em(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}function uw(e){Zm(e,2,3),Gm(e,256,Pm),function(e){16===e.bi_valid?(Vm(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function hw(e,t,r,n){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Bm;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),nw(e,e.l_desc),nw(e,e.d_desc),s=function(e){var t;for(iw(e,e.dyn_ltree,e.l_desc.max_code),iw(e,e.dyn_dtree,e.d_desc.max_code),nw(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Cm[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?cw(e,t,r,n):4===e.strategy||o===i?(Zm(e,2+(n?1:0),3),rw(e,Pm,Nm)):(Zm(e,4+(n?1:0),3),function(e,t,r,n){var i;for(Zm(e,t-257,5),Zm(e,r-1,5),Zm(e,n-4,4),i=0;i<n;i++)Zm(e,e.bl_tree[2*Cm[i]+1],3);ow(e,e.dyn_ltree,t-1),ow(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),rw(e,e.dyn_ltree,e.dyn_dtree)),Xm(e),n&&Qm(e)}function lw(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(jm[r]+Bm+1)]++,e.dyn_dtree[2*Wm(t)]++),e.last_lit===e.lit_bufsize-1}function fw(e,t,r,n){for(var i=65535&e,o=e>>>16&65535,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16}var dw=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();function pw(e,t,r,n){var i=dw,o=n+r;e^=-1;for(var s=n;s<o;s++)e=e>>>8^i[255&(e^t[s])];return~e}var gw,yw=-2,mw=258,ww=262,bw=103,vw=113,_w=666;function Ew(e,t){return e.msg=vm[t],t}function Sw(e){return(e<<1)-(e>4?9:0)}function Aw(e){for(var t=e.length;--t>=0;)e[t]=0}function xw(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(Em(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function kw(e,t){hw(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xw(e.strm)}function Bw(e,t){e.pending_buf[e.pending++]=t}function Iw(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Tw(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,Em(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=fw(e.adler,t,i,r):2===e.state.wrap&&(e.adler=pw(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function Rw(e,t){var r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-ww?e.strstart-(e.w_size-ww):0,u=e.window,h=e.w_mask,l=e.prev,f=e.strstart+mw,d=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(u[(r=t)+s]===p&&u[r+s-1]===d&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<f);if(n=mw-(f-o),o=f-mw,n>s){if(e.match_start=t,s=n,n>=a)break;d=u[o+s-1],p=u[o+s]}}}while((t=l[t&h])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead}function Ow(e){var t,r,n,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ww)){Em(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);t=r=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);i+=s}if(0===e.strm.avail_in)break;if(r=Tw(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ww&&0!==e.strm.avail_in)}function Lw(e,t){for(var r,n;;){if(e.lookahead<ww){if(Ow(e),e.lookahead<ww&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ww&&(e.match_length=Rw(e,r)),e.match_length>=3)if(n=lw(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=lw(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(kw(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(kw(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(kw(e,!1),0===e.strm.avail_out)?1:2}function Mw(e,t){for(var r,n,i;;){if(e.lookahead<ww){if(Ow(e),e.lookahead<ww&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ww&&(e.match_length=Rw(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=lw(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(kw(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=lw(e,0,e.window[e.strstart-1]))&&kw(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=lw(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(kw(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(kw(e,!1),0===e.strm.avail_out)?1:2}function Cw(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function Pw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Am(1146),this.dyn_dtree=new Am(122),this.bl_tree=new Am(78),Aw(this.dyn_ltree),Aw(this.dyn_dtree),Aw(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Am(16),this.heap=new Am(573),Aw(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Am(573),Aw(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Nw(e){var t=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:vw,e.adler=2===t.wrap?0:1,t.last_flush=0,aw(t),0):Ew(e,yw)}(e);return 0===t&&function(e){e.window_size=2*e.w_size,Aw(e.head),e.max_lazy_match=gw[e.level].max_lazy,e.good_match=gw[e.level].good_length,e.nice_match=gw[e.level].nice_length,e.max_chain_length=gw[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function Uw(e,t){var r,n,i,o;if(!e||!e.state||t>5||t<0)return e?Ew(e,yw):yw;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===_w&&4!==t)return Ew(e,0===e.avail_out?-5:yw);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,Bw(n,31),Bw(n,139),Bw(n,8),n.gzhead?(Bw(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Bw(n,255&n.gzhead.time),Bw(n,n.gzhead.time>>8&255),Bw(n,n.gzhead.time>>16&255),Bw(n,n.gzhead.time>>24&255),Bw(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),Bw(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Bw(n,255&n.gzhead.extra.length),Bw(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=pw(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(Bw(n,0),Bw(n,0),Bw(n,0),Bw(n,0),Bw(n,0),Bw(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),Bw(n,3),n.status=vw);else{var s=8+(n.w_bits-8<<4)<<8;s|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=vw,Iw(n,s),0!==n.strstart&&(Iw(n,e.adler>>>16),Iw(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),xw(e),i=n.pending,n.pending!==n.pending_buf_size));)Bw(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),xw(e),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Bw(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),0===o&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),xw(e),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Bw(n,o)}while(0!==o);n.gzhead.hcrc&&n.pending>i&&(e.adler=pw(e.adler,n.pending_buf,n.pending-i,i)),0===o&&(n.status=bw)}else n.status=bw;if(n.status===bw&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&xw(e),n.pending+2<=n.pending_buf_size&&(Bw(n,255&e.adler),Bw(n,e.adler>>8&255),e.adler=0,n.status=vw)):n.status=vw),0!==n.pending){if(xw(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&Sw(t)<=Sw(r)&&4!==t)return Ew(e,-5);if(n.status===_w&&0!==e.avail_in)return Ew(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&n.status!==_w){var a=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(Ow(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=lw(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(kw(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(kw(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(kw(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,n,i,o,s=e.window;;){if(e.lookahead<=mw){if(Ow(e),e.lookahead<=mw&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){o=e.strstart+mw;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=mw-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=lw(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=lw(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(kw(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(kw(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(kw(e,!1),0===e.strm.avail_out)?1:2}(n,t):gw[n.level].func(n,t);if(3!==a&&4!==a||(n.status=_w),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===a&&(1===t?uw(n):5!==t&&(cw(n,0,0,!1),3===t&&(Aw(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),xw(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(Bw(n,255&e.adler),Bw(n,e.adler>>8&255),Bw(n,e.adler>>16&255),Bw(n,e.adler>>24&255),Bw(n,255&e.total_in),Bw(n,e.total_in>>8&255),Bw(n,e.total_in>>16&255),Bw(n,e.total_in>>24&255)):(Iw(n,e.adler>>>16),Iw(n,65535&e.adler)),xw(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)}gw=[new Cw(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ow(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,kw(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-ww&&(kw(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(kw(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(kw(e,!1),e.strm.avail_out),1)})),new Cw(4,4,8,4,Lw),new Cw(4,5,16,8,Lw),new Cw(4,6,32,32,Lw),new Cw(4,4,16,16,Mw),new Cw(8,16,32,32,Mw),new Cw(8,16,128,128,Mw),new Cw(8,32,128,256,Mw),new Cw(32,128,258,1024,Mw),new Cw(32,258,258,4096,Mw)];function jw(e,t){var r,n,i,o,s,a,c,u,h,l,f,d,p,g,y,m,w,b,v,_,E,S,A,x,k;r=e.state,n=e.next_in,x=e.input,i=n+(e.avail_in-5),o=e.next_out,k=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=r.dmax,u=r.wsize,h=r.whave,l=r.wnext,f=r.window,d=r.hold,p=r.bits,g=r.lencode,y=r.distcode,m=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=g[d&m];t:for(;;){if(d>>>=v=b>>>24,p-=v,0===(v=b>>>16&255))k[o++]=65535&b;else{if(!(16&v)){if(64&v){if(32&v){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}b=g[(65535&b)+(d&(1<<v)-1)];continue t}for(_=65535&b,(v&=15)&&(p<v&&(d+=x[n++]<<p,p+=8),_+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=x[n++]<<p,p+=8,d+=x[n++]<<p,p+=8),b=y[d&w];;){if(d>>>=v=b>>>24,p-=v,16&(v=b>>>16&255)){if(E=65535&b,p<(v&=15)&&(d+=x[n++]<<p,(p+=8)<v&&(d+=x[n++]<<p,p+=8)),(E+=d&(1<<v)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=v,p-=v,E>(v=o-s)){if((v=E-v)>h&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=0,A=f,0===l){if(S+=u-v,v<_){_-=v;do{k[o++]=f[S++]}while(--v);S=o-E,A=k}}else if(l<v){if(S+=u+l-v,(v-=l)<_){_-=v;do{k[o++]=f[S++]}while(--v);if(S=0,l<_){_-=v=l;do{k[o++]=f[S++]}while(--v);S=o-E,A=k}}}else if(S+=l-v,v<_){_-=v;do{k[o++]=f[S++]}while(--v);S=o-E,A=k}for(;_>2;)k[o++]=A[S++],k[o++]=A[S++],k[o++]=A[S++],_-=3;_&&(k[o++]=A[S++],_>1&&(k[o++]=A[S++]))}else{S=o-E;do{k[o++]=k[S++],k[o++]=k[S++],k[o++]=k[S++],_-=3}while(_>2);_&&(k[o++]=k[S++],_>1&&(k[o++]=k[S++]))}break}if(64&v){e.msg="invalid distance code",r.mode=30;break e}b=y[(65535&b)+(d&(1<<v)-1)]}}break}}while(n<i&&o<a);n-=_=p>>3,d&=(1<<(p-=_<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}var $w=15,Hw=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],zw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Dw=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Fw=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function qw(e,t,r,n,i,o,s,a){var c,u,h,l,f,d,p,g,y,m=a.bits,w=0,b=0,v=0,_=0,E=0,S=0,A=0,x=0,k=0,B=0,I=null,T=0,R=new Am(16),O=new Am(16),L=null,M=0;for(w=0;w<=$w;w++)R[w]=0;for(b=0;b<n;b++)R[t[r+b]]++;for(E=m,_=$w;_>=1&&0===R[_];_--);if(E>_&&(E=_),0===_)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(v=1;v<_&&0===R[v];v++);for(E<v&&(E=v),x=1,w=1;w<=$w;w++)if(x<<=1,(x-=R[w])<0)return-1;if(x>0&&(0===e||1!==_))return-1;for(O[1]=0,w=1;w<$w;w++)O[w+1]=O[w]+R[w];for(b=0;b<n;b++)0!==t[r+b]&&(s[O[t[r+b]]++]=b);if(0===e?(I=L=s,d=19):1===e?(I=Hw,T-=257,L=zw,M-=257,d=256):(I=Dw,L=Fw,d=-1),B=0,b=0,w=v,f=o,S=E,A=0,h=-1,l=(k=1<<E)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){p=w-A,s[b]<d?(g=0,y=s[b]):s[b]>d?(g=L[M+s[b]],y=I[T+s[b]]):(g=96,y=0),c=1<<w-A,v=u=1<<S;do{i[f+(B>>A)+(u-=c)]=p<<24|g<<16|y}while(0!==u);for(c=1<<w-1;B&c;)c>>=1;if(0!==c?(B&=c-1,B+=c):B=0,b++,0==--R[w]){if(w===_)break;w=t[r+s[b]]}if(w>E&&(B&l)!==h){for(0===A&&(A=E),f+=v,x=1<<(S=w-A);S+A<_&&!((x-=R[S+A])<=0);)S++,x<<=1;if(k+=1<<S,1===e&&k>852||2===e&&k>592)return 1;i[h=B&l]=E<<24|S<<16|f-o}}return 0!==B&&(i[f+B]=w-A<<24|64<<16),a.bits=E,0}var Kw=-2,Ww=12,Vw=30;function Zw(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Gw(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Am(320),this.work=new Am(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Jw(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new xm(852),t.distcode=t.distdyn=new xm(592),t.sane=1,t.back=-1,0):Kw}(e)):Kw}function Yw(e,t){var r,n;return e?(n=new Gw,e.state=n,n.window=null,r=function(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Kw:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Jw(e))):Kw}(e,t),0!==r&&(e.state=null),r):Kw}var Xw,Qw,eb=!0;function tb(e){if(eb){var t;for(Xw=new xm(512),Qw=new xm(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(qw(1,e.lens,0,288,Xw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;qw(2,e.lens,0,32,Qw,0,e.work,{bits:5}),eb=!1}e.lencode=Xw,e.lenbits=9,e.distcode=Qw,e.distbits=5}function rb(e,t){var r,n,i,o,s,a,c,u,h,l,f,d,p,g,y,m,w,b,v,_,E,S,A,x,k=0,B=new Sm(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Kw;(r=e.state).mode===Ww&&(r.mode=13),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,u=r.hold,h=r.bits,l=a,f=c,S=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;h<16;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(2&r.wrap&&35615===u){r.check=0,B[0]=255&u,B[1]=u>>>8&255,r.check=pw(r.check,B,2,0),u=0,h=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Vw;break}if(8!=(15&u)){e.msg="unknown compression method",r.mode=Vw;break}if(h-=4,E=8+(15&(u>>>=4)),0===r.wbits)r.wbits=E;else if(E>r.wbits){e.msg="invalid window size",r.mode=Vw;break}r.dmax=1<<E,e.adler=r.check=1,r.mode=512&u?10:Ww,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(r.flags=u,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=Vw;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Vw;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(B[0]=255&u,B[1]=u>>>8&255,r.check=pw(r.check,B,2,0)),u=0,h=0,r.mode=3;case 3:for(;h<32;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.time=u),512&r.flags&&(B[0]=255&u,B[1]=u>>>8&255,B[2]=u>>>16&255,B[3]=u>>>24&255,r.check=pw(r.check,B,4,0)),u=0,h=0,r.mode=4;case 4:for(;h<16;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(B[0]=255&u,B[1]=u>>>8&255,r.check=pw(r.check,B,2,0)),u=0,h=0,r.mode=5;case 5:if(1024&r.flags){for(;h<16;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(B[0]=255&u,B[1]=u>>>8&255,r.check=pw(r.check,B,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>a&&(d=a),d&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Em(r.head.extra,n,o,d,E)),512&r.flags&&(r.check=pw(r.check,n,d,o)),a-=d,o+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break e;d=0;do{E=n[o+d++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&d<a);if(512&r.flags&&(r.check=pw(r.check,n,d,o)),a-=d,o+=d,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break e;d=0;do{E=n[o+d++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&d<a);if(512&r.flags&&(r.check=pw(r.check,n,d,o)),a-=d,o+=d,E)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;h<16;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Vw;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ww;break;case 10:for(;h<32;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}e.adler=r.check=Zw(u),u=0,h=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=h,2;e.adler=r.check=1,r.mode=Ww;case Ww:if(5===t||6===t)break e;case 13:if(r.last){u>>>=7&h,h-=7&h,r.mode=27;break}for(;h<3;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}switch(r.last=1&u,h-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(tb(r),r.mode=20,6===t){u>>>=2,h-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=Vw}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Vw;break}if(r.length=65535&u,u=0,h=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(d=r.length){if(d>a&&(d=a),d>c&&(d=c),0===d)break e;Em(i,n,o,d,s),a-=d,o+=d,c-=d,s+=d,r.length-=d;break}r.mode=Ww;break;case 17:for(;h<14;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(r.nlen=257+(31&u),u>>>=5,h-=5,r.ndist=1+(31&u),u>>>=5,h-=5,r.ncode=4+(15&u),u>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Vw;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;h<3;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.lens[I[r.have++]]=7&u,u>>>=3,h-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},S=qw(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,S){e.msg="invalid code lengths set",r.mode=Vw;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;m=(k=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,w=65535&k,!((y=k>>>24)<=h);){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(w<16)u>>>=y,h-=y,r.lens[r.have++]=w;else{if(16===w){for(x=y+2;h<x;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(u>>>=y,h-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=Vw;break}E=r.lens[r.have-1],d=3+(3&u),u>>>=2,h-=2}else if(17===w){for(x=y+3;h<x;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}h-=y,E=0,d=3+(7&(u>>>=y)),u>>>=3,h-=3}else{for(x=y+7;h<x;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}h-=y,E=0,d=11+(127&(u>>>=y)),u>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Vw;break}for(;d--;)r.lens[r.have++]=E}}if(r.mode===Vw)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Vw;break}if(r.lenbits=9,A={bits:r.lenbits},S=qw(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,S){e.msg="invalid literal/lengths set",r.mode=Vw;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},S=qw(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,S){e.msg="invalid distances set",r.mode=Vw;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=h,jw(e,f),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,u=r.hold,h=r.bits,r.mode===Ww&&(r.back=-1);break}for(r.back=0;m=(k=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,w=65535&k,!((y=k>>>24)<=h);){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(m&&!(240&m)){for(b=y,v=m,_=w;m=(k=r.lencode[_+((u&(1<<b+v)-1)>>b)])>>>16&255,w=65535&k,!(b+(y=k>>>24)<=h);){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}u>>>=b,h-=b,r.back+=b}if(u>>>=y,h-=y,r.back+=y,r.length=w,0===m){r.mode=26;break}if(32&m){r.back=-1,r.mode=Ww;break}if(64&m){e.msg="invalid literal/length code",r.mode=Vw;break}r.extra=15&m,r.mode=22;case 22:if(r.extra){for(x=r.extra;h<x;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;m=(k=r.distcode[u&(1<<r.distbits)-1])>>>16&255,w=65535&k,!((y=k>>>24)<=h);){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(!(240&m)){for(b=y,v=m,_=w;m=(k=r.distcode[_+((u&(1<<b+v)-1)>>b)])>>>16&255,w=65535&k,!(b+(y=k>>>24)<=h);){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}u>>>=b,h-=b,r.back+=b}if(u>>>=y,h-=y,r.back+=y,64&m){e.msg="invalid distance code",r.mode=Vw;break}r.offset=w,r.extra=15&m,r.mode=24;case 24:if(r.extra){for(x=r.extra;h<x;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Vw;break}r.mode=25;case 25:if(0===c)break e;if(d=f-c,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Vw;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=i,p=s-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do{i[s++]=g[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===c)break e;i[s++]=r.length,c--,r.mode=21;break;case 27:if(r.wrap){for(;h<32;){if(0===a)break e;a--,u|=n[o++]<<h,h+=8}if(f-=c,e.total_out+=f,r.total+=f,f&&(e.adler=r.check=r.flags?pw(r.check,i,f,s-f):fw(r.check,i,f,s-f)),f=c,(r.flags?u:Zw(u))!==r.check){e.msg="incorrect data check",r.mode=Vw;break}u=0,h=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;h<32;){if(0===a)break e;a--,u+=n[o++]<<h,h+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Vw;break}u=0,h=0}r.mode=29;case 29:S=1;break e;case Vw:S=-3;break e;case 31:return-4;default:return Kw}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,r.hold=u,r.bits=h,(r.wsize||f!==e.avail_out&&r.mode<Vw&&(r.mode<27||4!==t))&&function(e,t,r,n){var i,o=e.state;null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Sm(o.wsize)),n>=o.wsize?(Em(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),Em(o.window,t,r-n,i,o.wnext),(n-=i)?(Em(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i)))}(e,e.output,e.next_out,f-e.avail_out),l-=e.avail_in,f-=e.avail_out,e.total_in+=l,e.total_out+=f,r.total+=f,r.wrap&&f&&(e.adler=r.check=r.flags?pw(r.check,i,f,e.next_out-f):fw(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ww?128:0)+(20===r.mode||15===r.mode?256:0),(0===l&&0===f||4===t)&&0===S&&(S=-5),S}var nb;function ib(e){if(e<1||e>7)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function ob(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}ib.prototype.init=function(e,t,r,n,i){var o;switch(this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,3!==this.mode&&4!==this.mode||(this.windowBits+=16),7===this.mode&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new _m,this.mode){case 1:case 3:case 5:o=function(e,t,r,n,i,o){if(!e)return yw;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||8!==r||n<8||n>15||t<0||t>9||o<0||o>4)return Ew(e,yw);8===n&&(n=9);var a=new Pw;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Sm(2*a.w_size),a.head=new Am(a.hash_size),a.prev=new Am(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Sm(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,Nw(e)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case 7:o=Yw(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===o?(this.write_in_progress=!1,this.init_done=!0):this._error(o)},ib.prototype.params=function(){throw new Error("deflateParams Not supported")},ib.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},ib.prototype.write=function(e,t,r,n,i,o,s){this._writeCheck(),this.write_in_progress=!0;var a=this;return xp.nextTick((function(){a.write_in_progress=!1;var c=a._write(e,t,r,n,i,o,s);a.callback(c[0],c[1]),a.pending_close&&a.close()})),this},ib.prototype.writeSync=function(e,t,r,n,i,o,s){return this._writeCheck(),this._write(e,t,r,n,i,o,s)},ib.prototype._write=function(e,t,r,n,i,o,s){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new C(0),n=0,r=0),i._set?i.set=i._set:i.set=ob;var a,c=this.strm;switch(c.avail_in=n,c.input=t,c.next_in=r,c.avail_out=s,c.output=i,c.next_out=o,this.mode){case 1:case 3:case 5:a=Uw(c,e);break;case 7:case 2:case 4:case 6:a=rb(c,e);break;default:throw new Error("Unknown mode "+this.mode)}return this._checkError(a,c,e)||this._error(a),this.write_in_progress=!1,[c.avail_in,c.avail_out]},ib.prototype._checkError=function(e,t,r){switch(e){case 0:case-5:if(0!==t.avail_out&&4===r)return!1;break;case 1:break;default:return!1}return!0},ib.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,1===this.mode||3===this.mode||5===this.mode?function(e){var t;e&&e.state&&(42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==bw&&t!==vw&&t!==_w?Ew(e,yw):(e.state=null,t===vw&&Ew(e,-3)))}(this.strm):function(e){if(!e||!e.state)return Kw;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},ib.prototype.reset=function(){switch(this.mode){case 1:case 5:nb=Nw(this.strm);break;case 2:case 6:nb=Jw(this.strm)}0!==nb&&this._error(nb)},ib.prototype._error=function(e){this.onerror(vm[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var sb=Object.freeze({__proto__:null,NONE:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:ib});var ab={};Object.keys(sb).forEach((function(e){ab[e]=sb[e]})),ab.Z_MIN_WINDOWBITS=8,ab.Z_MAX_WINDOWBITS=15,ab.Z_DEFAULT_WINDOWBITS=15,ab.Z_MIN_CHUNK=64,ab.Z_MAX_CHUNK=1/0,ab.Z_DEFAULT_CHUNK=16384,ab.Z_MIN_MEMLEVEL=1,ab.Z_MAX_MEMLEVEL=9,ab.Z_DEFAULT_MEMLEVEL=8,ab.Z_MIN_LEVEL=-1,ab.Z_MAX_LEVEL=9,ab.Z_DEFAULT_LEVEL=ab.Z_DEFAULT_COMPRESSION;var cb={Z_OK:ab.Z_OK,Z_STREAM_END:ab.Z_STREAM_END,Z_NEED_DICT:ab.Z_NEED_DICT,Z_ERRNO:ab.Z_ERRNO,Z_STREAM_ERROR:ab.Z_STREAM_ERROR,Z_DATA_ERROR:ab.Z_DATA_ERROR,Z_MEM_ERROR:ab.Z_MEM_ERROR,Z_BUF_ERROR:ab.Z_BUF_ERROR,Z_VERSION_ERROR:ab.Z_VERSION_ERROR};function ub(e){return new Lb(e)}function hb(e){return new Mb(e)}function lb(e){return new Nb(e)}function fb(e){return new Ub(e)}function db(e){return new Cb(e)}function pb(e){return new Pb(e)}function gb(e){return new jb(e)}function yb(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Lb(t),e,r)}function mb(e,t){return Ob(new Lb(t),e)}function wb(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Cb(t),e,r)}function bb(e,t){return Ob(new Cb(t),e)}function vb(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Nb(t),e,r)}function _b(e,t){return Ob(new Nb(t),e)}function Eb(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new jb(t),e,r)}function Sb(e,t){return Ob(new jb(t),e)}function Ab(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Mb(t),e,r)}function xb(e,t){return Ob(new Mb(t),e)}function kb(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Pb(t),e,r)}function Bb(e,t){return Ob(new Pb(t),e)}function Ib(e,t,r){return"function"==typeof t&&(r=t,t={}),Rb(new Ub(t),e,r)}function Tb(e,t){return Ob(new Ub(t),e)}function Rb(e,t,r){var n=[],i=0;function o(){for(var t;null!==(t=e.read());)n.push(t),i+=t.length;e.once("readable",o)}function s(){var t=C.concat(n,i);n=[],r(null,t),e.close()}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",o),r(t)})),e.on("end",s),e.end(t),o()}function Ob(e,t){if("string"==typeof t&&(t=new C(t)),!C.isBuffer(t))throw new TypeError("Not a string or buffer");var r=ab.Z_FINISH;return e._processChunk(t,r)}function Lb(e){if(!(this instanceof Lb))return new Lb(e);$b.call(this,e,ab.DEFLATE)}function Mb(e){if(!(this instanceof Mb))return new Mb(e);$b.call(this,e,ab.INFLATE)}function Cb(e){if(!(this instanceof Cb))return new Cb(e);$b.call(this,e,ab.GZIP)}function Pb(e){if(!(this instanceof Pb))return new Pb(e);$b.call(this,e,ab.GUNZIP)}function Nb(e){if(!(this instanceof Nb))return new Nb(e);$b.call(this,e,ab.DEFLATERAW)}function Ub(e){if(!(this instanceof Ub))return new Ub(e);$b.call(this,e,ab.INFLATERAW)}function jb(e){if(!(this instanceof jb))return new jb(e);$b.call(this,e,ab.UNZIP)}function $b(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||ab.Z_DEFAULT_CHUNK,uy.call(this,e),e.flush&&e.flush!==ab.Z_NO_FLUSH&&e.flush!==ab.Z_PARTIAL_FLUSH&&e.flush!==ab.Z_SYNC_FLUSH&&e.flush!==ab.Z_FULL_FLUSH&&e.flush!==ab.Z_FINISH&&e.flush!==ab.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||ab.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<ab.Z_MIN_CHUNK||e.chunkSize>ab.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<ab.Z_MIN_WINDOWBITS||e.windowBits>ab.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<ab.Z_MIN_LEVEL||e.level>ab.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<ab.Z_MIN_MEMLEVEL||e.memLevel>ab.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=ab.Z_FILTERED&&e.strategy!=ab.Z_HUFFMAN_ONLY&&e.strategy!=ab.Z_RLE&&e.strategy!=ab.Z_FIXED&&e.strategy!=ab.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!C.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new ab.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(e,t){r._binding=null,r._hadError=!0;var n=new Error(e);n.errno=t,n.code=cb[t],r.emit("error",n)};var n=ab.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(n=e.level);var i=ab.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._binding.init(e.windowBits||ab.Z_DEFAULT_WINDOWBITS,n,e.memLevel||ab.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new C(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}Object.keys(cb).forEach((function(e){cb[cb[e]]=e})),Np($b,uy),$b.prototype.params=function(e,t,r){if(e<ab.Z_MIN_LEVEL||e>ab.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=ab.Z_FILTERED&&t!=ab.Z_HUFFMAN_ONLY&&t!=ab.Z_RLE&&t!=ab.Z_FIXED&&t!=ab.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(ab.Z_SYNC_FLUSH,(function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())}))}else xp.nextTick(r)},$b.prototype.reset=function(){return this._binding.reset()},$b.prototype._flush=function(e){this._transform(new C(0),"",e)},$b.prototype.flush=function(e,t){var r=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=ab.Z_FULL_FLUSH),r.ended)t&&xp.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",(function(){n.flush(t)}))}else this._flushFlag=e,this.write(new C(0),"",t)},$b.prototype.close=function(e){if(e&&xp.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;xp.nextTick((function(){t.emit("close")}))}},$b.prototype._transform=function(e,t,r){var n,i=this._writableState,o=(i.ending||i.ended)&&(!e||i.length===e.length);if(null===!e&&!C.isBuffer(e))return r(new Error("invalid input"));o?n=ab.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||ab.Z_NO_FLUSH)),this._processChunk(e,n,r)},$b.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,o=0,s=this,a="function"==typeof r;if(!a){var c,u=[],h=0;this.on("error",(function(e){c=e}));do{var l=this._binding.writeSync(t,e,o,n,this._buffer,this._offset,i)}while(!this._hadError&&p(l[0],l[1]));if(this._hadError)throw c;var f=C.concat(u,h);return this.close(),f}var d=this._binding.write(t,e,o,n,this._buffer,this._offset,i);function p(c,l){if(!s._hadError){var f=i-l;if(function(e,t){if(!e)throw new Error(t)}(f>=0,"have should not go down"),f>0){var d=s._buffer.slice(s._offset,s._offset+f);s._offset+=f,a?s.push(d):(u.push(d),h+=d.length)}if((0===l||s._offset>=s._chunkSize)&&(i=s._chunkSize,s._offset=0,s._buffer=new C(s._chunkSize)),0===l){if(o+=n-c,n=c,!a)return!0;var g=s._binding.write(t,e,o,n,s._buffer,s._offset,s._chunkSize);return g.callback=p,void(g.buffer=e)}if(!a)return!1;r()}}d.buffer=e,d.callback=p},Np(Lb,$b),Np(Mb,$b),Np(Cb,$b),Np(Pb,$b),Np(Nb,$b),Np(Ub,$b),Np(jb,$b);var Hb={codes:cb,createDeflate:ub,createInflate:hb,createDeflateRaw:lb,createInflateRaw:fb,createGzip:db,createGunzip:pb,createUnzip:gb,deflate:yb,deflateSync:mb,gzip:wb,gzipSync:bb,deflateRaw:vb,deflateRawSync:_b,unzip:Eb,unzipSync:Sb,inflate:Ab,inflateSync:xb,gunzip:kb,gunzipSync:Bb,inflateRaw:Ib,inflateRawSync:Tb,Deflate:Lb,Inflate:Mb,Gzip:Cb,Gunzip:Pb,DeflateRaw:Nb,InflateRaw:Ub,Unzip:jb,Zlib:$b},zb=Nr(Object.freeze({__proto__:null,codes:cb,createDeflate:ub,createInflate:hb,createDeflateRaw:lb,createInflateRaw:fb,createGzip:db,createGunzip:pb,createUnzip:gb,deflate:yb,deflateSync:mb,gzip:wb,gzipSync:bb,deflateRaw:vb,deflateRawSync:_b,unzip:Eb,unzipSync:Sb,inflate:Ab,inflateSync:xb,gunzip:kb,gunzipSync:Bb,inflateRaw:Ib,inflateRawSync:Tb,Deflate:Lb,Inflate:Mb,Gzip:Cb,Gunzip:Pb,DeflateRaw:Nb,InflateRaw:Ub,Unzip:jb,Zlib:$b,default:Hb})),Db=Nr(Eg),Fb=Nr(om);Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.InvalidStatusCodeError=Xd.InvalidCertError=void 0;const qb=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class Kb extends Error{constructor(e,t){super(e),this.fingerprint256=t}}Xd.InvalidCertError=Kb;class Wb extends Error{constructor(e){super(`Request Failed. Status Code: ${e}`),this.statusCode=e}}function Vb(e,t){if(!t||"text"===t||"json"===t)try{let r=new TextDecoder("utf8",{fatal:!0}).decode(e);if("text"===t)return r;try{return JSON.parse(r)}catch(e){if("json"===t)throw e;return r}}catch(e){if("text"===t||"json"===t)throw e}return e}Xd.InvalidStatusCodeError=Wb;let Zb={};function Gb(e,t){let r={...qb,...t};const n=fm,i=bm,o=zb,{promisify:s}=Db,{resolve:a}=Fb,c=!!/^https/.test(e);let u={method:r.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const h=e=>e.replace(/:| /g,"").toLowerCase();if(r.keepAlive){const e={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},t=[c,c&&r.sslPinnedCertificates?.map((e=>h(e))).sort()].join();u.agent=Zb[t]||(Zb[t]=new(c?i:n).Agent(e))}"json"===r.type&&(u.headers["Content-Type"]="application/json"),r.data&&(r.method||(u.method="POST"),u.body="json"===r.type?JSON.stringify(r.data):r.data),u.headers={...u.headers,...r.headers},r.sslAllowSelfSigned&&(u.rejectUnauthorized=!1);return new Promise(((t,l)=>{const f=async t=>{if(t&&"DEPTH_ZERO_SELF_SIGNED_CERT"===t.code)try{await Gb(e,{...r,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(e){e&&e.fingerprint256&&(t=new Kb(`Self-signed SSL certificate: ${e.fingerprint256}`,e.fingerprint256))}l(t)},d=(c?i:n).request(e,u,(n=>{n.on("error",f),(async()=>{try{t(await(async t=>{const n=t.statusCode;if(r.redirect&&300<=n&&n<400&&t.headers.location){if(10==r._redirectCount)throw new Error("Request failed. Too much redirects.");return r._redirectCount+=1,await Gb(a(e,t.headers.location),r)}if(r.expectStatusCode&&n!==r.expectStatusCode)throw t.resume(),new Wb(n);let i=[];for await(const e of t)i.push(e);let c=C.concat(i);const u=t.headers["content-encoding"];"br"===u&&(c=await s(o.brotliDecompress)(c)),"gzip"!==u&&"deflate"!==u||(c=await s(o.unzip)(c));const h=Vb(c,r.type);return r.full?{headers:t.headers,status:n,body:h}:h})(n))}catch(e){l(e)}})()}));d.on("error",f);const p=r.sslPinnedCertificates?.map((e=>h(e))),g=e=>{const t=h(e.getPeerCertificate()?.fingerprint256||"");if((t||!e.isSessionReused())&&!p.includes(t))return d.emit("error",new Kb(`Invalid SSL certificate: ${t} Expected: ${p}`,t)),d.abort()};r.sslPinnedCertificates&&d.on("socket",(e=>{const t=e.listeners("secureConnect").map((e=>(e.name||"").replace("bound ",""))).includes("mfetchSecureConnect");t||e.on("secureConnect",g.bind(null,e))})),r.keepAlive&&d.setNoDelay(!0),u.body&&d.write(u.body),d.end()}))}const Jb=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map((e=>e.toLowerCase()))),Yb=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map((e=>e.toLowerCase())));async function Xb(e,t){let r={...qb,...t};const n=new Headers;"json"===r.type&&n.set("Content-Type","application/json");let i=new URL(e);if(i.username){const e=btoa(`${i.username}:${i.password}`);n.set("Authorization",`Basic ${e}`),i.username="",i.password=""}e=""+i;for(let e in r.headers){const t=e.toLowerCase();(Jb.has(t)||r.cors&&!Yb.has(t))&&n.set(e,r.headers[e])}let o={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(o.referrerPolicy="no-referrer"),r.cors&&(o.mode="cors"),r.data&&(r.method||(o.method="POST"),o.body="json"===r.type?JSON.stringify(r.data):r.data);const s=await fetch(e,o);if(r.expectStatusCode&&s.status!==r.expectStatusCode)throw new Wb(s.status);const a=Vb(new Uint8Array(await s.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(s.headers.entries()),status:s.status,body:a}:a}const Qb=!!("object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8);Xd.default=function(e,t){return(Qb?Gb:Xb)(e,t)},Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.getProvider=Yd.fetchFromProvider=void 0;const ev=Xd;Yd.fetchFromProvider=async(e,t)=>(await(0,ev.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;Yd.getProvider=e=>{if("string"==typeof e)return e;if(void 0!==e?.connection?.url)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")},function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=void 0,r(_h,e),r(of,e),r(sf,e),r(Bd,e),r(Od,e),r(Ud,e),r(_d,e),r(Ld,e),r(Kd,e),r(Wd,e);var n=Sd;Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),r(Jd,e),r(Yd,e)}(vh);var tv={},rv={},nv={},iv={},ov={};Object.defineProperty(ov,"__esModule",{value:!0}),ov.StructError=void 0;class sv extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}ov.StructError=sv;var av={},cv={};function uv(e){return"object"==typeof e&&null!==e}function hv(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function lv(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${hv(n)}\``}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}Object.defineProperty(cv,"__esModule",{value:!0}),cv.run=cv.toFailures=cv.toFailure=cv.shiftIterator=cv.print=cv.isPlainObject=cv.isObject=void 0,cv.isObject=uv,cv.isPlainObject=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},cv.print=hv,cv.shiftIterator=function(e){const{done:t,value:r}=e.next();return t?void 0:r},cv.toFailure=lv,cv.toFailures=function*(e,t,r,n){(function(e){return uv(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=lv(i,t,r,n);e&&(yield e)}},cv.run=function*e(t,r,n={}){const{path:i=[],branch:o=[t],coerce:s=!1,mask:a=!1}=n,c={path:i,branch:o};if(s&&(t=r.coercer(t,c),a&&"type"!==r.type&&uv(r.schema)&&uv(t)&&!Array.isArray(t)))for(const e in t)void 0===r.schema[e]&&delete t[e];let u="valid";for(const e of r.validator(t,c))e.explanation=n.message,u="not_valid",yield[e,void 0];for(let[h,l,f]of r.entries(t,c)){const r=e(l,f,{path:void 0===h?i:[...i,h],branch:void 0===h?o:[...o,l],coerce:s,mask:a,message:n.message});for(const e of r)e[0]?(u=null===e[0].refinement||void 0===e[0].refinement?"not_valid":"not_refined",yield[e[0],void 0]):s&&(l=e[1],void 0===h?t=l:t instanceof Map?t.set(h,l):t instanceof Set?t.add(l):uv(t)&&(void 0!==l||h in t)&&(t[h]=l))}if("not_valid"!==u)for(const e of r.refiner(t,c))e.explanation=n.message,u="not_refined",yield[e,void 0];"valid"===u&&(yield[void 0,t])},Object.defineProperty(av,"__esModule",{value:!0}),av.validate=av.is=av.mask=av.create=av.assert=av.Struct=void 0;const fv=ov,dv=cv;function pv(e,t,r){const n=wv(e,t,{message:r});if(n[0])throw n[0]}function gv(e,t,r){const n=wv(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function yv(e,t,r){const n=wv(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function mv(e,t){return!wv(e,t)[0]}function wv(e,t,r={}){const n=(0,dv.run)(e,t,r),i=(0,dv.shiftIterator)(n);if(i[0]){return[new fv.StructError(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}av.Struct=class{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>{const r=n(e,t);return(0,dv.toFailures)(r,t,this,e)}:()=>[],this.refiner=i?(e,t)=>{const r=i(e,t);return(0,dv.toFailures)(r,t,this,e)}:()=>[]}assert(e,t){return pv(e,this,t)}create(e,t){return gv(e,this,t)}is(e){return mv(e,this)}mask(e,t){return yv(e,this,t)}validate(e,t={}){return wv(e,this,t)}},av.assert=pv,av.create=gv,av.mask=yv,av.is=mv,av.validate=wv;var bv,vv,_v={},Ev={},Sv={};function Av(){if(bv)return Sv;bv=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.pick=Sv.partial=Sv.omit=Sv.lazy=Sv.dynamic=Sv.deprecated=Sv.define=Sv.assign=void 0;const e=av,t=xv();return Sv.assign=function(...e){const r="type"===e[0]?.type,n=e.map((({schema:e})=>e)),i=Object.assign({},...n);return r?(0,t.type)(i):(0,t.object)(i)},Sv.define=function(t,r){return new e.Struct({type:t,schema:null,validator:r})},Sv.deprecated=function(t,r){return new e.Struct({...t,refiner:(e,r)=>void 0===e||t.refiner(e,r),validator:(e,n)=>void 0===e||(r(e,n),t.validator(e,n))})},Sv.dynamic=function(t){return new e.Struct({type:"dynamic",schema:null,*entries(e,r){const n=t(e,r);yield*n.entries(e,r)},validator:(e,r)=>t(e,r).validator(e,r),coercer:(e,r)=>t(e,r).coercer(e,r),refiner:(e,r)=>t(e,r).refiner(e,r)})},Sv.lazy=function(t){let r;return new e.Struct({type:"lazy",schema:null,*entries(e,n){r??(r=t()),yield*r.entries(e,n)},validator:(e,n)=>(r??(r=t()),r.validator(e,n)),coercer:(e,n)=>(r??(r=t()),r.coercer(e,n)),refiner:(e,n)=>(r??(r=t()),r.refiner(e,n))})},Sv.omit=function(e,r){const{schema:n}=e,i={...n};for(const e of r)delete i[e];return"type"===e.type?(0,t.type)(i):(0,t.object)(i)},Sv.partial=function(r){const n=r instanceof e.Struct,i=n?{...r.schema}:{...r};for(const e in i)i[e]=(0,t.optional)(i[e]);return n&&"type"===r.type?(0,t.type)(i):(0,t.object)(i)},Sv.pick=function(e,r){const{schema:n}=e,i={};for(const e of r)i[e]=n[e];return"type"===e.type?(0,t.type)(i):(0,t.object)(i)},Sv}function xv(){if(vv)return Ev;vv=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.unknown=Ev.union=Ev.type=Ev.tuple=Ev.string=Ev.set=Ev.regexp=Ev.record=Ev.optional=Ev.object=Ev.number=Ev.nullable=Ev.never=Ev.map=Ev.literal=Ev.intersection=Ev.integer=Ev.instance=Ev.func=Ev.enums=Ev.date=Ev.boolean=Ev.bigint=Ev.array=Ev.any=void 0;const e=av,t=cv,r=Av();function n(){return(0,r.define)("never",(()=>!1))}return Ev.any=function(){return(0,r.define)("any",(()=>!0))},Ev.array=function(r){return new e.Struct({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${(0,t.print)(e)}`})},Ev.bigint=function(){return(0,r.define)("bigint",(e=>"bigint"==typeof e))},Ev.boolean=function(){return(0,r.define)("boolean",(e=>"boolean"==typeof e))},Ev.date=function(){return(0,r.define)("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${(0,t.print)(e)}`))},Ev.enums=function(r){const n={},i=r.map((e=>(0,t.print)(e))).join();for(const e of r)n[e]=e;return new e.Struct({type:"enums",schema:n,validator:e=>r.includes(e)||`Expected one of \`${i}\`, but received: ${(0,t.print)(e)}`})},Ev.func=function(){return(0,r.define)("func",(e=>"function"==typeof e||`Expected a function, but received: ${(0,t.print)(e)}`))},Ev.instance=function(e){return(0,r.define)("instance",(r=>r instanceof e||`Expected a \`${e.name}\` instance, but received: ${(0,t.print)(r)}`))},Ev.integer=function(){return(0,r.define)("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${(0,t.print)(e)}`))},Ev.intersection=function(t){return new e.Struct({type:"intersection",schema:null,*entries(e,r){for(const{entries:n}of t)yield*n(e,r)},*validator(e,r){for(const{validator:n}of t)yield*n(e,r)},*refiner(e,r){for(const{refiner:n}of t)yield*n(e,r)}})},Ev.literal=function(r){const n=(0,t.print)(r),i=typeof r;return new e.Struct({type:"literal",schema:"string"===i||"number"===i||"boolean"===i?r:null,validator:e=>e===r||`Expected the literal \`${n}\`, but received: ${(0,t.print)(e)}`})},Ev.map=function(r,n){return new e.Struct({type:"map",schema:null,*entries(e){if(r&&n&&e instanceof Map)for(const[t,i]of e.entries())yield[t,t,r],yield[t,i,n]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${(0,t.print)(e)}`})},Ev.never=n,Ev.nullable=function(t){return new e.Struct({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})},Ev.number=function(){return(0,r.define)("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${(0,t.print)(e)}`))},Ev.object=function(r){const i=r?Object.keys(r):[],o=n();return new e.Struct({type:"object",schema:r??null,*entries(e){if(r&&(0,t.isObject)(e)){const t=new Set(Object.keys(e));for(const n of i)t.delete(n),yield[n,e[n],r[n]];for(const r of t)yield[r,e[r],o]}},validator:e=>(0,t.isObject)(e)||`Expected an object, but received: ${(0,t.print)(e)}`,coercer:e=>(0,t.isObject)(e)?{...e}:e})},Ev.optional=function(t){return new e.Struct({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})},Ev.record=function(r,n){return new e.Struct({type:"record",schema:null,*entries(e){if((0,t.isObject)(e))for(const t in e){const i=e[t];yield[t,t,r],yield[t,i,n]}},validator:e=>(0,t.isObject)(e)||`Expected an object, but received: ${(0,t.print)(e)}`})},Ev.regexp=function(){return(0,r.define)("regexp",(e=>e instanceof RegExp))},Ev.set=function(r){return new e.Struct({type:"set",schema:null,*entries(e){if(r&&e instanceof Set)for(const t of e)yield[t,t,r]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${(0,t.print)(e)}`})},Ev.string=function(){return(0,r.define)("string",(e=>"string"==typeof e||`Expected a string, but received: ${(0,t.print)(e)}`))},Ev.tuple=function(r){const i=n();return new e.Struct({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const t=Math.max(r.length,e.length);for(let n=0;n<t;n++)yield[n,e[n],r[n]||i]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${(0,t.print)(e)}`})},Ev.type=function(r){const n=Object.keys(r);return new e.Struct({type:"type",schema:r,*entries(e){if((0,t.isObject)(e))for(const t of n)yield[t,e[t],r[t]]},validator:e=>(0,t.isObject)(e)||`Expected an object, but received: ${(0,t.print)(e)}`,coercer:e=>(0,t.isObject)(e)?{...e}:e})},Ev.union=function(r){const n=r.map((e=>e.type)).join(" | ");return new e.Struct({type:"union",schema:null,coercer(e){for(const t of r){const[r,n]=t.validate(e,{coerce:!0});if(!r)return n}return e},validator(e,i){const o=[];for(const n of r){const[...r]=(0,t.run)(e,n,i),[s]=r;if(!s?.[0])return[];for(const[e]of r)e&&o.push(e)}return[`Expected the value to satisfy a union of \`${n}\`, but received: ${(0,t.print)(e)}`,...o]}})},Ev.unknown=function(){return(0,r.define)("unknown",(()=>!0))},Ev}Object.defineProperty(_v,"__esModule",{value:!0}),_v.trimmed=_v.defaulted=_v.coerce=void 0;const kv=av,Bv=cv,Iv=xv();function Tv(e,t,r){return new kv.Struct({...e,coercer:(n,i)=>(0,kv.is)(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}_v.coerce=Tv,_v.defaulted=function(e,t,r={}){return Tv(e,(0,Iv.unknown)(),(e=>{const n="function"==typeof t?t():t;if(void 0===e)return n;if(!r.strict&&(0,Bv.isPlainObject)(e)&&(0,Bv.isPlainObject)(n)){const t={...e};let r=!1;for(const e in n)void 0===t[e]&&(t[e]=n[e],r=!0);if(r)return t}return e}))},_v.trimmed=function(e){return Tv(e,(0,Iv.string)(),(e=>e.trim()))};var Rv={};Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.refine=Rv.size=Rv.pattern=Rv.nonempty=Rv.min=Rv.max=Rv.empty=void 0;const Ov=av,Lv=cv;function Mv(e){return e instanceof Map||e instanceof Set?e.size:e.length}function Cv(e,t,r){return new Ov.Struct({...e,*refiner(n,i){yield*e.refiner(n,i);const o=r(n,i),s=(0,Lv.toFailures)(o,i,e,n);for(const e of s)yield{...e,refinement:t}}})}Rv.empty=function(e){return Cv(e,"empty",(t=>{const r=Mv(t);return 0===r||`Expected an empty ${e.type} but received one with a size of \`${r}\``}))},Rv.max=function(e,t,r={}){const{exclusive:n}=r;return Cv(e,"max",(r=>n?r<t:r<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${r}\``))},Rv.min=function(e,t,r={}){const{exclusive:n}=r;return Cv(e,"min",(r=>n?r>t:r>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${r}\``))},Rv.nonempty=function(e){return Cv(e,"nonempty",(t=>Mv(t)>0||`Expected a nonempty ${e.type} but received an empty one`))},Rv.pattern=function(e,t){return Cv(e,"pattern",(r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`))},Rv.size=function(e,t,r=t){const n=`Expected a ${e.type}`,i=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return Cv(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=r||`${n} ${i} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:o}=e;return t<=o&&o<=r||`${n} with a size ${i} but received one with a size of \`${o}\``}const{length:o}=e;return t<=o&&o<=r||`${n} with a length ${i} but received one with a length of \`${o}\``}))},Rv.refine=Cv,function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ov,e),r(av,e),r(_v,e),r(Rv,e),r(xv(),e),r(Av(),e)}(iv);var Pv={};class Nv extends Error{constructor(e,{cause:t}={}){super(e),this.name=Nv.name,t&&(this.cause=t),this.message=e}}var Uv=Nr(Object.freeze({__proto__:null,ErrorWithCause:Nv}));const jv=e=>{if(e&&"object"==typeof e&&"cause"in e){if("function"==typeof e.cause){const t=e.cause();return t instanceof Error?t:void 0}return e.cause instanceof Error?e.cause:void 0}},$v=(e,t)=>{if(!(e instanceof Error))return"";const r=e.stack||"";if(t.has(e))return r+"\ncauses have become circular...";const n=jv(e);return n?(t.add(e),r+"\ncaused by: "+$v(n,t)):r},Hv=(e,t,r)=>{if(!(e instanceof Error))return"";const n=r?"":e.message||"";if(t.has(e))return n+": ...";const i=jv(e);if(i){t.add(e);const r="cause"in e&&"function"==typeof e.cause;return n+(r?"":": ")+Hv(i,t,r)}return n};var zv=Object.freeze({__proto__:null,findCauseByReference:(e,t)=>{if(!e||!t)return;if(!(e instanceof Error))return;if(!(t.prototype instanceof Error)&&t!==Error)return;const r=new Set;let n=e;for(;n&&!r.has(n);){if(r.add(n),n instanceof t)return n;n=jv(n)}},getErrorCause:jv,stackWithCauses:e=>$v(e,new Set),messageWithCauses:e=>Hv(e,new Set)}),Dv=Nr(zv);const{ErrorWithCause:Fv}=Uv,{findCauseByReference:qv,getErrorCause:Kv,messageWithCauses:Wv,stackWithCauses:Vv}=Dv;var Zv={ErrorWithCause:Fv,findCauseByReference:qv,getErrorCause:Kv,stackWithCauses:Vv,messageWithCauses:Wv},Gv={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.getKnownPropertyNames=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0,e.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},e.isNullOrUndefined=function(e){return null==e},e.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};var t;function r(e){return e.charCodeAt(0)<=127}e.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),e.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},(t=e.JsonSize||(e.JsonSize={}))[t.Null=4]="Null",t[t.Comma=1]="Comma",t[t.Wrapper=1]="Wrapper",t[t.True=4]="True",t[t.False=5]="False",t[t.Quote=1]="Quote",t[t.Colon=1]="Colon",t[t.Date=24]="Date",e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,e.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},e.isASCII=r,e.calculateStringSize=function(t){return t.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(t.match(e.ESCAPE_CHARACTERS_REGEXP)??[]).length},e.calculateNumberSize=function(e){return e.toString().length}}(Gv),Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.wrapError=Pv.getErrorMessage=Pv.isErrorWithStack=Pv.isErrorWithMessage=Pv.isErrorWithCode=void 0;const Jv=Zv,Yv=Gv;function Xv(e){return"object"==typeof e&&null!==e&&"code"in e}function Qv(e){return"object"==typeof e&&null!==e&&"message"in e}Pv.isErrorWithCode=Xv,Pv.isErrorWithMessage=Qv,Pv.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},Pv.getErrorMessage=function(e){return Qv(e)&&"string"==typeof e.message?e.message:(0,Yv.isNullOrUndefined)(e)?"":String(e)},Pv.wrapError=function(e,t){if(function(e){return e instanceof Error||(0,Yv.isObject)(e)&&"Error"===e.constructor.name}(e)){let r;return r=2===Error.length?new Error(t,{cause:e}):new Jv.ErrorWithCause(t,{cause:e}),Xv(e)&&(r.code=e.code),r}return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))},Object.defineProperty(nv,"__esModule",{value:!0}),nv.assertExhaustive=nv.assertStruct=nv.assert=nv.AssertionError=void 0;const e_=iv,t_=Pv;function r_(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class n_ extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}nv.AssertionError=n_,nv.assert=function(e,t="Assertion failed.",r=n_){if(!e){if(t instanceof Error)throw t;throw r_(r,t)}},nv.assertStruct=function(e,t,r="Assertion failed",n=n_){try{(0,e_.assert)(e,t)}catch(e){throw r_(n,`${r}: ${function(e){return(0,t_.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},nv.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")};var i_={};Object.defineProperty(i_,"__esModule",{value:!0}),i_.base64=void 0;const o_=iv,s_=nv;i_.base64=(e,t={})=>{const r=t.paddingRequired??!1,n=t.characterSet??"base64";let i,o;return"base64"===n?i=String.raw`[A-Za-z0-9+\/]`:((0,s_.assert)("base64url"===n),i=String.raw`[-_A-Za-z0-9]`),o=r?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,o_.pattern)(e,o)};var a_={},c_={};!function(e){function t(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function n(...e){const t=e=>e,r=(e,t)=>r=>e(t(r)),n=e.map((e=>e.encode)).reduceRight(r,t),i=e.map((e=>e.decode)).reduce(r,t);return{encode:n,decode:i}}function i(e){return{encode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("alphabet.encode input should be an array of numbers");return r.map((r=>{if(t(r),r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function s(e,r="="){if(t(e),"string"!=typeof r)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;t.length*e%8;)t.push(r);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=t.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===r;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function a(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function c(e,r,n){if(r<2)throw new Error(`convertRadix: wrong from=${r}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const o=[],s=Array.from(e);for(s.forEach((e=>{if(t(e),e<0||e>=r)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,t=!0;for(let o=i;o<s.length;o++){const a=s[o],c=r*e+a;if(!Number.isSafeInteger(c)||r*e/r!==e||c-a!=r*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(s[o]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");t&&(u?t=!1:i=o)}if(o.push(e),t)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0,e.assertNumber=t;const u=(e,t)=>t?u(t,e%t):e,h=(e,t)=>e+(t-u(e,t));function l(e,r,n,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(r<=0||r>32)throw new Error(`convertRadix2: wrong from=${r}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(h(r,n)>32)throw new Error(`convertRadix2: carry overflow from=${r} to=${n} carryBits=${h(r,n)}`);let o=0,s=0;const a=2**n-1,c=[];for(const i of e){if(t(i),i>=2**r)throw new Error(`convertRadix2: invalid data word=${i} from=${r}`);if(o=o<<r|i,s+r>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${r}`);for(s+=r;s>=n;s-=n)c.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=r)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&c.push(o>>>0),c}function f(e){return t(e),{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(c(t,e,256))}}}function d(e,n=!1){if(t(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,e)>32||h(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!r(t))throw new Error("radix2.encode input should be Uint8Array");return l(Array.from(t),8,e,!n)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(l(t,e,8,n))}}}function p(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,n){if(t(e),"function"!=typeof n)throw new Error("checksum fn should be function");return{encode(t){if(!r(t))throw new Error("checksum.encode: input should be Uint8Array");const i=n(t).slice(0,e),o=new Uint8Array(t.length+e);return o.set(t),o.set(i,t.length),o},decode(t){if(!r(t))throw new Error("checksum.decode: input should be Uint8Array");const i=t.slice(0,-e),o=n(i).slice(0,e),s=t.slice(-e);for(let t=0;t<e;t++)if(o[t]!==s[t])throw new Error("Invalid checksum");return i}}}e.utils={alphabet:i,chain:n,checksum:g,convertRadix:c,convertRadix2:l,radix:f,radix2:d,join:o,padding:s},e.base16=n(d(4),i("0123456789ABCDEF"),o("")),e.base32=n(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),e.base32nopad=n(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),e.base32hex=n(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),e.base32hexnopad=n(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),e.base32crockford=n(d(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),e.base64=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),e.base64nopad=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),e.base64url=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o("")),e.base64urlnopad=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const y=e=>n(f(58),i(e),o(""));e.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const m=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(t){let r="";for(let n=0;n<t.length;n+=8){const i=t.subarray(n,n+8);r+=e.base58.encode(i).padStart(m[i.length],"1")}return r},decode(t){let r=[];for(let n=0;n<t.length;n+=11){const i=t.slice(n,n+11),o=m.indexOf(i.length),s=e.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(r)}};e.createBase58check=t=>n(g(4,(e=>t(t(e)))),e.base58),e.base58check=e.createBase58check;const w=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),b=[996825010,642813549,513874426,1027748829,705979059];function v(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<b.length;e++)1==(t>>e&1)&&(r^=b[e]);return r}function _(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=v(i)^r>>5}i=v(i);for(let t=0;t<n;t++)i=v(i)^31&e.charCodeAt(t);for(let e of t)i=v(i)^e;for(let e=0;e<6;e++)i=v(i);return i^=r,w.encode(l([i%2**30],30,5,!1))}function E(e){const t="bech32"===e?1:734539939,r=d(5),n=r.decode,i=r.encode,o=p(n);function s(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(r instanceof Uint8Array&&(r=Array.from(r)),!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);const o=e.toLowerCase(),s=_(o,r,t);return`${o}1${w.encode(r)}${s}`}function a(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=n.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=n.slice(0,i),s=n.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=w.decode(s).slice(0,-6),c=_(o,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:a}}return{encode:s,decode:a,encodeFromBytes:function(e,t){return s(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:p(a),fromWords:n,fromWordsUnsafe:o,toWords:i}}e.bech32=E("bech32"),e.bech32m=E("bech32m"),e.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},e.hex=n(d(4),i("0123456789abcdef"),o(""),a((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const S={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},A="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";e.bytesToString=(e,t)=>{if("string"!=typeof e||!S.hasOwnProperty(e))throw new TypeError(A);if(!r(t))throw new TypeError("bytesToString() expects Uint8Array");return S[e].encode(t)},e.str=e.bytesToString;e.stringToBytes=(e,t)=>{if(!S.hasOwnProperty(e))throw new TypeError(A);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return S[e].decode(t)},e.bytes=e.stringToBytes}(c_);var u_={},h_={},l_={};function f_(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function d_(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function p_(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function g_(e,...t){if(!p_(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function y_(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");f_(e.outputLen),f_(e.blockLen)}function m_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function w_(e,t){g_(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(l_,"__esModule",{value:!0}),l_.isBytes=p_,l_.number=f_,l_.bool=d_,l_.bytes=g_,l_.hash=y_,l_.exists=m_,l_.output=w_;const b_={number:f_,bool:d_,bytes:g_,hash:y_,exists:m_,output:w_};l_.default=b_;var v_={};Object.defineProperty(v_,"__esModule",{value:!0}),v_.add5L=v_.add5H=v_.add4H=v_.add4L=v_.add3H=v_.add3L=v_.rotlBL=v_.rotlBH=v_.rotlSL=v_.rotlSH=v_.rotr32L=v_.rotr32H=v_.rotrBL=v_.rotrBH=v_.rotrSL=v_.rotrSH=v_.shrSL=v_.shrSH=v_.toBig=void 0,v_.fromBig=S_,v_.split=A_,v_.add=j_;const __=BigInt(2**32-1),E_=BigInt(32);function S_(e,t=!1){return t?{h:Number(e&__),l:Number(e>>E_&__)}:{h:0|Number(e>>E_&__),l:0|Number(e&__)}}function A_(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=S_(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const x_=(e,t)=>BigInt(e>>>0)<<E_|BigInt(t>>>0);v_.toBig=x_;const k_=(e,t,r)=>e>>>r;v_.shrSH=k_;const B_=(e,t,r)=>e<<32-r|t>>>r;v_.shrSL=B_;const I_=(e,t,r)=>e>>>r|t<<32-r;v_.rotrSH=I_;const T_=(e,t,r)=>e<<32-r|t>>>r;v_.rotrSL=T_;const R_=(e,t,r)=>e<<64-r|t>>>r-32;v_.rotrBH=R_;const O_=(e,t,r)=>e>>>r-32|t<<64-r;v_.rotrBL=O_;const L_=(e,t)=>t;v_.rotr32H=L_;const M_=(e,t)=>e;v_.rotr32L=M_;const C_=(e,t,r)=>e<<r|t>>>32-r;v_.rotlSH=C_;const P_=(e,t,r)=>t<<r|e>>>32-r;v_.rotlSL=P_;const N_=(e,t,r)=>t<<r-32|e>>>64-r;v_.rotlBH=N_;const U_=(e,t,r)=>e<<r-32|t>>>64-r;function j_(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}v_.rotlBL=U_;const $_=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);v_.add3L=$_;const H_=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;v_.add3H=H_;const z_=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);v_.add4L=z_;const D_=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;v_.add4H=D_;const F_=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);v_.add5L=F_;const q_=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;v_.add5H=q_;const K_={fromBig:S_,split:A_,toBig:x_,shrSH:k_,shrSL:B_,rotrSH:I_,rotrSL:T_,rotrBH:R_,rotrBL:O_,rotr32H:L_,rotr32L:M_,rotlSH:C_,rotlSL:P_,rotlBH:N_,rotlBL:U_,add:j_,add3L:$_,add3H:H_,add4L:z_,add4H:D_,add5H:q_,add5L:F_};v_.default=K_;var W_={},V_={};Object.defineProperty(V_,"__esModule",{value:!0}),V_.crypto=void 0,V_.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])},e.bytesToHex=function(e){(0,r.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=n[e[r]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=o(e.charCodeAt(i)),s=o(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=s,e.toBytes=a,e.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];(0,r.bytes)(i),t+=i.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};const t=V_,r=l_;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.rotr=(e,t)=>e<<32-t|e>>>t;e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);const n=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=i._0&&e<=i._9?e-i._0:e>=i._A&&e<=i._F?e-(i._A-10):e>=i._a&&e<=i._f?e-(i._a-10):void 0}function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){return"string"==typeof e&&(e=s(e)),(0,r.bytes)(e),e}e.nextTick=async()=>{};e.Hash=class{clone(){return this._cloneInto()}};const c={}.toString}(W_),Object.defineProperty(h_,"__esModule",{value:!0}),h_.shake256=h_.shake128=h_.keccak_512=h_.keccak_384=h_.keccak_256=h_.keccak_224=h_.sha3_512=h_.sha3_384=h_.sha3_256=h_.sha3_224=h_.Keccak=void 0,h_.keccakP=hE;const Z_=l_,G_=v_,J_=W_,Y_=[],X_=[],Q_=[],eE=BigInt(0),tE=BigInt(1),rE=BigInt(2),nE=BigInt(7),iE=BigInt(256),oE=BigInt(113);for(let e=0,t=tE,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Y_.push(2*(5*n+r)),X_.push((e+1)*(e+2)/2%64);let i=eE;for(let e=0;e<7;e++)t=(t<<tE^(t>>nE)*oE)%iE,t&rE&&(i^=tE<<(tE<<BigInt(e))-tE);Q_.push(i)}const[sE,aE]=(0,G_.split)(Q_,!0),cE=(e,t,r)=>r>32?(0,G_.rotlBH)(e,t,r):(0,G_.rotlSH)(e,t,r),uE=(e,t,r)=>r>32?(0,G_.rotlBL)(e,t,r):(0,G_.rotlSL)(e,t,r);function hE(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=cE(o,s,1)^r[n],c=uE(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=X_[r],o=cE(t,i,n),s=uE(t,i,n),a=Y_[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=sE[n],e[1]^=aE[n]}r.fill(0)}class lE extends J_.Hash{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Z_.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,J_.u32)(this.state)}keccak(){J_.isLE||(0,J_.byteSwap32)(this.state32),hE(this.state32,this.rounds),J_.isLE||(0,J_.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Z_.exists)(this);const{blockLen:t,state:r}=this,n=(e=(0,J_.toBytes)(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,Z_.exists)(this,!1),(0,Z_.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Z_.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Z_.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new lE(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}h_.Keccak=lE;const fE=(e,t,r)=>(0,J_.wrapConstructor)((()=>new lE(t,e,r)));h_.sha3_224=fE(6,144,28),h_.sha3_256=fE(6,136,32),h_.sha3_384=fE(6,104,48),h_.sha3_512=fE(6,72,64),h_.keccak_224=fE(1,144,28),h_.keccak_256=fE(1,136,32),h_.keccak_384=fE(1,104,48),h_.keccak_512=fE(1,72,64);const dE=(e,t,r)=>(0,J_.wrapXOFConstructorWithOpts)(((n={})=>new lE(t,e,void 0===n.dkLen?r:n.dkLen,!0)));var pE,gE;function yE(){return pE||(pE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.isValidChecksumAddress=e.getChecksumAddress=e.isValidHexAddress=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.HexChecksumAddressStruct=e.HexAddressStruct=e.StrictHexStruct=e.HexStruct=void 0;const t=iv,r=h_,n=nv,i=mE();function o(r){return(0,t.is)(r,e.HexStruct)}function s(r){return(0,t.is)(r,e.StrictHexStruct)}function a(o){(0,n.assert)((0,t.is)(o,e.HexChecksumAddressStruct),"Invalid hex address.");const s=u(o.toLowerCase()),a=u((0,i.bytesToHex)((0,r.keccak_256)(s)));return`0x${s.split("").map(((e,r)=>{const i=a[r];return(0,n.assert)((0,t.is)(i,(0,t.string)()),"Hash shorter than address."),parseInt(i,16)>7?e.toUpperCase():e})).join("")}`}function c(r){return!!(0,t.is)(r,e.HexChecksumAddressStruct)&&a(r)===r}function u(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu),e.HexAddressStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]{40}$/u),e.HexChecksumAddressStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-fA-F]{40}$/u),e.isHexString=o,e.isStrictHexString=s,e.assertIsHexString=function(e){(0,n.assert)(o(e),"Value must be a hexadecimal string.")},e.assertIsStrictHexString=function(e){(0,n.assert)(s(e),'Value must be a hexadecimal string, starting with "0x".')},e.isValidHexAddress=function(r){return(0,t.is)(r,e.HexAddressStruct)||c(r)},e.getChecksumAddress=a,e.isValidChecksumAddress=c,e.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},e.remove0x=u}(u_)),u_}function mE(){if(gE)return a_;gE=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.createDataView=a_.concatBytes=a_.valueToBytes=a_.base64ToBytes=a_.stringToBytes=a_.numberToBytes=a_.signedBigIntToBytes=a_.bigIntToBytes=a_.hexToBytes=a_.bytesToBase64=a_.bytesToString=a_.bytesToNumber=a_.bytesToSignedBigInt=a_.bytesToBigInt=a_.bytesToHex=a_.assertIsBytes=a_.isBytes=void 0;const e=c_,t=nv,r=yE();const n=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function i(e){return e instanceof Uint8Array}function o(e){(0,t.assert)(i(e),"Value must be a Uint8Array.")}function s(e){if(o(e),0===e.length)return"0x";const t=n(),i=new Array(e.length);for(let r=0;r<e.length;r++)i[r]=t[e[r]];return(0,r.add0x)(i.join(""))}function a(e){o(e);const t=s(e);return BigInt(t)}function c(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,r.assertIsHexString)(e);const t=(0,r.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,i=new Uint8Array(n.length/2);for(let e=0;e<i.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),o=t-(t<58?48:87),s=r-(r<58?48:87);i[e]=16*o+s}return i}function u(e){(0,t.assert)("bigint"==typeof e,"Value must be a bigint."),(0,t.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return c(e.toString(16))}function h(e){(0,t.assert)("number"==typeof e,"Value must be a number."),(0,t.assert)(e>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return c(e.toString(16))}function l(e){return(0,t.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function f(e){if("bigint"==typeof e)return u(e);if("number"==typeof e)return h(e);if("string"==typeof e)return e.startsWith("0x")?c(e):l(e);if(i(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}return a_.isBytes=i,a_.assertIsBytes=o,a_.bytesToHex=s,a_.bytesToBigInt=a,a_.bytesToSignedBigInt=function(e){o(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},a_.bytesToNumber=function(e){o(e);const r=a(e);return(0,t.assert)(r<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(r)},a_.bytesToString=function(e){return o(e),(new TextDecoder).decode(e)},a_.bytesToBase64=function(t){return o(t),e.base64.encode(t)},a_.hexToBytes=c,a_.bigIntToBytes=u,a_.signedBigIntToBytes=function(e,r){(0,t.assert)("bigint"==typeof e,"Value must be a bigint."),(0,t.assert)("number"==typeof r,"Byte length must be a number."),(0,t.assert)(r>0,"Byte length must be greater than 0."),(0,t.assert)(function(e,r){(0,t.assert)(r>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*r-1))}(e,r),"Byte length is too small to represent the given value.");let n=e;const i=new Uint8Array(r);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return i.reverse()},a_.numberToBytes=h,a_.stringToBytes=l,a_.base64ToBytes=function(r){return(0,t.assert)("string"==typeof r,"Value must be a string."),e.base64.decode(r)},a_.valueToBytes=f,a_.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=f(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},a_.createDataView=function(e){if(void 0!==C&&e instanceof C){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)},a_}h_.shake128=dE(31,168,16),h_.shake256=dE(31,136,32);var wE={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toCaipChainId=e.parseCaipAccountId=e.parseCaipChainId=e.isCaipAssetId=e.isCaipAssetType=e.isCaipAccountAddress=e.isCaipAccountId=e.isCaipReference=e.isCaipNamespace=e.isCaipChainId=e.KnownCaipNamespace=e.CaipAssetIdStruct=e.CaipAssetTypeStruct=e.CaipAccountAddressStruct=e.CaipAccountIdStruct=e.CaipReferenceStruct=e.CaipNamespaceStruct=e.CaipChainIdStruct=e.CAIP_ASSET_ID_REGEX=e.CAIP_ASSET_TYPE_REGEX=e.CAIP_ACCOUNT_ADDRESS_REGEX=e.CAIP_ACCOUNT_ID_REGEX=e.CAIP_REFERENCE_REGEX=e.CAIP_NAMESPACE_REGEX=e.CAIP_CHAIN_ID_REGEX=void 0;const t=iv;var r;function n(r){return(0,t.is)(r,e.CaipNamespaceStruct)}function i(r){return(0,t.is)(r,e.CaipReferenceStruct)}e.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,e.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,e.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,e.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,e.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,e.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,e.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,e.CaipChainIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_CHAIN_ID_REGEX),e.CaipNamespaceStruct=(0,t.pattern)((0,t.string)(),e.CAIP_NAMESPACE_REGEX),e.CaipReferenceStruct=(0,t.pattern)((0,t.string)(),e.CAIP_REFERENCE_REGEX),e.CaipAccountIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ACCOUNT_ID_REGEX),e.CaipAccountAddressStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ACCOUNT_ADDRESS_REGEX),e.CaipAssetTypeStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ASSET_TYPE_REGEX),e.CaipAssetIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ASSET_ID_REGEX),(r=e.KnownCaipNamespace||(e.KnownCaipNamespace={})).Bip122="bip122",r.Eip155="eip155",r.Wallet="wallet",e.isCaipChainId=function(r){return(0,t.is)(r,e.CaipChainIdStruct)},e.isCaipNamespace=n,e.isCaipReference=i,e.isCaipAccountId=function(r){return(0,t.is)(r,e.CaipAccountIdStruct)},e.isCaipAccountAddress=function(r){return(0,t.is)(r,e.CaipAccountAddressStruct)},e.isCaipAssetType=function(r){return(0,t.is)(r,e.CaipAssetTypeStruct)},e.isCaipAssetId=function(r){return(0,t.is)(r,e.CaipAssetIdStruct)},e.parseCaipChainId=function(t){const r=e.CAIP_CHAIN_ID_REGEX.exec(t);if(!r?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:r.groups.namespace,reference:r.groups.reference}},e.parseCaipAccountId=function(t){const r=e.CAIP_ACCOUNT_ID_REGEX.exec(t);if(!r?.groups)throw new Error("Invalid CAIP account ID.");return{address:r.groups.accountAddress,chainId:r.groups.chainId,chain:{namespace:r.groups.namespace,reference:r.groups.reference}}},e.toCaipChainId=function(t,r){if(!n(t))throw new Error(`Invalid "namespace", must match: ${e.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(r))throw new Error(`Invalid "reference", must match: ${e.CAIP_REFERENCE_REGEX.toString()}`);return`${t}:${r}`}}(wE);var bE={};Object.defineProperty(bE,"__esModule",{value:!0}),bE.ChecksumStruct=void 0;const vE=iv,_E=i_;bE.ChecksumStruct=(0,vE.size)((0,_E.base64)((0,vE.string)(),{paddingRequired:!0}),44,44);var EE={};Object.defineProperty(EE,"__esModule",{value:!0}),EE.createHex=EE.createBytes=EE.createBigInt=EE.createNumber=void 0;const SE=iv,AE=nv,xE=mE(),kE=yE(),BE=(0,SE.union)([(0,SE.number)(),(0,SE.bigint)(),(0,SE.string)(),kE.StrictHexStruct]),IE=(0,SE.coerce)((0,SE.number)(),BE,Number),TE=(0,SE.coerce)((0,SE.bigint)(),BE,BigInt);(0,SE.union)([kE.StrictHexStruct,(0,SE.instance)(Uint8Array)]);const RE=(0,SE.coerce)((0,SE.instance)(Uint8Array),(0,SE.union)([kE.StrictHexStruct]),xE.hexToBytes),OE=(0,SE.coerce)(kE.StrictHexStruct,(0,SE.instance)(Uint8Array),xE.bytesToHex);EE.createNumber=function(e){try{const t=(0,SE.create)(e,IE);return(0,AE.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof SE.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},EE.createBigInt=function(e){try{return(0,SE.create)(e,TE)}catch(e){if(e instanceof SE.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},EE.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,SE.create)(e,RE)}catch(e){if(e instanceof SE.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},EE.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,SE.create)(e,OE)}catch(e){if(e instanceof SE.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}};var LE,ME,CE={},PE=Pr&&Pr.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},NE=Pr&&Pr.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};Object.defineProperty(CE,"__esModule",{value:!0}),CE.FrozenSet=CE.FrozenMap=void 0;class UE{get size(){return PE(this,LE,"f").size}[(LE=new WeakMap,Symbol.iterator)](){return PE(this,LE,"f")[Symbol.iterator]()}constructor(e){LE.set(this,void 0),NE(this,LE,new Map(e),"f"),Object.freeze(this)}entries(){return PE(this,LE,"f").entries()}forEach(e,t){return PE(this,LE,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}get(e){return PE(this,LE,"f").get(e)}has(e){return PE(this,LE,"f").has(e)}keys(){return PE(this,LE,"f").keys()}values(){return PE(this,LE,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}CE.FrozenMap=UE;class jE{get size(){return PE(this,ME,"f").size}[(ME=new WeakMap,Symbol.iterator)](){return PE(this,ME,"f")[Symbol.iterator]()}constructor(e){ME.set(this,void 0),NE(this,ME,new Set(e),"f"),Object.freeze(this)}entries(){return PE(this,ME,"f").entries()}forEach(e,t){return PE(this,ME,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}has(e){return PE(this,ME,"f").has(e)}keys(){return PE(this,ME,"f").keys()}values(){return PE(this,ME,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}CE.FrozenSet=jE,Object.freeze(UE),Object.freeze(UE.prototype),Object.freeze(jE),Object.freeze(jE.prototype);var $E={};Object.defineProperty($E,"__esModule",{value:!0});var HE={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.getSafeJson=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=e.exactOptional=e.object=void 0;const t=iv,r=nv,n=Gv;function i({path:e,branch:t}){const r=e[e.length-1];return(0,n.hasProperty)(t[t.length-2],r)}function o(e){return new t.Struct({...e,type:`optional ${e.type}`,validator:(t,r)=>!i(r)||e.validator(t,r),refiner:(t,r)=>!i(r)||e.refiner(t,r)})}e.object=e=>(0,t.object)(e),e.exactOptional=o;function s(r){return(0,t.create)(r,e.JsonStruct)}e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),(0,t.define)("finite number",(e=>(0,t.is)(e,(0,t.number)())&&Number.isFinite(e))),(0,t.string)(),(0,t.array)((0,t.lazy)((()=>e.UnsafeJsonStruct))),(0,t.record)((0,t.string)(),(0,t.lazy)((()=>e.UnsafeJsonStruct)))]),e.JsonStruct=(0,t.coerce)(e.UnsafeJsonStruct,(0,t.any)(),(t=>((0,r.assertStruct)(t,e.UnsafeJsonStruct),JSON.parse(JSON.stringify(t,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t})))))),e.isValidJson=function(e){try{return s(e),!0}catch{return!1}},e.getSafeJson=s,e.getJsonSize=function(t){(0,r.assertStruct)(t,e.JsonStruct,"Invalid JSON value");const n=JSON.stringify(t);return(new TextEncoder).encode(n).byteLength},e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,e.object)({code:(0,t.integer)(),message:(0,t.string)(),data:o(e.JsonStruct),stack:o((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)]),e.JsonRpcRequestStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:o(e.JsonRpcParamsStruct)}),e.JsonRpcNotificationStruct=(0,e.object)({jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:o(e.JsonRpcParamsStruct)}),e.isJsonRpcNotification=function(r){return(0,t.is)(r,e.JsonRpcNotificationStruct)},e.assertIsJsonRpcNotification=function(t,n){(0,r.assertStruct)(t,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",n)},e.isJsonRpcRequest=function(r){return(0,t.is)(r,e.JsonRpcRequestStruct)},e.assertIsJsonRpcRequest=function(t,n){(0,r.assertStruct)(t,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",n)},e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]),e.isPendingJsonRpcResponse=function(r){return(0,t.is)(r,e.PendingJsonRpcResponseStruct)},e.assertIsPendingJsonRpcResponse=function(t,n){(0,r.assertStruct)(t,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",n)},e.isJsonRpcResponse=function(r){return(0,t.is)(r,e.JsonRpcResponseStruct)},e.assertIsJsonRpcResponse=function(t,n){(0,r.assertStruct)(t,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",n)},e.isJsonRpcSuccess=function(r){return(0,t.is)(r,e.JsonRpcSuccessStruct)},e.assertIsJsonRpcSuccess=function(t,n){(0,r.assertStruct)(t,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",n)},e.isJsonRpcFailure=function(r){return(0,t.is)(r,e.JsonRpcFailureStruct)},e.assertIsJsonRpcFailure=function(t,n){(0,r.assertStruct)(t,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",n)},e.isJsonRpcError=function(r){return(0,t.is)(r,e.JsonRpcErrorStruct)},e.assertIsJsonRpcError=function(t,n){(0,r.assertStruct)(t,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",n)},e.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}(HE);var zE={};Object.defineProperty(zE,"__esModule",{value:!0});var DE,FE,qE={},KE={exports:{}};function WE(){if(FE)return DE;FE=1;var e=1e3,t=60*e,r=60*t,n=24*r,i=7*n,o=365.25*n;function s(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}return DE=function(a,c){c=c||{};var u=typeof a;if("string"===u&&a.length>0)return function(s){if((s=String(s)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(a);if("number"===u&&isFinite(a))return c.long?function(i){var o=Math.abs(i);if(o>=n)return s(i,o,n,"day");if(o>=r)return s(i,o,r,"hour");if(o>=t)return s(i,o,t,"minute");if(o>=e)return s(i,o,e,"second");return i+" ms"}(a):function(i){var o=Math.abs(i);if(o>=n)return Math.round(i/n)+"d";if(o>=r)return Math.round(i/r)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))},DE}var VE=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=WE(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=VE(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(KE,KE.exports);var ZE=Pr&&Pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qE,"__esModule",{value:!0}),qE.createModuleLogger=qE.createProjectLogger=void 0;const GE=(0,ZE(KE.exports).default)("metamask");qE.createProjectLogger=function(e){return GE.extend(e)},qE.createModuleLogger=function(e,t){return e.extend(t)};var JE={};Object.defineProperty(JE,"__esModule",{value:!0}),JE.hexToBigInt=JE.hexToNumber=JE.bigIntToHex=JE.numberToHex=void 0;const YE=nv,XE=yE();JE.numberToHex=e=>((0,YE.assert)("number"==typeof e,"Value must be a number."),(0,YE.assert)(e>=0,"Value must be a non-negative number."),(0,YE.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,XE.add0x)(e.toString(16)));JE.bigIntToHex=e=>((0,YE.assert)("bigint"==typeof e,"Value must be a bigint."),(0,YE.assert)(e>=0,"Value must be a non-negative bigint."),(0,XE.add0x)(e.toString(16)));JE.hexToNumber=e=>{(0,XE.assertIsHexString)(e);const t=parseInt(e,16);return(0,YE.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};JE.hexToBigInt=e=>((0,XE.assertIsHexString)(e),BigInt((0,XE.add0x)(e)));var QE={};Object.defineProperty(QE,"__esModule",{value:!0});var eS={};Object.defineProperty(eS,"__esModule",{value:!0}),eS.createDeferredPromise=void 0,eS.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise(((e,n)=>{t=e,r=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:r}};var tS={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,(t=e.Duration||(e.Duration={}))[t.Millisecond=1]="Millisecond",t[t.Second=1e3]="Second",t[t.Minute=6e4]="Minute",t[t.Hour=36e5]="Hour",t[t.Day=864e5]="Day",t[t.Week=6048e5]="Week",t[t.Year=31536e6]="Year";const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};e.inMilliseconds=function(e,t){return r(e,"count"),e*t},e.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}(tS);var rS={};Object.defineProperty(rS,"__esModule",{value:!0});var nS={},iS={exports:{}};var oS={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var sS="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=oS,o=sS,s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],u=t.t={};let h=0;const l="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[l,n]],d=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=h++;o(e,i,t),u[e]=i,c[i]=t,s[i]=new RegExp(t,r?"g":void 0),a[i]=new RegExp(n,r?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${l}*`),d("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${l}+`),d("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),d("FULL",`^${c[u.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),d("LOOSE",`^${c[u.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),d("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),d("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?`+`(?:${c[u.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",c[u.COERCE],!0),d("COERCERTLFULL",c[u.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(iS,iS.exports);const aS=Object.freeze({loose:!0}),cS=Object.freeze({});var uS=e=>e?"object"!=typeof e?aS:e:cS;const hS=/^[0-9]+$/,lS=(e,t)=>{const r=hS.test(e),n=hS.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var fS={compareIdentifiers:lS,rcompareIdentifiers:(e,t)=>lS(t,e)};const dS=sS,{MAX_LENGTH:pS,MAX_SAFE_INTEGER:gS}=oS,{safeRe:yS,t:mS}=iS.exports,wS=uS,{compareIdentifiers:bS}=fS;class vS{constructor(e,t){if(t=wS(t),e instanceof vS){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>pS)throw new TypeError(`version is longer than ${pS} characters`);dS("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?yS[mS.LOOSE]:yS[mS.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gS||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<gS)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(dS("SemVer.compare",this.version,this.options,e),!(e instanceof vS)){if("string"==typeof e&&e===this.version)return 0;e=new vS(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof vS||(e=new vS(e,this.options)),bS(this.major,e.major)||bS(this.minor,e.minor)||bS(this.patch,e.patch)}comparePre(e){if(e instanceof vS||(e=new vS(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],n=e.prerelease[t];if(dS("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return bS(r,n)}while(++t)}compareBuild(e){e instanceof vS||(e=new vS(e,this.options));let t=0;do{const r=this.build[t],n=e.build[t];if(dS("build compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(r!==n)return bS(r,n)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===bS(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}var _S=vS;const ES=_S;var SS=(e,t,r=!1)=>{if(e instanceof ES)return e;try{return new ES(e,t)}catch(e){if(!r)return null;throw e}};const AS=SS;var xS=(e,t)=>{const r=AS(e,t);return r?r.version:null};const kS=SS;var BS=(e,t)=>{const r=kS(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const IS=_S;var TS=(e,t,r,n,i)=>{"string"==typeof r&&(i=n,n=r,r=void 0);try{return new IS(e instanceof IS?e.version:e,r).inc(t,n,i).version}catch(e){return null}};const RS=SS;var OS=(e,t)=>{const r=RS(e,null,!0),n=RS(t,null,!0),i=r.compare(n);if(0===i)return null;const o=i>0,s=o?r:n,a=o?n:r,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c)return a.patch||a.minor?s.patch?"patch":s.minor?"minor":"major":"major";const u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};const LS=_S;var MS=(e,t)=>new LS(e,t).major;const CS=_S;var PS=(e,t)=>new CS(e,t).minor;const NS=_S;var US=(e,t)=>new NS(e,t).patch;const jS=SS;var $S=(e,t)=>{const r=jS(e,t);return r&&r.prerelease.length?r.prerelease:null};const HS=_S;var zS=(e,t,r)=>new HS(e,r).compare(new HS(t,r));const DS=zS;var FS=(e,t,r)=>DS(t,e,r);const qS=zS;var KS=(e,t)=>qS(e,t,!0);const WS=_S;var VS=(e,t,r)=>{const n=new WS(e,r),i=new WS(t,r);return n.compare(i)||n.compareBuild(i)};const ZS=VS;var GS=(e,t)=>e.sort(((e,r)=>ZS(e,r,t)));const JS=VS;var YS=(e,t)=>e.sort(((e,r)=>JS(r,e,t)));const XS=zS;var QS=(e,t,r)=>XS(e,t,r)>0;const eA=zS;var tA=(e,t,r)=>eA(e,t,r)<0;const rA=zS;var nA=(e,t,r)=>0===rA(e,t,r);const iA=zS;var oA=(e,t,r)=>0!==iA(e,t,r);const sA=zS;var aA=(e,t,r)=>sA(e,t,r)>=0;const cA=zS;var uA=(e,t,r)=>cA(e,t,r)<=0;const hA=nA,lA=oA,fA=QS,dA=aA,pA=tA,gA=uA;var yA=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return hA(e,r,n);case"!=":return lA(e,r,n);case">":return fA(e,r,n);case">=":return dA(e,r,n);case"<":return pA(e,r,n);case"<=":return gA(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const mA=_S,wA=SS,{safeRe:bA,t:vA}=iS.exports;var _A,EA,SA,AA,xA,kA,BA=(e,t)=>{if(e instanceof mA)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?bA[vA.COERCERTLFULL]:bA[vA.COERCERTL];let i;for(;(i=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?bA[vA.COERCEFULL]:bA[vA.COERCE]);if(null===r)return null;const n=r[2],i=r[3]||"0",o=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return wA(`${n}.${i}.${o}${s}${a}`,t)};function IA(){if(AA)return SA;AA=1;const e=/\s+/g;class t{constructor(r,o){if(o=n(o),r instanceof t)return r.loose===!!o.loose&&r.includePrerelease===!!o.includePrerelease?r:new t(r.raw,o);if(r instanceof i)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&d))+":"+e,n=r.get(t);if(n)return n;const s=this.options.loose,g=s?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];e=e.replace(g,B(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(a[c.COMPARATORTRIM],u),o("comparator trim",e),e=e.replace(a[c.TILDETRIM],h),o("tilde trim",e),e=e.replace(a[c.CARETTRIM],l),o("caret trim",e);let y=e.split(" ").map((e=>m(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options)));s&&(y=y.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(a[c.COMPARATORLOOSE]))))),o("range list",y);const w=new Map,b=y.map((e=>new i(e,this.options)));for(const e of b){if(p(e))return[e];w.set(e.value,e)}w.size>1&&w.has("")&&w.delete("");const v=[...w.values()];return r.set(t,v),v}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>y(t,r)&&e.set.some((e=>y(e,r)&&t.every((t=>e.every((e=>t.intersects(e,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(I(this.set[t],e,this.options))return!0;return!1}}SA=t;const r=new(EA?_A:(EA=1,_A=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}})),n=uS,i=TA(),o=sS,s=_S,{safeRe:a,t:c,comparatorTrimReplace:u,tildeTrimReplace:h,caretTrimReplace:l}=iS.exports,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:d}=oS,p=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},m=(e,t)=>(o("comp",e,t),e=_(e,t),o("caret",e),e=b(e,t),o("tildes",e),e=S(e,t),o("xrange",e),e=x(e,t),o("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>v(e,t))).join(" "),v=(e,t)=>{const r=t.loose?a[c.TILDELOOSE]:a[c.TILDE];return e.replace(r,((t,r,n,i,s)=>{let a;return o("tilde",e,t,r,n,i,s),w(r)?a="":w(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:w(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(o("replaceTilde pr",s),a=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,o("tilde return",a),a}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{o("caret",e,t);const r=t.loose?a[c.CARETLOOSE]:a[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,s,a)=>{let c;return o("caret",e,t,r,i,s,a),w(r)?c="":w(i)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(s)?c="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(o("replaceCaret pr",a),c="0"===r?"0"===i?`>=${r}.${i}.${s}-${a} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s}-${a} <${+r+1}.0.0-0`):(o("no pr"),c="0"===r?"0"===i?`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s} <${+r+1}.0.0-0`),o("caret return",c),c}))},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map((e=>A(e,t))).join(" ")),A=(e,t)=>{e=e.trim();const r=t.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return e.replace(r,((r,n,i,s,a,c)=>{o("xRange",e,r,n,i,s,a,c);const u=w(i),h=u||w(s),l=h||w(a),f=l;return"="===n&&f&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(h&&(s=0),a=0,">"===n?(n=">=",h?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",h?i=+i+1:s=+s+1),"<"===n&&(c="-0"),r=`${n+i}.${s}.${a}${c}`):h?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:l&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),o("xRange return",r),r}))},x=(e,t)=>(o("replaceStars",e,t),e.trim().replace(a[c.STAR],"")),k=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),B=e=>(t,r,n,i,o,s,a,c,u,h,l,f)=>`${r=w(n)?"":w(i)?`>=${n}.0.0${e?"-0":""}`:w(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=w(u)?"":w(h)?`<${+u+1}.0.0-0`:w(l)?`<${u}.${+h+1}.0-0`:f?`<=${u}.${h}.${l}-${f}`:e?`<${u}.${h}.${+l+1}-0`:`<=${c}`}`.trim(),I=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==i.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return SA}function TA(){if(kA)return xA;kA=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,i){if(i=r(i),n instanceof t){if(n.loose===!!i.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,i),this.options=i,this.loose=!!i.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],o=t.match(r);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(e){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,n).test(this.value):""===e.operator?""===e.value||new c(this.value,n).test(e.semver):(!(n=r(n)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}xA=t;const r=uS,{safeRe:n,t:i}=iS.exports,o=yA,s=sS,a=_S,c=IA();return xA}const RA=IA();var OA=(e,t,r)=>{try{t=new RA(t,r)}catch(e){return!1}return t.test(e)};const LA=IA();var MA=(e,t)=>new LA(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const CA=_S,PA=IA();var NA=(e,t,r)=>{let n=null,i=null,o=null;try{o=new PA(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(n&&-1!==i.compare(e)||(n=e,i=new CA(n,r)))})),n};const UA=_S,jA=IA();var $A=(e,t,r)=>{let n=null,i=null,o=null;try{o=new jA(t,r)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new UA(n,r)))})),n};const HA=_S,zA=IA(),DA=QS;var FA=(e,t)=>{e=new zA(e,t);let r=new HA("0.0.0");if(e.test(r))return r;if(r=new HA("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const n=e.set[t];let i=null;n.forEach((e=>{const t=new HA(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!DA(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||r&&!DA(r,i)||(r=i)}return r&&e.test(r)?r:null};const qA=IA();var KA=(e,t)=>{try{return new qA(e,t).range||"*"}catch(e){return null}};const WA=_S,VA=TA(),{ANY:ZA}=VA,GA=IA(),JA=OA,YA=QS,XA=tA,QA=uA,ex=aA;var tx=(e,t,r,n)=>{let i,o,s,a,c;switch(e=new WA(e,n),t=new GA(t,n),r){case">":i=YA,o=QA,s=XA,a=">",c=">=";break;case"<":i=XA,o=ex,s=YA,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(JA(e,t,n))return!1;for(let r=0;r<t.set.length;++r){const u=t.set[r];let h=null,l=null;if(u.forEach((e=>{e.semver===ZA&&(e=new VA(">=0.0.0")),h=h||e,l=l||e,i(e.semver,h.semver,n)?h=e:s(e.semver,l.semver,n)&&(l=e)})),h.operator===a||h.operator===c)return!1;if((!l.operator||l.operator===a)&&o(e,l.semver))return!1;if(l.operator===c&&s(e,l.semver))return!1}return!0};const rx=tx;var nx=(e,t,r)=>rx(e,t,">",r);const ix=tx;var ox=(e,t,r)=>ix(e,t,"<",r);const sx=IA();var ax=(e,t,r)=>(e=new sx(e,r),t=new sx(t,r),e.intersects(t,r));const cx=OA,ux=zS;const hx=IA(),lx=TA(),{ANY:fx}=lx,dx=OA,px=zS,gx=[new lx(">=0.0.0-0")],yx=[new lx(">=0.0.0")],mx=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===fx){if(1===t.length&&t[0].semver===fx)return!0;e=r.includePrerelease?gx:yx}if(1===t.length&&t[0].semver===fx){if(r.includePrerelease)return!0;t=yx}const n=new Set;let i,o,s,a,c,u,h;for(const t of e)">"===t.operator||">="===t.operator?i=wx(i,t,r):"<"===t.operator||"<="===t.operator?o=bx(o,t,r):n.add(t.semver);if(n.size>1)return null;if(i&&o){if(s=px(i.semver,o.semver,r),s>0)return null;if(0===s&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of n){if(i&&!dx(e,String(i),r))return null;if(o&&!dx(e,String(o),r))return null;for(const n of t)if(!dx(e,String(n),r))return!1;return!0}let l=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver,f=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;l&&1===l.prerelease.length&&"<"===o.operator&&0===l.prerelease[0]&&(l=!1);for(const e of t){if(h=h||">"===e.operator||">="===e.operator,u=u||"<"===e.operator||"<="===e.operator,i)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),">"===e.operator||">="===e.operator){if(a=wx(i,e,r),a===e&&a!==i)return!1}else if(">="===i.operator&&!dx(i.semver,String(e),r))return!1;if(o)if(l&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===l.major&&e.semver.minor===l.minor&&e.semver.patch===l.patch&&(l=!1),"<"===e.operator||"<="===e.operator){if(c=bx(o,e,r),c===e&&c!==o)return!1}else if("<="===o.operator&&!dx(o.semver,String(e),r))return!1;if(!e.operator&&(o||i)&&0!==s)return!1}return!(i&&u&&!o&&0!==s)&&(!(o&&h&&!i&&0!==s)&&(!f&&!l))},wx=(e,t,r)=>{if(!e)return t;const n=px(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},bx=(e,t,r)=>{if(!e)return t;const n=px(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var vx=(e,t,r={})=>{if(e===t)return!0;e=new hx(e,r),t=new hx(t,r);let n=!1;e:for(const i of e.set){for(const e of t.set){const t=mx(i,e,r);if(n=n||null!==t,t)continue e}if(n)return!1}return!0};const _x=iS.exports,Ex=oS,Sx=_S,Ax=fS,xx=(e,t,r)=>{const n=[];let i=null,o=null;const s=e.sort(((e,t)=>ux(e,t,r)));for(const e of s){cx(e,t,r)?(o=e,i||(i=e)):(o&&n.push([i,o]),o=null,i=null)}i&&n.push([i,null]);const a=[];for(const[e,t]of n)e===t?a.push(e):t||e!==s[0]?t?e===s[0]?a.push(`<=${t}`):a.push(`${e} - ${t}`):a.push(`>=${e}`):a.push("*");const c=a.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return c.length<u.length?c:t};var kx={parse:SS,valid:xS,clean:BS,inc:TS,diff:OS,major:MS,minor:PS,patch:US,prerelease:$S,compare:zS,rcompare:FS,compareLoose:KS,compareBuild:VS,sort:GS,rsort:YS,gt:QS,lt:tA,eq:nA,neq:oA,gte:aA,lte:uA,cmp:yA,coerce:BA,Comparator:TA(),Range:IA(),satisfies:OA,toComparators:MA,maxSatisfying:NA,minSatisfying:$A,minVersion:FA,validRange:KA,outside:tx,gtr:nx,ltr:ox,intersects:ax,simplifyRange:xx,subset:vx,SemVer:Sx,re:_x.re,src:_x.src,tokens:_x.t,SEMVER_SPEC_VERSION:Ex.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ex.RELEASE_TYPES,compareIdentifiers:Ax.compareIdentifiers,rcompareIdentifiers:Ax.rcompareIdentifiers};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=iv,r=kx,n=nv;e.VersionStruct=(0,t.refine)((0,t.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),e.VersionRangeStruct=(0,t.refine)((0,t.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),e.isValidSemVerVersion=function(r){return(0,t.is)(r,e.VersionStruct)},e.isValidSemVerRange=function(r){return(0,t.is)(r,e.VersionRangeStruct)},e.assertIsSemVerVersion=function(t){(0,n.assertStruct)(t,e.VersionStruct)},e.assertIsSemVerRange=function(t){(0,n.assertStruct)(t,e.VersionRangeStruct)},e.gtVersion=function(e,t){return(0,r.gt)(e,t)},e.gtRange=function(e,t){return(0,r.gtr)(e,t)},e.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}(nS),function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(nv,e),r(i_,e),r(mE(),e),r(wE,e),r(bE,e),r(EE,e),r(CE,e),r($E,e),r(Pv,e),r(yE(),e),r(HE,e),r(zE,e),r(qE,e),r(Gv,e),r(JE,e),r(QE,e),r(eS,e),r(tS,e),r(rS,e),r(nS,e)}(rv),Object.defineProperty(tv,"__esModule",{value:!0}),tv.normalize=tv.recoverPublicKey=tv.concatSig=tv.legacyToBuffer=tv.isNullish=tv.padWithZeroes=void 0;const Bx=vh,Ix=rv;function Tx(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function Rx(e){return null==e}tv.padWithZeroes=Tx,tv.isNullish=Rx,tv.legacyToBuffer=function(e){return"string"!=typeof e||(0,Bx.isHexString)(e)?(0,Bx.toBuffer)(e):C.from(e)},tv.concatSig=function(e,t,r){const n=(0,Bx.fromSigned)(t),i=(0,Bx.fromSigned)(r),o=(0,Bx.bufferToInt)(e),s=Tx((0,Bx.toUnsigned)(n).toString("hex"),64),a=Tx((0,Bx.toUnsigned)(i).toString("hex"),64),c=(0,Ix.remove0x)((0,Ix.numberToHex)(o));return(0,Ix.add0x)(s.concat(a,c))},tv.recoverPublicKey=function(e,t){const r=(0,Bx.fromRpcSig)(t);return(0,Bx.ecrecover)(e,r.v,r.r,r.s)},tv.normalize=function(e){if(!Rx(e)){if("number"==typeof e){if(e<0)return"0x";const t=(0,Ix.numberToBytes)(e);e=(0,Ix.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,Ix.add0x)(e.toLowerCase())}},Object.defineProperty(bh,"__esModule",{value:!0}),bh.extractPublicKey=bh.recoverPersonalSignature=bh.personalSign=void 0;const Ox=vh,Lx=tv;function Mx(e,t){const r=(0,Ox.hashPersonalMessage)((0,Lx.legacyToBuffer)(e));return(0,Lx.recoverPublicKey)(r,t)}bh.personalSign=function({privateKey:e,data:t}){if((0,Lx.isNullish)(t))throw new Error("Missing data parameter");if((0,Lx.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,Lx.legacyToBuffer)(t),n=(0,Ox.hashPersonalMessage)(r),i=(0,Ox.ecsign)(n,e);return(0,Lx.concatSig)((0,Ox.toBuffer)(i.v),i.r,i.s)},bh.recoverPersonalSignature=function({data:e,signature:t}){if((0,Lx.isNullish)(e))throw new Error("Missing data parameter");if((0,Lx.isNullish)(t))throw new Error("Missing signature parameter");const r=Mx(e,t),n=(0,Ox.publicToAddress)(r);return(0,Ox.bufferToHex)(n)},bh.extractPublicKey=function({data:e,signature:t}){if((0,Lx.isNullish)(e))throw new Error("Missing data parameter");if((0,Lx.isNullish)(t))throw new Error("Missing signature parameter");return`0x${Mx(e,t).toString("hex")}`};var Cx={},Px={},Nx={},Ux={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParserError=e.getErrorStack=e.getErrorMessage=void 0;const t=rv;e.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,t.isObject)(e)&&(0,t.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";e.getErrorStack=e=>{if(e instanceof Error)return e.stack};class r extends Error{constructor(t,r){super(t),this.name="ParserError";const n=(0,e.getErrorStack)(r);n&&(this.stack=n)}}e.ParserError=r}(Ux);var jx={},$x={};Object.defineProperty($x,"__esModule",{value:!0}),$x.iterate=void 0;const Hx=rv;$x.iterate=function*(e,t=32){for(let r=0;r<e.length;r+=t){const n=e=>{(0,Hx.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,Hx.assert)(e%t==0,"Length must be a multiple of the size."),r+=e},i=e.subarray(r);yield{skip:n,value:i}}return{skip:()=>{},value:new Uint8Array}};var zx={},Dx={},Fx={},qx={};Object.defineProperty(qx,"__esModule",{value:!0}),qx.padEnd=qx.padStart=qx.set=void 0;const Kx=rv;qx.set=(e,t,r)=>(0,Kx.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);qx.padStart=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,Kx.concatBytes)([r,e])};qx.padEnd=(e,t=32)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,Kx.concatBytes)([e,r])},function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(qx,e)}(Fx),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.address=e.getAddress=void 0;const t=rv,r=Ux,n=Fx;e.getAddress=e=>{const i=(0,t.createBytes)(e);return(0,t.assert)(i.length<=20,new r.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${i.length} bytes.`)),(0,n.padStart)(i,20)},e.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode({buffer:r,value:i,packed:o}){const s=(0,e.getAddress)(i);if(o)return(0,t.concatBytes)([r,s]);const a=(0,n.padStart)(s);return(0,t.concatBytes)([r,a])},decode:({value:e})=>(0,t.add0x)((0,t.bytesToHex)(e.slice(12,32)))}}(Dx);var Wx={},Vx={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fixedBytes=e.getByteLength=void 0;const t=rv,r=Ux,n=Fx,i=/^bytes([0-9]{1,2})$/u;e.getByteLength=e=>{const n=e.match(i)?.[1];(0,t.assert)(n,`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`);const o=Number(n);return(0,t.assert)(o>0&&o<=32,new r.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${e}".`)),o},e.fixedBytes={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:i,buffer:o,value:s,packed:a}){const c=(0,e.getByteLength)(i),u=(0,t.createBytes)(s);return(0,t.assert)(u.length<=c,new r.ParserError(`Expected a value of length ${c}, but received a value of length ${u.length}.`)),(0,t.concatBytes)(a?[o,(0,n.padEnd)(u,c)]:[o,(0,n.padEnd)(u)])},decode({type:t,value:r}){const n=(0,e.getByteLength)(t);return r.slice(0,n)}}}(Vx);var Zx,Gx,Jx={};function Yx(){return Zx||(Zx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tuple=e.getTupleElements=void 0;const t=rv,r=Ux,n=lk(),i=/^\((.+)\)$/u;e.getTupleElements=e=>{(0,t.assert)(e.startsWith("(")&&e.endsWith(")"),new r.ParserError(`Invalid tuple type. Expected tuple type, but received "${e}".`));const n=[];let i="",o=0;for(let t=1;t<e.length-1;t++){const r=e[t];","===r&&0===o?(n.push(i.trim()),i=""):(i+=r,"("===r?o+=1:")"===r&&(o-=1))}return i.trim()&&n.push(i.trim()),n},e.tuple={isDynamic:t=>(0,e.getTupleElements)(t).some((e=>{const t=(0,n.getParser)(e);return(0,n.isDynamicParser)(t,e)})),isType:e=>(e=>i.test(e))(e),getByteLength(t){if((0,n.isDynamicParser)(this,t))return 32;return(0,e.getTupleElements)(t).reduce(((e,t)=>e+(0,n.getParser)(t).getByteLength(t)),0)},encode({type:t,buffer:r,value:i,packed:o,tight:s}){const a=(0,e.getTupleElements)(t);return(0,n.pack)({types:a,values:i,byteArray:r,packed:o,tight:s})},decode({type:t,value:r,skip:i}){const o=(0,e.getTupleElements)(t);return i(this.getByteLength(t)-32),(0,n.unpack)(o,r)}}}(Jx)),Jx}var Xx={},Qx={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.number=e.getBigInt=e.assertNumberLength=e.getLength=e.isSigned=void 0;const t=rv,r=Ux,n=Fx,i=/^u?int(?<length>[0-9]*)?$/u;e.isSigned=e=>!e.startsWith("u");e.getLength=e=>{if("int"===e||"uint"===e)return 256;const n=e.match(i);(0,t.assert)(n?.groups?.length,new r.ParserError(`Invalid number type. Expected a number type, but received "${e}".`));const o=parseInt(n.groups.length,10);return(0,t.assert)(o>=8&&o<=256,new r.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${e}".`)),(0,t.assert)(o%8==0,new r.ParserError(`Invalid number length. Expected a multiple of 8, but received "${e}".`)),o};e.assertNumberLength=(n,i)=>{const o=(0,e.getLength)(i),s=BigInt(2)**BigInt(o-((0,e.isSigned)(i)?1:0))-BigInt(1);(0,e.isSigned)(i)?(0,t.assert)(n>=-(s+BigInt(1))&&n<=s,new r.ParserError(`Number "${n}" is out of range for type "${i}".`)):(0,t.assert)(n<=s,new r.ParserError(`Number "${n}" is out of range for type "${i}".`))};e.getBigInt=e=>{try{return(0,t.createBigInt)(e)}catch{throw new r.ParserError(`Invalid number. Expected a valid number value, but received "${e}".`)}},e.number={isDynamic:!1,isType:e=>i.test(e),getByteLength:()=>32,encode({type:r,buffer:i,value:o,packed:s}){const a=(0,e.getBigInt)(o);if((0,e.assertNumberLength)(a,r),(0,e.isSigned)(r)){if(s){const n=(0,e.getLength)(r)/8;return(0,t.concatBytes)([i,(0,t.signedBigIntToBytes)(a,n)])}return(0,t.concatBytes)([i,(0,n.padStart)((0,t.signedBigIntToBytes)(a,32))])}if(s){const o=(0,e.getLength)(r)/8;return(0,t.concatBytes)([i,(0,n.padStart)((0,t.bigIntToBytes)(a),o)])}return(0,t.concatBytes)([i,(0,n.padStart)((0,t.bigIntToBytes)(a))])},decode({type:r,value:n}){const i=n.subarray(0,32);if((0,e.isSigned)(r)){const n=(0,t.bytesToSignedBigInt)(i);return(0,e.assertNumberLength)(n,r),n}const o=(0,t.bytesToBigInt)(i);return(0,e.assertNumberLength)(o,r),o}}}(Qx),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bool=e.getBooleanValue=void 0;const t=iv,r=rv,n=Ux,i=Qx,o=(0,t.coerce)((0,t.boolean)(),(0,t.union)([(0,t.literal)("true"),(0,t.literal)("false")]),(e=>"true"===e));e.getBooleanValue=e=>{try{return(0,t.create)(e,o)?BigInt(1):BigInt(0)}catch{throw new n.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${e}".`)}},e.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode({buffer:t,value:n,packed:o,tight:s}){const a=(0,e.getBooleanValue)(n);return o?(0,r.concatBytes)([t,(0,r.bigIntToBytes)(a)]):i.number.encode({type:"uint256",buffer:t,value:a,packed:o,tight:s})},decode:e=>i.number.decode({...e,type:"uint256"})===BigInt(1)}}(Xx);var ek={};Object.defineProperty(ek,"__esModule",{value:!0}),ek.bytes=void 0;const tk=rv,rk=Fx;ek.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode({buffer:e,value:t,packed:r}){const n=(0,tk.createBytes)(t);if(r)return(0,tk.concatBytes)([e,n]);const i=32*Math.ceil(n.byteLength/32);return(0,tk.concatBytes)([e,(0,rk.padStart)((0,tk.numberToBytes)(n.byteLength)),(0,rk.padEnd)(n,i)])},decode({value:e}){const t=e.subarray(0,32),r=(0,tk.bytesToNumber)(t);return e.slice(32,32+r)}};var nk={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fn=e.getFunction=void 0;const t=iv,r=rv,n=Ux,i=Vx,o=(0,t.coerce)((0,t.object)({address:r.StrictHexStruct,selector:r.StrictHexStruct}),(0,t.union)([r.StrictHexStruct,(0,t.instance)(Uint8Array)]),(e=>{const t=(0,r.createBytes)(e);return(0,r.assert)(24===t.length,new n.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${t.length} bytes.`)),{address:(0,r.bytesToHex)(t.subarray(0,20)),selector:(0,r.bytesToHex)(t.subarray(20,24))}}));e.getFunction=e=>{const n=(0,t.create)(e,o);return(0,r.concatBytes)([(0,r.hexToBytes)(n.address),(0,r.hexToBytes)(n.selector)])},e.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode({buffer:t,value:r,packed:n,tight:o}){const s=(0,e.getFunction)(r);return i.fixedBytes.encode({type:"bytes24",buffer:t,value:s,packed:n,tight:o})},decode:({value:e})=>({address:(0,r.bytesToHex)(e.slice(0,20)),selector:(0,r.bytesToHex)(e.slice(20,24))})}}(nk);var ik={};Object.defineProperty(ik,"__esModule",{value:!0});var ok={};Object.defineProperty(ok,"__esModule",{value:!0}),ok.string=void 0;const sk=rv,ak=ek;var ck,uk;function hk(){return ck||(ck=1,function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Dx,e),r((Gx||(Gx=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.array=e.getTupleType=e.getArrayType=e.isArrayType=void 0;const t=rv,r=Ux,n=lk(),i=Fx,o=Vx,s=Yx(),a=/^(?<type>.*)\[(?<length>\d*?)\]$/u;e.isArrayType=e=>a.test(e),e.getArrayType=e=>{const n=e.match(a);return(0,t.assert)(n?.groups?.type,new r.ParserError(`Invalid array type. Expected an array type, but received "${e}".`)),[n.groups.type,n.groups.length?parseInt(n.groups.length,10):void 0]},e.getTupleType=(e,t)=>`(${new Array(t).fill(e).join(",")})`,e.array={isDynamic(t){const[r,i]=(0,e.getArrayType)(t);return void 0===i||(0,n.isDynamicParser)((0,n.getParser)(r),r)},isType:t=>(0,e.isArrayType)(t),getByteLength(i){(0,t.assert)((0,e.isArrayType)(i),new r.ParserError(`Expected an array type, but received "${i}".`));const[o,a]=(0,e.getArrayType)(i);return(0,n.isDynamicParser)(this,i)||void 0===a?32:s.tuple.getByteLength((0,e.getTupleType)(o,a))},encode({type:a,buffer:c,value:u,packed:h,tight:l}){const[f,d]=(0,e.getArrayType)(a);if((0,t.assert)(!h||!(0,e.isArrayType)(f),new r.ParserError("Cannot pack nested arrays.")),h&&(0,n.isDynamicParser)((0,n.getParser)(f),f))return(0,n.pack)({types:new Array(u.length).fill(f),values:u,byteArray:c,packed:h,arrayPacked:!0,tight:l});if(d)return(0,t.assert)(d===u.length,new r.ParserError(`Array length does not match type length. Expected a length of ${d}, but received ${u.length}.`)),s.tuple.encode({type:(0,e.getTupleType)(f,d),buffer:c,value:u,packed:o.fixedBytes.isType(f)&&l,tight:l});if(h)return(0,n.pack)({types:new Array(u.length).fill(f),values:u,byteArray:c,packed:o.fixedBytes.isType(f)&&l,arrayPacked:!0,tight:l});const p=(0,i.padStart)((0,t.numberToBytes)(u.length));return(0,n.pack)({types:new Array(u.length).fill(f),values:u,byteArray:(0,t.concatBytes)([c,p]),packed:h,tight:l})},decode({type:i,value:o,...a}){const[c,u]=(0,e.getArrayType)(i);if(u){const n=s.tuple.decode({type:(0,e.getTupleType)(c,u),value:o,...a});return(0,t.assert)(n.length===u,new r.ParserError(`Array length does not match type length. Expected a length of ${u}, but received ${n.length}.`)),n}const h=(0,t.bytesToNumber)(o.subarray(0,32));return(0,n.unpack)(new Array(h).fill(c),o.subarray(32))}}}(Wx)),Wx),e),r(Xx,e),r(ek,e),r(Vx,e),r(nk,e),r(Qx,e),r(ik,e),r(ok,e),r(Yx(),e)}(zx)),zx}function lk(){return uk||(uk=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unpack=e.pack=e.isDynamicParser=e.getParser=void 0;const t=rv,r=Ux,n=$x,i=hk(),o=Fx;e.getParser=e=>{const t={address:i.address,array:i.array,bool:i.bool,bytes:i.bytes,fixedBytes:i.fixedBytes,function:i.fn,number:i.number,string:i.string,tuple:i.tuple},n=t[e];if(n)return n;const o=Object.values(t).find((t=>t.isType(e)));if(o)return o;throw new r.ParserError(`The type "${e}" is not supported.`)};e.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"==typeof r?r(t):r};e.pack=({types:n,values:i,packed:s=!1,tight:a=!1,arrayPacked:c=!1,byteArray:u=new Uint8Array})=>{(0,t.assert)(n.length===i.length,new r.ParserError(`The number of types (${n.length}) does not match the number of values (${i.length}).`));const{staticBuffer:h,dynamicBuffer:l,pointers:f}=n.reduce((({staticBuffer:r,dynamicBuffer:n,pointers:o},u,h)=>{const l=(0,e.getParser)(u),f=i[h];if(s||c||!(0,e.isDynamicParser)(l,u))return{staticBuffer:l.encode({buffer:r,value:f,type:u,packed:s,tight:a}),dynamicBuffer:n,pointers:o};return{staticBuffer:(0,t.concatBytes)([r,new Uint8Array(32)]),dynamicBuffer:l.encode({buffer:n,value:f,type:u,packed:s,tight:a}),pointers:[...o,{position:r.length,pointer:n.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,t.assert)(!s&&!c||0===l.length,new r.ParserError("Invalid pack state."));const d=h.length,p=f.reduce(((e,{pointer:r,position:n})=>{const i=(0,o.padStart)((0,t.numberToBytes)(d+r));return(0,o.set)(e,i,n)}),h);return(0,t.concatBytes)([u,p,l])};e.unpack=(i,o)=>{const s=(0,n.iterate)(o);return i.map((n=>{const{value:{value:i,skip:a},done:c}=s.next();(0,t.assert)(!c,new r.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${n}".`));const u=(0,e.getParser)(n);if((0,e.isDynamicParser)(u,n)){const e=(0,t.bytesToNumber)(i.subarray(0,32)),r=o.subarray(e);return u.decode({type:n,value:r,skip:a})}return u.decode({type:n,value:i,skip:a})}))}}(jx)),jx}ok.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode:({buffer:e,value:t,packed:r,tight:n})=>ak.bytes.encode({type:"bytes",buffer:e,value:(0,sk.stringToBytes)(t),packed:r,tight:n}),decode:e=>(0,sk.bytesToString)(ak.bytes.decode(e))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeSingle=e.decode=e.encodePacked=e.encodeSingle=e.encode=void 0;const t=rv,r=Ux,n=lk();e.encode=(e,t,i,o)=>{try{return(0,n.pack)({types:e,values:t,packed:i,tight:o})}catch(e){if(e instanceof r.ParserError)throw new r.ParserError(`Unable to encode value: ${e.message}`,e);throw new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(e)}`,e)}};e.encodeSingle=(t,r)=>(0,e.encode)([t],[r]);e.encodePacked=(t,r,n)=>(0,e.encode)(t,r,!0,n);e.decode=(e,i)=>{const o=(0,t.createBytes)(i);try{return(0,n.unpack)(e,o)}catch(e){if(e instanceof r.ParserError)throw new r.ParserError(`Unable to decode value: ${e.message}`,e);throw new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(e)}`,e)}};e.decodeSingle=(n,i)=>{const o=(0,e.decode)([n],i);return(0,t.assert)(1===o.length,new r.ParserError("Decoded value array has unexpected length.")),o[0]}}(Nx);var fk={},dk={};Object.defineProperty(dk,"__esModule",{value:!0}),function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(dk,e)}(fk),function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Nx,e),r(Ux,e),r(fk,e)}(Px);var pk={},gk={},yk={};function mk(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function wk(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function bk(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function vk(e,...t){if(!bk(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function _k(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");mk(e.outputLen),mk(e.blockLen)}function Ek(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Sk(e,t){vk(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(yk,"__esModule",{value:!0}),yk.output=yk.exists=yk.hash=yk.bytes=yk.bool=yk.number=yk.isBytes=void 0,yk.number=mk,yk.bool=wk,yk.isBytes=bk,yk.bytes=vk,yk.hash=_k,yk.exists=Ek,yk.output=Sk;const Ak={number:mk,bool:wk,bytes:vk,hash:_k,exists:Ek,output:Sk};yk.default=Ak;var xk={};Object.defineProperty(xk,"__esModule",{value:!0}),xk.add5L=xk.add5H=xk.add4H=xk.add4L=xk.add3H=xk.add3L=xk.add=xk.rotlBL=xk.rotlBH=xk.rotlSL=xk.rotlSH=xk.rotr32L=xk.rotr32H=xk.rotrBL=xk.rotrBH=xk.rotrSL=xk.rotrSH=xk.shrSL=xk.shrSH=xk.toBig=xk.split=xk.fromBig=void 0;const kk=BigInt(2**32-1),Bk=BigInt(32);function Ik(e,t=!1){return t?{h:Number(e&kk),l:Number(e>>Bk&kk)}:{h:0|Number(e>>Bk&kk),l:0|Number(e&kk)}}function Tk(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Ik(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}xk.fromBig=Ik,xk.split=Tk;const Rk=(e,t)=>BigInt(e>>>0)<<Bk|BigInt(t>>>0);xk.toBig=Rk;const Ok=(e,t,r)=>e>>>r;xk.shrSH=Ok;const Lk=(e,t,r)=>e<<32-r|t>>>r;xk.shrSL=Lk;const Mk=(e,t,r)=>e>>>r|t<<32-r;xk.rotrSH=Mk;const Ck=(e,t,r)=>e<<32-r|t>>>r;xk.rotrSL=Ck;const Pk=(e,t,r)=>e<<64-r|t>>>r-32;xk.rotrBH=Pk;const Nk=(e,t,r)=>e>>>r-32|t<<64-r;xk.rotrBL=Nk;const Uk=(e,t)=>t;xk.rotr32H=Uk;const jk=(e,t)=>e;xk.rotr32L=jk;const $k=(e,t,r)=>e<<r|t>>>32-r;xk.rotlSH=$k;const Hk=(e,t,r)=>t<<r|e>>>32-r;xk.rotlSL=Hk;const zk=(e,t,r)=>t<<r-32|e>>>64-r;xk.rotlBH=zk;const Dk=(e,t,r)=>e<<r-32|t>>>64-r;function Fk(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}xk.rotlBL=Dk,xk.add=Fk;const qk=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);xk.add3L=qk;const Kk=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;xk.add3H=Kk;const Wk=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);xk.add4L=Wk;const Vk=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;xk.add4H=Vk;const Zk=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);xk.add5L=Zk;const Gk=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;xk.add5H=Gk;const Jk={fromBig:Ik,split:Tk,toBig:Rk,shrSH:Ok,shrSL:Lk,rotrSH:Mk,rotrSL:Ck,rotrBH:Pk,rotrBL:Nk,rotr32H:Uk,rotr32L:jk,rotlSH:$k,rotlSL:Hk,rotlBH:zk,rotlBL:Dk,add:Fk,add3L:qk,add3H:Kk,add4L:Wk,add4H:Vk,add5H:Gk,add5L:Zk};xk.default=Jk;var Yk={},Xk={};Object.defineProperty(Xk,"__esModule",{value:!0}),Xk.crypto=void 0,Xk.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;const t=Xk,r=yk;e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name};e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.rotr=(e,t)=>e<<32-t|e>>>t;e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t),e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])};const n=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){(0,r.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=n[e[r]];return t};const i=48,o=57,s=65,a=70,c=97,u=102;function h(e){return e>=i&&e<=o?e-i:e>=s&&e<=a?e-(s-10):e>=c&&e<=u?e-(c-10):void 0}e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=h(e.charCodeAt(i)),o=h(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n};function l(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function f(e){return"string"==typeof e&&(e=l(e)),(0,r.bytes)(e),e}e.nextTick=async()=>{},e.asyncLoop=async function(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=l,e.toBytes=f,e.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];(0,r.bytes)(i),t+=i.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n};e.Hash=class{clone(){return this._cloneInto()}};const d={}.toString;e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==d.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(f(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(f(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(f(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(Yk),Object.defineProperty(gk,"__esModule",{value:!0}),gk.shake256=gk.shake128=gk.keccak_512=gk.keccak_384=gk.keccak_256=gk.keccak_224=gk.sha3_512=gk.sha3_384=gk.sha3_256=gk.sha3_224=gk.Keccak=gk.keccakP=void 0;const Qk=yk,eB=xk,tB=Yk,rB=[],nB=[],iB=[],oB=BigInt(0),sB=BigInt(1),aB=BigInt(2),cB=BigInt(7),uB=BigInt(256),hB=BigInt(113);for(let e=0,t=sB,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],rB.push(2*(5*n+r)),nB.push((e+1)*(e+2)/2%64);let i=oB;for(let e=0;e<7;e++)t=(t<<sB^(t>>cB)*hB)%uB,t&aB&&(i^=sB<<(sB<<BigInt(e))-sB);iB.push(i)}const[lB,fB]=(0,eB.split)(iB,!0),dB=(e,t,r)=>r>32?(0,eB.rotlBH)(e,t,r):(0,eB.rotlSH)(e,t,r),pB=(e,t,r)=>r>32?(0,eB.rotlBL)(e,t,r):(0,eB.rotlSL)(e,t,r);function gB(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=dB(o,s,1)^r[n],c=pB(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=nB[r],o=dB(t,i,n),s=pB(t,i,n),a=rB[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=lB[n],e[1]^=fB[n]}r.fill(0)}gk.keccakP=gB;class yB extends tB.Hash{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Qk.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,tB.u32)(this.state)}keccak(){tB.isLE||(0,tB.byteSwap32)(this.state32),gB(this.state32,this.rounds),tB.isLE||(0,tB.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Qk.exists)(this);const{blockLen:t,state:r}=this,n=(e=(0,tB.toBytes)(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,Qk.exists)(this,!1),(0,Qk.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Qk.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Qk.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new yB(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}gk.Keccak=yB;const mB=(e,t,r)=>(0,tB.wrapConstructor)((()=>new yB(t,e,r)));gk.sha3_224=mB(6,144,28),gk.sha3_256=mB(6,136,32),gk.sha3_384=mB(6,104,48),gk.sha3_512=mB(6,72,64),gk.keccak_224=mB(1,144,28),gk.keccak_256=mB(1,136,32),gk.keccak_384=mB(1,104,48),gk.keccak_512=mB(1,72,64);const wB=(e,t,r)=>(0,tB.wrapXOFConstructorWithOpts)(((n={})=>new yB(t,e,void 0===n.dkLen?r:n.dkLen,!0)));gk.shake128=wB(31,168,16),gk.shake256=wB(31,136,32);var bB={exports:{}};!function(e,t){var r=Pr&&Pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0,t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(n.default.bytes(t),e(t))};const n=r(yk),i=Yk,o=n.default.bool;t.assertBool=o;const s=n.default.bytes;t.assertBytes=s;var a=Yk;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return a.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return a.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return a.utf8ToBytes}}),t.crypto=(()=>{const t="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r=md.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()}(bB,bB.exports),Object.defineProperty(pk,"__esModule",{value:!0}),pk.keccak512=pk.keccak384=pk.keccak256=pk.keccak224=void 0;const vB=gk,_B=bB.exports;pk.keccak224=(0,_B.wrapHash)(vB.keccak_224),pk.keccak256=(()=>{const e=(0,_B.wrapHash)(vB.keccak_256);return e.create=vB.keccak_256.create,e})(),pk.keccak384=(0,_B.wrapHash)(vB.keccak_384),pk.keccak512=(0,_B.wrapHash)(vB.keccak_512),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverTypedSignature=e.signTypedData=e.typedSignatureHash=e.TypedDataUtils=e.TYPED_MESSAGE_SCHEMA=e.SignTypedDataVersion=void 0;const t=vh,r=Px,n=hk(),i=Fx,o=rv,s=pk,a=tv;var c;function u(e,t){if(!Object.keys(c).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,o.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),i=(0,n.getLength)(e),s=BigInt(2)**BigInt(i)-BigInt(1);return(0,o.assert)(r>=-s&&r<=s,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function l(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,i.padStart)((0,o.bigIntToBytes)(t),20)}function f(e,n,a,p,g){if(u(g,[c.V3,c.V4]),void 0!==e[a])return["bytes32",g===c.V4&&null==p?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,t.arrToBufArr)((0,s.keccak256)(d(a,p,e,g)))];if("function"===a)throw new Error('Unsupported or invalid type: "function"');if(void 0===p)throw new Error(`missing value for field ${n} of type ${a}`);if("address"===a){if("number"==typeof p)return["address",(0,i.padStart)((0,o.numberToBytes)(p),20)];if((0,o.isStrictHexString)(p))return["address",(0,o.add0x)(p)];if("string"==typeof p)return["address",l(p).subarray(0,20)]}if("bool"===a)return["bool",Boolean(p)];if("bytes"===a)return"number"==typeof p?p=(0,o.numberToBytes)(p):(0,o.isStrictHexString)(p)||"0x"===p?p=(0,o.hexToBytes)(p):"string"==typeof p&&(p=(0,o.stringToBytes)(p)),["bytes32",(0,t.arrToBufArr)((0,s.keccak256)(p))];if(a.startsWith("bytes")&&"bytes"!==a&&!a.includes("["))return"number"==typeof p?p<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,o.bigIntToBytes)(BigInt(p))]:(0,o.isStrictHexString)(p)?["bytes32",(0,o.hexToBytes)(p)]:["bytes32",p];if(a.startsWith("int")&&!a.includes("[")){const e=h(a,p);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===a)return p="number"==typeof p?(0,o.numberToBytes)(p):(0,o.stringToBytes)(null!=p?p:""),["bytes32",(0,t.arrToBufArr)((0,s.keccak256)(p))];if(a.endsWith("]")){if(g===c.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const i=a.slice(0,a.lastIndexOf("[")),o=p.map((t=>f(e,n,i,t,g)));return["bytes32",(0,t.arrToBufArr)((0,s.keccak256)((0,r.encode)(o.map((([e])=>e)),o.map((([,e])=>e)))))]}return[a,p]}function d(e,n,i,o){u(o,[c.V3,c.V4]);const s=["bytes32"],a=[m(e,i)];for(const t of i[e]){if(o===c.V3&&void 0===n[t.name])continue;const[e,r]=f(i,t.name,t.type,n[t.name],o);s.push(e),a.push(r)}return(0,t.arrToBufArr)((0,r.encode)(s,a))}function p(e,t){let r="";const n=g(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function g(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||void 0===t[e])return r;r.add(e);for(const n of t[e])g(n.type,t,r);return r}function y(e,r,n,i){u(i,[c.V3,c.V4]);const o=d(e,r,n,i),a=(0,s.keccak256)(o);return(0,t.arrToBufArr)(a)}function m(e,r){const n=(0,o.stringToBytes)(p(e,r));return(0,t.arrToBufArr)((0,s.keccak256)(n))}function w(t){const r={};for(const n in e.TYPED_MESSAGE_SCHEMA.properties)t[n]&&(r[n]=t[n]);return"types"in r&&(r.types=Object.assign({EIP712Domain:[]},r.types)),r}function b(e,t){u(t,[c.V3,c.V4]);const r=w(e),{domain:n}=r;return y("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function v(e,t){if((0,n.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,n.getArrayType)(e);return t.map((e=>v(r,e)))}if("address"===e){if("number"==typeof t)return(0,i.padStart)((0,o.numberToBytes)(t),20);if((0,o.isStrictHexString)(t))return(0,i.padStart)((0,o.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,i.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,n.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,o.numberToBytes)(t).subarray(0,r);if((0,o.isStrictHexString)(t))return(0,o.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,n.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function _(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,i.padStart)((0,o.bigIntToBytes)(r),32);const s=(0,n.getLength)(e),a=BigInt.asIntN(s,r);return(0,o.signedBigIntToBytes)(a,32)}return t}))}function E(e){const c=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw c;const u=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(s=r,s.map((e=>"number"==typeof e?(0,i.padStart)((0,o.numberToBytes)(e),32):(0,o.isStrictHexString)(e)?(0,i.padStart)((0,o.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,i.padStart)(e.subarray(0,32),32):e)))};var s;if(t.startsWith("int")&&(0,n.isArrayType)(t)){const[i,o]=(0,n.getArrayType)(t);return{name:e,type:`bytes32[${null!=o?o:""}]`,value:_(i,r)}}return{name:e,type:t,value:v(t,r)}})),h=u.map((e=>"bytes"!==e.type?e.value:(0,a.legacyToBuffer)(e.value))),l=u.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),f=e.map((e=>{if(!e.name)throw c;return`${e.type} ${e.name}`}));return(0,t.arrToBufArr)((0,s.keccak256)((0,r.encodePacked)(["bytes32","bytes32"],[(0,s.keccak256)((0,r.encodePacked)(["string[]"],[f],!0)),(0,s.keccak256)((0,r.encodePacked)(l,h,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(c=e.SignTypedDataVersion||(e.SignTypedDataVersion={})),e.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},e.TypedDataUtils={encodeData:d,encodeType:p,findTypeDependencies:g,hashStruct:y,hashType:m,sanitizeData:w,eip712Hash:function(e,r){u(r,[c.V3,c.V4]);const n=w(e),i=[(0,o.hexToBytes)("1901")];return i.push(b(e,r)),"EIP712Domain"!==n.primaryType&&i.push(y(n.primaryType,n.message,n.types,r)),(0,t.arrToBufArr)((0,s.keccak256)((0,o.concatBytes)(i)))},eip712DomainHash:b},e.typedSignatureHash=function(e){const t=E(e);return(0,o.bytesToHex)(t)},e.signTypedData=function({privateKey:r,data:n,version:i}){if(u(i),(0,a.isNullish)(n))throw new Error("Missing data parameter");if((0,a.isNullish)(r))throw new Error("Missing private key parameter");const s=i===c.V1?E(n):e.TypedDataUtils.eip712Hash(n,i),h=(0,t.ecsign)(s,r);return(0,a.concatSig)((0,t.arrToBufArr)((0,o.bigIntToBytes)(h.v)),h.r,h.s)},e.recoverTypedSignature=function({data:r,signature:n,version:i}){if(u(i),(0,a.isNullish)(r))throw new Error("Missing data parameter");if((0,a.isNullish)(n))throw new Error("Missing signature parameter");const s=i===c.V1?E(r):e.TypedDataUtils.eip712Hash(r,i),h=(0,a.recoverPublicKey)(s,n),l=(0,t.publicToAddress)(h);return(0,o.bytesToHex)(l)}}(Cx);var EB={},SB={exports:{}},AB=Nr(Object.freeze({__proto__:null,default:{}}));!function(e){!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=t(),s=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function g(e,t,r,n){return p(e,t,r,n,16)}function y(e,t,r,n){return p(e,t,r,n,32)}function m(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,w=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=o,E=s,S=a,A=c,x=u,k=h,B=l,I=f,T=d,R=p,O=g,L=y,M=m,C=w,P=b,N=v,U=0;U<20;U+=2)_^=(i=(M^=(i=(T^=(i=(x^=(i=_+M|0)<<7|i>>>25)+_|0)<<9|i>>>23)+x|0)<<13|i>>>19)+T|0)<<18|i>>>14,k^=(i=(E^=(i=(C^=(i=(R^=(i=k+E|0)<<7|i>>>25)+k|0)<<9|i>>>23)+R|0)<<13|i>>>19)+C|0)<<18|i>>>14,O^=(i=(B^=(i=(S^=(i=(P^=(i=O+B|0)<<7|i>>>25)+O|0)<<9|i>>>23)+P|0)<<13|i>>>19)+S|0)<<18|i>>>14,N^=(i=(L^=(i=(I^=(i=(A^=(i=N+L|0)<<7|i>>>25)+N|0)<<9|i>>>23)+A|0)<<13|i>>>19)+I|0)<<18|i>>>14,_^=(i=(A^=(i=(S^=(i=(E^=(i=_+A|0)<<7|i>>>25)+_|0)<<9|i>>>23)+E|0)<<13|i>>>19)+S|0)<<18|i>>>14,k^=(i=(x^=(i=(I^=(i=(B^=(i=k+x|0)<<7|i>>>25)+k|0)<<9|i>>>23)+B|0)<<13|i>>>19)+I|0)<<18|i>>>14,O^=(i=(R^=(i=(T^=(i=(L^=(i=O+R|0)<<7|i>>>25)+O|0)<<9|i>>>23)+L|0)<<13|i>>>19)+T|0)<<18|i>>>14,N^=(i=(P^=(i=(C^=(i=(M^=(i=N+P|0)<<7|i>>>25)+N|0)<<9|i>>>23)+M|0)<<13|i>>>19)+C|0)<<18|i>>>14;_=_+o|0,E=E+s|0,S=S+a|0,A=A+c|0,x=x+u|0,k=k+h|0,B=B+l|0,I=I+f|0,T=T+d|0,R=R+p|0,O=O+g|0,L=L+y|0,M=M+m|0,C=C+w|0,P=P+b|0,N=N+v|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=A>>>0&255,e[13]=A>>>8&255,e[14]=A>>>16&255,e[15]=A>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=k>>>0&255,e[21]=k>>>8&255,e[22]=k>>>16&255,e[23]=k>>>24&255,e[24]=B>>>0&255,e[25]=B>>>8&255,e[26]=B>>>16&255,e[27]=B>>>24&255,e[28]=I>>>0&255,e[29]=I>>>8&255,e[30]=I>>>16&255,e[31]=I>>>24&255,e[32]=T>>>0&255,e[33]=T>>>8&255,e[34]=T>>>16&255,e[35]=T>>>24&255,e[36]=R>>>0&255,e[37]=R>>>8&255,e[38]=R>>>16&255,e[39]=R>>>24&255,e[40]=O>>>0&255,e[41]=O>>>8&255,e[42]=O>>>16&255,e[43]=O>>>24&255,e[44]=L>>>0&255,e[45]=L>>>8&255,e[46]=L>>>16&255,e[47]=L>>>24&255,e[48]=M>>>0&255,e[49]=M>>>8&255,e[50]=M>>>16&255,e[51]=M>>>24&255,e[52]=C>>>0&255,e[53]=C>>>8&255,e[54]=C>>>16&255,e[55]=C>>>24&255,e[56]=P>>>0&255,e[57]=P>>>8&255,e[58]=P>>>16&255,e[59]=P>>>24&255,e[60]=N>>>0&255,e[61]=N>>>8&255,e[62]=N>>>16&255,e[63]=N>>>24&255}(e,t,r,n)}function w(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,h=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,w=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,v=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)o^=(i=(m^=(i=(d^=(i=(u^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+d|0)<<18|i>>>14,h^=(i=(s^=(i=(w^=(i=(p^=(i=h+s|0)<<7|i>>>25)+h|0)<<9|i>>>23)+p|0)<<13|i>>>19)+w|0)<<18|i>>>14,g^=(i=(l^=(i=(a^=(i=(b^=(i=g+l|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,v^=(i=(y^=(i=(f^=(i=(c^=(i=v+y|0)<<7|i>>>25)+v|0)<<9|i>>>23)+c|0)<<13|i>>>19)+f|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,h^=(i=(u^=(i=(f^=(i=(l^=(i=h+u|0)<<7|i>>>25)+h|0)<<9|i>>>23)+l|0)<<13|i>>>19)+f|0)<<18|i>>>14,g^=(i=(p^=(i=(d^=(i=(y^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+d|0)<<18|i>>>14,v^=(i=(b^=(i=(w^=(i=(m^=(i=v+b|0)<<7|i>>>25)+v|0)<<9|i>>>23)+m|0)<<13|i>>>19)+w|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=h>>>0&255,e[5]=h>>>8&255,e[6]=h>>>16&255,e[7]=h>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=v>>>0&255,e[13]=v>>>8&255,e[14]=v>>>16&255,e[15]=v>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=f>>>0&255,e[21]=f>>>8&255,e[22]=f>>>16&255,e[23]=f>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,n,i,o,s){var a,c,u=new Uint8Array(16),h=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(m(h,u,s,b),c=0;c<64;c++)e[t+c]=r[n+c]^h[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(m(h,u,s,b),c=0;c<i;c++)e[t+c]=r[n+c]^h[c];return 0}function _(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(m(c,a,i,b),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(m(c,a,i,b),s=0;s<r;s++)e[t+s]=c[s];return 0}function E(e,t,r,n,i){var o=new Uint8Array(32);w(o,n,i,b);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return _(e,t,r,s,o)}function S(e,t,r,n,i,o,s){var a=new Uint8Array(32);w(a,o,s,b);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return v(e,t,r,n,i,c,a)}var A=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function x(e,t,r,n,i,o){var s=new A(o);return s.update(r,n,i),s.finish(e,t),0}function k(e,t,r,n,i,o){var s=new Uint8Array(16);return x(s,0,r,n,i,o),g(e,t,s,0)}function B(e,t,r,n,i){var o;if(r<32)return-1;for(S(e,0,t,0,r,n,i),x(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function I(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(E(s,0,32,n,i),0!==k(t,16,t,32,r-32,s))return-1;for(S(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function T(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function R(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function O(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function L(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(R(a),R(a),R(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,O(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function M(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return L(r,e),L(n,t),y(r,0,n,0)}function C(e){var t=new Uint8Array(32);return L(t,e),1&t[0]}function P(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function N(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function j(e,t,r){var n,i,o=0,s=0,a=0,c=0,u=0,h=0,l=0,f=0,d=0,p=0,g=0,y=0,m=0,w=0,b=0,v=0,_=0,E=0,S=0,A=0,x=0,k=0,B=0,I=0,T=0,R=0,O=0,L=0,M=0,C=0,P=0,N=r[0],U=r[1],j=r[2],$=r[3],H=r[4],z=r[5],D=r[6],F=r[7],q=r[8],K=r[9],W=r[10],V=r[11],Z=r[12],G=r[13],J=r[14],Y=r[15];o+=(n=t[0])*N,s+=n*U,a+=n*j,c+=n*$,u+=n*H,h+=n*z,l+=n*D,f+=n*F,d+=n*q,p+=n*K,g+=n*W,y+=n*V,m+=n*Z,w+=n*G,b+=n*J,v+=n*Y,s+=(n=t[1])*N,a+=n*U,c+=n*j,u+=n*$,h+=n*H,l+=n*z,f+=n*D,d+=n*F,p+=n*q,g+=n*K,y+=n*W,m+=n*V,w+=n*Z,b+=n*G,v+=n*J,_+=n*Y,a+=(n=t[2])*N,c+=n*U,u+=n*j,h+=n*$,l+=n*H,f+=n*z,d+=n*D,p+=n*F,g+=n*q,y+=n*K,m+=n*W,w+=n*V,b+=n*Z,v+=n*G,_+=n*J,E+=n*Y,c+=(n=t[3])*N,u+=n*U,h+=n*j,l+=n*$,f+=n*H,d+=n*z,p+=n*D,g+=n*F,y+=n*q,m+=n*K,w+=n*W,b+=n*V,v+=n*Z,_+=n*G,E+=n*J,S+=n*Y,u+=(n=t[4])*N,h+=n*U,l+=n*j,f+=n*$,d+=n*H,p+=n*z,g+=n*D,y+=n*F,m+=n*q,w+=n*K,b+=n*W,v+=n*V,_+=n*Z,E+=n*G,S+=n*J,A+=n*Y,h+=(n=t[5])*N,l+=n*U,f+=n*j,d+=n*$,p+=n*H,g+=n*z,y+=n*D,m+=n*F,w+=n*q,b+=n*K,v+=n*W,_+=n*V,E+=n*Z,S+=n*G,A+=n*J,x+=n*Y,l+=(n=t[6])*N,f+=n*U,d+=n*j,p+=n*$,g+=n*H,y+=n*z,m+=n*D,w+=n*F,b+=n*q,v+=n*K,_+=n*W,E+=n*V,S+=n*Z,A+=n*G,x+=n*J,k+=n*Y,f+=(n=t[7])*N,d+=n*U,p+=n*j,g+=n*$,y+=n*H,m+=n*z,w+=n*D,b+=n*F,v+=n*q,_+=n*K,E+=n*W,S+=n*V,A+=n*Z,x+=n*G,k+=n*J,B+=n*Y,d+=(n=t[8])*N,p+=n*U,g+=n*j,y+=n*$,m+=n*H,w+=n*z,b+=n*D,v+=n*F,_+=n*q,E+=n*K,S+=n*W,A+=n*V,x+=n*Z,k+=n*G,B+=n*J,I+=n*Y,p+=(n=t[9])*N,g+=n*U,y+=n*j,m+=n*$,w+=n*H,b+=n*z,v+=n*D,_+=n*F,E+=n*q,S+=n*K,A+=n*W,x+=n*V,k+=n*Z,B+=n*G,I+=n*J,T+=n*Y,g+=(n=t[10])*N,y+=n*U,m+=n*j,w+=n*$,b+=n*H,v+=n*z,_+=n*D,E+=n*F,S+=n*q,A+=n*K,x+=n*W,k+=n*V,B+=n*Z,I+=n*G,T+=n*J,R+=n*Y,y+=(n=t[11])*N,m+=n*U,w+=n*j,b+=n*$,v+=n*H,_+=n*z,E+=n*D,S+=n*F,A+=n*q,x+=n*K,k+=n*W,B+=n*V,I+=n*Z,T+=n*G,R+=n*J,O+=n*Y,m+=(n=t[12])*N,w+=n*U,b+=n*j,v+=n*$,_+=n*H,E+=n*z,S+=n*D,A+=n*F,x+=n*q,k+=n*K,B+=n*W,I+=n*V,T+=n*Z,R+=n*G,O+=n*J,L+=n*Y,w+=(n=t[13])*N,b+=n*U,v+=n*j,_+=n*$,E+=n*H,S+=n*z,A+=n*D,x+=n*F,k+=n*q,B+=n*K,I+=n*W,T+=n*V,R+=n*Z,O+=n*G,L+=n*J,M+=n*Y,b+=(n=t[14])*N,v+=n*U,_+=n*j,E+=n*$,S+=n*H,A+=n*z,x+=n*D,k+=n*F,B+=n*q,I+=n*K,T+=n*W,R+=n*V,O+=n*Z,L+=n*G,M+=n*J,C+=n*Y,v+=(n=t[15])*N,s+=38*(E+=n*j),a+=38*(S+=n*$),c+=38*(A+=n*H),u+=38*(x+=n*z),h+=38*(k+=n*D),l+=38*(B+=n*F),f+=38*(I+=n*q),d+=38*(T+=n*K),p+=38*(R+=n*W),g+=38*(O+=n*V),y+=38*(L+=n*Z),m+=38*(M+=n*G),w+=38*(C+=n*J),b+=38*(P+=n*Y),o=(n=(o+=38*(_+=n*U))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=h,e[6]=l,e[7]=f,e[8]=d,e[9]=p,e[10]=g,e[11]=y,e[12]=m,e[13]=w,e[14]=b,e[15]=v}function $(e,t){j(e,t,t)}function H(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)$(i,i),2!==n&&4!==n&&j(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)$(i,i),1!==n&&j(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function D(e,r,n){var i,o,s=new Uint8Array(32),c=new Float64Array(80),u=t(),h=t(),l=t(),f=t(),d=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,P(c,n),o=0;o<16;o++)h[o]=c[o],f[o]=u[o]=l[o]=0;for(u[0]=f[0]=1,o=254;o>=0;--o)O(u,h,i=s[o>>>3]>>>(7&o)&1),O(l,f,i),N(d,u,l),U(u,u,l),N(l,h,f),U(h,h,f),$(f,d),$(p,u),j(u,l,u),j(l,h,d),N(d,u,l),U(u,u,l),$(h,u),U(l,f,p),j(u,l,a),N(u,u,f),j(l,l,u),j(u,f,p),j(f,h,c),$(h,d),O(u,h,i),O(l,f,i);for(o=0;o<16;o++)c[o+16]=u[o],c[o+32]=l[o],c[o+48]=h[o],c[o+64]=f[o];var g=c.subarray(32),y=c.subarray(16);return H(g,g),j(y,y,g),L(e,y),0}function F(e,t){return D(e,t,i)}function q(e,t){return r(t,32),F(e,t)}function K(e,t,r){var i=new Uint8Array(32);return D(i,r,t),w(e,n,i,b)}A.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,u,h,l,f,d,p,g,y,m,w,b,v,_,E=this.fin?0:2048,S=this.h[0],A=this.h[1],x=this.h[2],k=this.h[3],B=this.h[4],I=this.h[5],T=this.h[6],R=this.h[7],O=this.h[8],L=this.h[9],M=this.r[0],C=this.r[1],P=this.r[2],N=this.r[3],U=this.r[4],j=this.r[5],$=this.r[6],H=this.r[7],z=this.r[8],D=this.r[9];r>=16;)f=l=0,f+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*M,f+=(A+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*D),f+=(x+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*z),f+=(k+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*H),l=(f+=(B+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*$))>>>13,f&=8191,f+=(I+=a>>>1&8191)*(5*j),f+=(T+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*U),f+=(R+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*N),f+=(O+=8191&(u>>>8|(h=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*P),d=l+=(f+=(L+=h>>>5|E)*(5*C))>>>13,d+=S*C,d+=A*M,d+=x*(5*D),d+=k*(5*z),l=(d+=B*(5*H))>>>13,d&=8191,d+=I*(5*$),d+=T*(5*j),d+=R*(5*U),d+=O*(5*N),l+=(d+=L*(5*P))>>>13,d&=8191,p=l,p+=S*P,p+=A*C,p+=x*M,p+=k*(5*D),l=(p+=B*(5*z))>>>13,p&=8191,p+=I*(5*H),p+=T*(5*$),p+=R*(5*j),p+=O*(5*U),g=l+=(p+=L*(5*N))>>>13,g+=S*N,g+=A*P,g+=x*C,g+=k*M,l=(g+=B*(5*D))>>>13,g&=8191,g+=I*(5*z),g+=T*(5*H),g+=R*(5*$),g+=O*(5*j),y=l+=(g+=L*(5*U))>>>13,y+=S*U,y+=A*N,y+=x*P,y+=k*C,l=(y+=B*M)>>>13,y&=8191,y+=I*(5*D),y+=T*(5*z),y+=R*(5*H),y+=O*(5*$),m=l+=(y+=L*(5*j))>>>13,m+=S*j,m+=A*U,m+=x*N,m+=k*P,l=(m+=B*C)>>>13,m&=8191,m+=I*M,m+=T*(5*D),m+=R*(5*z),m+=O*(5*H),w=l+=(m+=L*(5*$))>>>13,w+=S*$,w+=A*j,w+=x*U,w+=k*N,l=(w+=B*P)>>>13,w&=8191,w+=I*C,w+=T*M,w+=R*(5*D),w+=O*(5*z),b=l+=(w+=L*(5*H))>>>13,b+=S*H,b+=A*$,b+=x*j,b+=k*U,l=(b+=B*N)>>>13,b&=8191,b+=I*P,b+=T*C,b+=R*M,b+=O*(5*D),v=l+=(b+=L*(5*z))>>>13,v+=S*z,v+=A*H,v+=x*$,v+=k*j,l=(v+=B*U)>>>13,v&=8191,v+=I*N,v+=T*P,v+=R*C,v+=O*M,_=l+=(v+=L*(5*D))>>>13,_+=S*D,_+=A*z,_+=x*H,_+=k*$,l=(_+=B*j)>>>13,_&=8191,_+=I*U,_+=T*N,_+=R*P,_+=O*C,S=f=8191&(l=(l=((l+=(_+=L*M)>>>13)<<2)+l|0)+(f&=8191)|0),A=d+=l>>>=13,x=p&=8191,k=g&=8191,B=y&=8191,I=m&=8191,T=w&=8191,R=b&=8191,O=v&=8191,L=_&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=A,this.h[2]=x,this.h[3]=k,this.h[4]=B,this.h[5]=I,this.h[6]=T,this.h[7]=R,this.h[8]=O,this.h[9]=L},A.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},A.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var W=B,V=I;var Z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(e,t,r,n){for(var i,o,s,a,c,u,h,l,f,d,p,g,y,m,w,b,v,_,E,S,A,x,k,B,I,T,R=new Int32Array(16),O=new Int32Array(16),L=e[0],M=e[1],C=e[2],P=e[3],N=e[4],U=e[5],j=e[6],$=e[7],H=t[0],z=t[1],D=t[2],F=t[3],q=t[4],K=t[5],W=t[6],V=t[7],G=0;n>=128;){for(E=0;E<16;E++)S=8*E+G,R[E]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],O[E]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(E=0;E<80;E++)if(i=L,o=M,s=C,a=P,c=N,u=U,h=j,$,f=H,d=z,p=D,g=F,y=q,m=K,w=W,V,k=65535&(x=V),B=x>>>16,I=65535&(A=$),T=A>>>16,k+=65535&(x=(q>>>14|N<<18)^(q>>>18|N<<14)^(N>>>9|q<<23)),B+=x>>>16,I+=65535&(A=(N>>>14|q<<18)^(N>>>18|q<<14)^(q>>>9|N<<23)),T+=A>>>16,k+=65535&(x=q&K^~q&W),B+=x>>>16,I+=65535&(A=N&U^~N&j),T+=A>>>16,k+=65535&(x=Z[2*E+1]),B+=x>>>16,I+=65535&(A=Z[2*E]),T+=A>>>16,A=R[E%16],B+=(x=O[E%16])>>>16,I+=65535&A,T+=A>>>16,I+=(B+=(k+=65535&x)>>>16)>>>16,k=65535&(x=_=65535&k|B<<16),B=x>>>16,I=65535&(A=v=65535&I|(T+=I>>>16)<<16),T=A>>>16,k+=65535&(x=(H>>>28|L<<4)^(L>>>2|H<<30)^(L>>>7|H<<25)),B+=x>>>16,I+=65535&(A=(L>>>28|H<<4)^(H>>>2|L<<30)^(H>>>7|L<<25)),T+=A>>>16,B+=(x=H&z^H&D^z&D)>>>16,I+=65535&(A=L&M^L&C^M&C),T+=A>>>16,l=65535&(I+=(B+=(k+=65535&x)>>>16)>>>16)|(T+=I>>>16)<<16,b=65535&k|B<<16,k=65535&(x=g),B=x>>>16,I=65535&(A=a),T=A>>>16,B+=(x=_)>>>16,I+=65535&(A=v),T+=A>>>16,M=i,C=o,P=s,N=a=65535&(I+=(B+=(k+=65535&x)>>>16)>>>16)|(T+=I>>>16)<<16,U=c,j=u,$=h,L=l,z=f,D=d,F=p,q=g=65535&k|B<<16,K=y,W=m,V=w,H=b,E%16==15)for(S=0;S<16;S++)A=R[S],k=65535&(x=O[S]),B=x>>>16,I=65535&A,T=A>>>16,A=R[(S+9)%16],k+=65535&(x=O[(S+9)%16]),B+=x>>>16,I+=65535&A,T+=A>>>16,v=R[(S+1)%16],k+=65535&(x=((_=O[(S+1)%16])>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)),B+=x>>>16,I+=65535&(A=(v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7),T+=A>>>16,v=R[(S+14)%16],B+=(x=((_=O[(S+14)%16])>>>19|v<<13)^(v>>>29|_<<3)^(_>>>6|v<<26))>>>16,I+=65535&(A=(v>>>19|_<<13)^(_>>>29|v<<3)^v>>>6),T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,R[S]=65535&I|T<<16,O[S]=65535&k|B<<16;k=65535&(x=H),B=x>>>16,I=65535&(A=L),T=A>>>16,A=e[0],B+=(x=t[0])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[0]=L=65535&I|T<<16,t[0]=H=65535&k|B<<16,k=65535&(x=z),B=x>>>16,I=65535&(A=M),T=A>>>16,A=e[1],B+=(x=t[1])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[1]=M=65535&I|T<<16,t[1]=z=65535&k|B<<16,k=65535&(x=D),B=x>>>16,I=65535&(A=C),T=A>>>16,A=e[2],B+=(x=t[2])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[2]=C=65535&I|T<<16,t[2]=D=65535&k|B<<16,k=65535&(x=F),B=x>>>16,I=65535&(A=P),T=A>>>16,A=e[3],B+=(x=t[3])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[3]=P=65535&I|T<<16,t[3]=F=65535&k|B<<16,k=65535&(x=q),B=x>>>16,I=65535&(A=N),T=A>>>16,A=e[4],B+=(x=t[4])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[4]=N=65535&I|T<<16,t[4]=q=65535&k|B<<16,k=65535&(x=K),B=x>>>16,I=65535&(A=U),T=A>>>16,A=e[5],B+=(x=t[5])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[5]=U=65535&I|T<<16,t[5]=K=65535&k|B<<16,k=65535&(x=W),B=x>>>16,I=65535&(A=j),T=A>>>16,A=e[6],B+=(x=t[6])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[6]=j=65535&I|T<<16,t[6]=W=65535&k|B<<16,k=65535&(x=V),B=x>>>16,I=65535&(A=$),T=A>>>16,A=e[7],B+=(x=t[7])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(B+=(k+=65535&x)>>>16)>>>16)>>>16,e[7]=$=65535&I|T<<16,t[7]=V=65535&k|B<<16,G+=128,n-=128}return n}function J(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,G(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,d(s,r-8,a/536870912|0,a<<3),G(i,o,s,r),n=0;n<8;n++)d(e,8*n,i[n],o[n]);return 0}function Y(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),h=t(),l=t(),f=t();U(n,e[1],e[0]),U(f,r[1],r[0]),j(n,n,f),N(i,e[0],e[1]),N(f,r[0],r[1]),j(i,i,f),j(o,e[3],r[3]),j(o,o,u),j(s,e[2],r[2]),N(s,s,s),U(a,i,n),U(c,s,o),N(h,s,o),N(l,i,n),j(e[0],a,c),j(e[1],l,h),j(e[2],h,c),j(e[3],a,l)}function X(e,t,r){var n;for(n=0;n<4;n++)O(e[n],t[n],r)}function Q(e,r){var n=t(),i=t(),o=t();H(o,r[2]),j(n,r[0],o),j(i,r[1],o),L(e,i),e[31]^=C(n)<<7}function ee(e,t,r){var n,i;for(T(e[0],o),T(e[1],s),T(e[2],s),T(e[3],o),i=255;i>=0;--i)X(e,t,n=r[i/8|0]>>(7&i)&1),Y(t,e),Y(e,e),X(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];T(n[0],h),T(n[1],l),T(n[2],s),j(n[3],h,l),ee(e,n,r)}function re(e,n,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||r(n,32),J(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,te(a,s),Q(e,a),o=0;o<32;o++)n[o+32]=e[o];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function se(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),h=new Float64Array(64),l=[t(),t(),t(),t()];J(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(J(u,e.subarray(32),n+32),oe(u),te(l,u),Q(e,l),o=32;o<64;o++)e[o]=i[o];for(J(c,e,n+64),oe(c),o=0;o<64;o++)h[o]=0;for(o=0;o<32;o++)h[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)h[o+s]+=c[o]*a[s];return ie(e.subarray(32),h),f}function ae(e,r,n,i){var a,u=new Uint8Array(32),h=new Uint8Array(64),l=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),a=t(),u=t(),h=t(),l=t(),d=t();return T(e[2],s),P(e[1],r),$(a,e[1]),j(u,a,c),U(a,a,e[2]),N(u,e[2],u),$(h,u),$(l,h),j(d,l,h),j(n,d,a),j(n,n,u),z(n,n),j(n,n,a),j(n,n,u),j(n,n,u),j(e[0],n,u),$(i,e[0]),j(i,i,u),M(i,a)&&j(e[0],e[0],f),$(i,e[0]),j(i,i,u),M(i,a)?-1:(C(e[0])===r[31]>>7&&U(e[0],o,e[0]),j(e[3],e[0],e[1]),0)}(d,i))return-1;for(a=0;a<n;a++)e[a]=r[a];for(a=0;a<32;a++)e[a+32]=i[a];if(J(h,e,n),oe(h),ee(l,d,h),te(d,r.subarray(32)),Y(l,d),Q(u,l),n-=64,y(r,0,u,0)){for(a=0;a<n;a++)e[a]=0;return-1}for(a=0;a<n;a++)e[a]=r[a+64];return n}var ce=16,ue=64,he=32,le=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function de(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function pe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:w,crypto_stream_xor:S,crypto_stream:E,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:_,crypto_onetimeauth:x,crypto_onetimeauth_verify:k,crypto_verify_16:g,crypto_verify_32:y,crypto_secretbox:B,crypto_secretbox_open:I,crypto_scalarmult:D,crypto_scalarmult_base:F,crypto_box_beforenm:K,crypto_box_afternm:W,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return K(s,i,o),W(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return K(s,i,o),V(e,t,r,n,s)},crypto_box_keypair:q,crypto_hash:J,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ce,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:le,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:ne,pack25519:L,unpack25519:P,M:j,A:N,S:$,Z:U,pow2523:z,add:Y,set25519:T,modL:ie,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){de(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return B(i,n,n.length,t,r),i.subarray(ce)},e.secretbox.open=function(e,t,r){de(e,t,r),fe(r,t);for(var n=new Uint8Array(ce+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+ce]=e[o];return n.length<32||0!==I(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ce,e.scalarMult=function(e,t){if(de(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return D(r,e,t),r},e.scalarMult.base=function(e){if(de(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return F(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){de(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return K(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return q(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(de(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return F(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(de(e,t),t.length!==le)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(de(e,t),t.length!==he)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(ue),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(de(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==he)throw new Error("bad public key size");var n,i=new Uint8Array(ue+e.length),o=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+ue]=e[n];return ae(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(le);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(de(e),e.length!==le)throw new Error("bad secret key size");for(var t=new Uint8Array(he),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(de(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),r=new Uint8Array(le),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=he,e.sign.secretKeyLength=le,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){de(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return de(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===p(e,0,t,0,e.length))},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];pe(i)}))}else void 0!==md&&(t=AB)&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];pe(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})}(SB);var xB=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),kB=Pr&&Pr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),BB=Pr&&Pr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&xB(t,e,r);return kB(t,e),t};Object.defineProperty(EB,"__esModule",{value:!0}),EB.getEncryptionPublicKey=EB.decryptSafely=EB.decrypt=EB.encryptSafely=EB.encrypt=void 0;const IB=c_,TB=BB(SB.exports),RB=tv;function OB({publicKey:e,data:t,version:r}){if((0,RB.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,RB.isNullish)(t))throw new Error("Missing data parameter");if((0,RB.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=TB.box.keyPair();let n;try{n=IB.base64.decode(e)}catch(e){throw new Error("Bad public key")}const i=IB.utf8.decode(t),o=TB.randomBytes(TB.box.nonceLength),s=TB.box(i,o,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:IB.base64.encode(o),ephemPublicKey:IB.base64.encode(r.publicKey),ciphertext:IB.base64.encode(s)}}throw new Error("Encryption type/version not supported")}function LB({encryptedData:e,privateKey:t}){if((0,RB.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,RB.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=C.from(t,"hex"),n=TB.box.keyPair.fromSecretKey(r).secretKey,i=IB.base64.decode(e.nonce),o=IB.base64.decode(e.ciphertext),s=IB.base64.decode(e.ephemPublicKey),a=TB.box.open(o,i,s,n);try{if(!a)throw new Error;const e=IB.utf8.encode(a);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}EB.encrypt=OB,EB.encryptSafely=function({publicKey:e,data:t,version:r}){if((0,RB.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,RB.isNullish)(t))throw new Error("Missing data parameter");if((0,RB.isNullish)(r))throw new Error("Missing version parameter");if("object"==typeof t&&t&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const n={data:t,padding:""},i=C.byteLength(JSON.stringify(n),"utf-8")%2048;let o=0;return i>0&&(o=2048-i-16),n.padding="0".repeat(o),OB({publicKey:e,data:JSON.stringify(n),version:r})},EB.decrypt=LB,EB.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,RB.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,RB.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(LB({encryptedData:e,privateKey:t})).data},EB.getEncryptionPublicKey=function(e){const t=C.from(e,"hex"),r=TB.box.keyPair.fromSecretKey(t).publicKey;return IB.base64.encode(r)},function(e){var t=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Pr&&Pr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.normalize=e.concatSig=void 0,r(bh,e),r(Cx,e),r(EB,e);var n=tv;Object.defineProperty(e,"concatSig",{enumerable:!0,get:function(){return n.concatSig}}),Object.defineProperty(e,"normalize",{enumerable:!0,get:function(){return n.normalize}})}(wh);class MB extends Error{constructor(e,t){super(),this.code=e,this.message=t}toString(){return`${this.message} (${this.code})`}}var CB,PB=(e,t,r)=>(((e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)})(e,t,"read from private field"),r?r.call(e):t.get(e));const NB=class{constructor(e){((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,CB,["eth_newFilter","eth_newBlockFilter","eth_newPendingTransactionFilter","eth_uninstallFilter","eth_subscribe"]),this.provider=e}static isUTF8(e){try{return new TextDecoder("utf8",{fatal:!0}).decode(e),!0}catch{return!1}}static bufferToHex(e){return"0x"+C.from(e).toString("hex")}static messageToBuffer(e){let t=C.from([]);try{t="string"==typeof e?C.from(e.replace("0x",""),"hex"):C.from(e)}catch(e){console.log(`messageToBuffer error: ${e}`)}return t}async request(e){if(PB(this,CB).includes(e.method))return Promise.reject(new MB(4200,`EthereumProvider does not support calling ${e.method}`));switch(e.method){case"wallet_requestPermissions":return this.provider.internalRequest({method:"wallet_requestPermissions",params:e.params});case"eth_requestAccounts":return this.provider.internalRequest({method:"requestAccounts",params:{}});case"eth_sign":return this.ethSign(e.params);case"personal_sign":return this.personalSign(e.params);case"personal_ecRecover":return this.personalECRecover(e.params);case"eth_signTypedData_v3":return this.ethSignTypedData(e.params,wh.SignTypedDataVersion.V3);case"eth_signTypedData_v4":return this.ethSignTypedData(e.params,wh.SignTypedDataVersion.V4);case"eth_signTypedData":return this.ethSignTypedData(e.params,wh.SignTypedDataVersion.V1);case"eth_sendTransaction":return this.provider.internalRequest({method:"signTransaction",params:e.params[0]});case"wallet_watchAsset":{const{options:t,type:r}=e.params,{address:n,symbol:i,decimals:o}=t;return this.provider.internalRequest({method:"watchAsset",params:{type:r,contract:n,symbol:i,decimals:o||0}})}case"wallet_addEthereumChain":return this.provider.internalRequest({method:"addEthereumChain",params:e.params[0]});case"wallet_switchEthereumChain":return this.provider.internalRequest({method:"switchEthereumChain",params:e.params[0]});default:return await this.provider.getRPC().call({method:e.method,jsonrpc:"2.0",params:e.params})}}personalECRecover(e){return this.provider.internalRequest({method:"ecRecover",params:{signature:e[1],message:e[0]}})}async personalSign(e){const[t]=await this.provider.request({method:"eth_accounts"});if(!t)throw new Error("Unable to execute personal_sign");let[r,n]=e;"string"==typeof r&&t.toLowerCase()===r.toLowerCase()&&(r=e[1],n=e[0]);const i=NB.messageToBuffer(r);return this.provider.internalRequest({method:"signPersonalMessage",params:{data:0===i.length?NB.bufferToHex(r):r,address:n}})}ethSign(e){if(!e)throw new Error("Missing params");const[t,r]=e,n=NB.messageToBuffer(r),i=NB.bufferToHex(n);return this.provider.internalRequest({method:NB.isUTF8(n)?"signPersonalMessage":"signMessage",params:{data:i,address:t,isEthSign:!0}})}async ethSignTypedData(e,t){const[r]=await this.provider.request({method:"eth_accounts"});if(!r)throw new Error("Unable to execute ethSignTypedData, address is not present");let[n,i]=e;"string"==typeof n&&r.toLowerCase()===n.toLowerCase()&&(n=e[1],i=e[0]);const o="string"==typeof n?JSON.parse(n):n,{chainId:s}=o.domain||{};if(typeof s<"u"&&Number(s)!==Number(this.provider.getChainId()))throw new Error("Provided chainId does not match the currently active chain");const a=t!==wh.SignTypedDataVersion.V1?wh.TypedDataUtils.eip712Hash(o,t):"";return this.provider.internalRequest({method:"signTypedMessage",params:{data:"0x"+a.toString("hex"),raw:"string"==typeof n?n:JSON.stringify(n),address:i,version:t}})}};let UB=NB;CB=new WeakMap;var jB,$B=Object.defineProperty,HB=Object.getOwnPropertySymbols,zB=Object.prototype.hasOwnProperty,DB=Object.prototype.propertyIsEnumerable,FB=(e,t,r)=>t in e?$B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qB=(e,t)=>{for(var r in t||(t={}))zB.call(t,r)&&FB(e,r,t[r]);if(HB)for(var r of HB(t))DB.call(t,r)&&FB(e,r,t[r]);return e},KB=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class WB{constructor(e){((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,jB,void 0),((e,t,r,n)=>{KB(e,t,"write to private field"),n?n.call(e,r):t.set(e,r)})(this,jB,e)}async getBlockNumber(){return(await this.call({jsonrpc:"2.0",method:"eth_blockNumber",params:[]})).result}async getBlockByNumber(e){return(await this.call({jsonrpc:"2.0",method:"eth_getBlockByNumber",params:[e,!1]})).result}getFilterLogs(e){return this.call({jsonrpc:"2.0",method:"eth_getLogs",params:[e]})}async call(e){const t=await(await fetch(((e,t,r)=>(KB(e,t,"read from private field"),r?r.call(e):t.get(e)))(this,jB),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(qB({id:(new Date).getTime()+Math.floor(1e3*Math.random())},e))})).json();if(!t.result&&t.error)throw new Error(t.error.message||"rpc error");return t.result}}jB=new WeakMap;var VB,ZB,GB,JB,YB,XB,QB=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},eI=(e,t,r)=>(QB(e,t,"read from private field"),r?r.call(e):t.get(e)),tI=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},rI=(e,t,r,n)=>(QB(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);const nI=class extends ze{constructor(e){super(),tI(this,VB,void 0),tI(this,ZB,void 0),tI(this,GB,!1),tI(this,JB,!1),tI(this,YB,void 0),tI(this,XB,void 0),this.isTrust=!0,this.isTrustWallet=!0,this.request=this.request.bind(this),e&&(e.chainId&&rI(this,VB,e.chainId),(e.rpc||e.rpcUrl)&&rI(this,ZB,e.rpc||e.rpcUrl),typeof e.overwriteMetamask<"u"&&rI(this,JB,e.overwriteMetamask),typeof e.disableMobileAdapter<"u"&&rI(this,GB,e.disableMobileAdapter),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust),rI(this,XB,new WB(eI(this,ZB)))),eI(this,GB)||(this.mobileAdapter=new UB(this)),super.on("onResponseReady",this.onResponseReady.bind(this)),this.connect()}connect(){this.emit("connect",{chainId:eI(this,VB)})}enable(){return this.request({method:"eth_requestAccounts"})}sendAsync(e,t){Array.isArray(e)?Promise.all(e.map((e=>this.request(e)))).then((e=>t(null,e))).catch((e=>t(e,null))):this.request(e).then((e=>t(null,e))).catch((e=>t(e,null)))}_send(e){const t={jsonrpc:"2.0",result:null};switch(e.method){case"eth_accounts":case"eth_coinbase":case"net_version":case"eth_chainId":t.result=this.handleStaticRequests({method:"eth_accounts"});break;default:throw new MB(4200,`Trust does not support calling ${e.method} synchronously without a callback. Please provide a callback parameter to call ${e.method} asynchronously.`)}return t}send(e,t){if("string"==typeof e&&(!t||Array.isArray(t))){const r=this;return new Promise(((n,i)=>{try{const o=r.request({method:e,params:t});o instanceof Promise?o.then(n).catch(i):n(o)}catch(e){i(e)}}))}return e&&"object"==typeof e&&"function"==typeof t?this.request(e).then(t):this._send(e)}internalRequest(e){return super.request(e)}request(e){if(this.mobileAdapter){const t=this.handleStaticRequests(e,(()=>this.mobileAdapter.request(e)));return t instanceof Promise?t:Promise.resolve(t)}return this.handleStaticRequests(e,(()=>this.internalRequest(e)))}handleStaticRequests(e,t){switch(e.method){case"net_version":return eI(this,VB)?parseInt(eI(this,VB)):void 0;case"eth_chainId":return eI(this,VB);case"eth_accounts":case"eth_coinbase":return eI(this,YB)?[eI(this,YB)]:[]}if(t)return t()}onResponseReady(e,t){var r,n,i,o;if(t)switch(e.method){case"eth_requestAccounts":case"requestAccounts":rI(this,YB,t[0]);break;case"wallet_requestPermissions":rI(this,YB,null==(o=null==(i=null==(n=null==(r=t[0])?void 0:r.caveats)?void 0:n[0])?void 0:i.value)?void 0:o[0])}}getNetwork(){return nI.NETWORK}get connected(){return!0}get isMetaMask(){return eI(this,JB)}getChainId(){return eI(this,VB)}getNetworkVersion(){return this.handleStaticRequests({method:"net_version "})}setChainId(e){rI(this,VB,e)}setRPCUrl(e){rI(this,ZB,e),rI(this,XB,new WB(eI(this,ZB)))}getRPC(){return eI(this,XB)}setOverwriteMetamask(e){rI(this,JB,e)}getAddress(){return eI(this,YB)}setAddress(e){rI(this,YB,e)}setRPC(e){rI(this,XB,e)}};let iI=nI;VB=new WeakMap,ZB=new WeakMap,GB=new WeakMap,JB=new WeakMap,YB=new WeakMap,XB=new WeakMap,iI.NETWORK="ethereum";class oI{constructor(e){this.provider=e}async request(e,t){if("getKey"===e.method){const t=await this.provider.internalRequest({method:"requestAccounts",params:e.params}),r=JSON.parse(t);return{algo:"secp256k1",address:r.address,bech32Address:r.address,pubKey:C.from(r.pubKey,"hex")}}const r={signAmino:"signTransaction",signDirect:"signTransaction",signArbitrary:"signMessage",sendTx:"sendTransaction"};return r[e.method]?this.provider.internalRequest({method:r[e.method],params:e.params}):t()}}var sI,aI=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},cI=(e,t,r)=>(aI(e,t,"read from private field"),r?r.call(e):t.get(e));const uI=class extends ze{constructor(e){super(),((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)})(this,sI,!1),this.isKeplr=!0,this.isTrust=!0,this.isTrustWallet=!0,e&&(typeof e.disableMobileAdapter<"u"&&((e,t,r,n)=>{aI(e,t,"write to private field"),n?n.call(e,r):t.set(e,r)})(this,sI,e.disableMobileAdapter),typeof e.isKeplr<"u"&&(this.isKeplr=e.isKeplr),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust)),cI(this,sI)||(this.mobileAdapter=new oI(this))}static bufferToHex(e){return"0x"+C.from(e).toString("hex")}getNetwork(){return uI.NETWORK}isMobileAdapterEnabled(){return!cI(this,sI)}enable(e){return this.request({method:"enable",params:{chainIds:e}})}internalRequest(e){return super.request(e)}request(e){const t=()=>this.internalRequest(e);return this.mobileAdapter?this.mobileAdapter.request(e,t):t()}getKey(e){return this.request({method:"getKey",params:{chainId:e}})}async sendTx(e,t,r){const n=C.from(t).toString("base64"),i=await this.request({method:"sendTx",params:{raw:n,chainId:e,mode:r}});return new Uint8Array(C.from(i,"hex"))}async signArbitrary(e,t,r){const n=C.from(r),i=uI.bufferToHex(n);return await this.request({method:"signArbitrary",params:{chainId:e,data:i,signerAddress:t}})}async signAmino(e,t,r){const n=await this.request({method:"signAmino",params:{chainId:e,sign_doc:r}}),{signed:i,signature:o}=JSON.parse(n);return{signed:i,signature:o}}async signDirect(e,t,r){const n={bodyBytes:uI.bufferToHex(r.bodyBytes),authInfoBytes:uI.bufferToHex(r.authInfoBytes)},i=await this.request({method:"signDirect",params:{signerAddress:t,chainId:e,sign_doc:n}}),{signature:o}=JSON.parse(i);return{signed:r,signature:o}}experimentalSuggestChain(){}getOfflineSignerDirect(e){return{getAccounts:async()=>[await this.getKey(e)],signDirect:async(t,r)=>{if(e!==r.chainId)throw new Error("Unmatched chain id with the offline signer");if((await this.getKey(r.chainId)).address!==t)throw new Error("Unknown signer address");return await this.signDirect(e,t,r)}}}getOfflineSigner(e){return this.getOfflineSignerAmino(e)}getOfflineSignerAuto(e){return this.getOfflineSignerAmino(e)}getOfflineSignerAmino(e){return{getAccounts:async()=>{const t=await this.getKey(e);return[{address:t.bech32Address,algo:"secp256k1",pubkey:t.pubKey}]},sign:(t,r)=>this.signAmino(e,t,r),signAmino:(t,r)=>this.signAmino(e,t,r)}}};let hI=uI;sI=new WeakMap,hI.NETWORK="cosmos";var lI,fI={exports:{}},dI="object"==typeof Reflect?Reflect:null,pI=dI&&"function"==typeof dI.apply?dI.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};lI=dI&&"function"==typeof dI.ownKeys?dI.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var gI=Number.isNaN||function(e){return e!=e};function yI(){yI.init.call(this)}fI.exports=yI,fI.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}kI(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&kI(e,"error",t,r)}(e,i,{once:!0})}))},yI.EventEmitter=yI,yI.prototype._events=void 0,yI.prototype._eventsCount=0,yI.prototype._maxListeners=void 0;var mI=10;function wI(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function bI(e){return void 0===e._maxListeners?yI.defaultMaxListeners:e._maxListeners}function vI(e,t,r,n){var i,o,s;if(wI(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=bI(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,function(e){console&&console.warn&&console.warn(e)}(a)}return e}function _I(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function EI(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=_I.bind(n);return i.listener=r,n.wrapFn=i,i}function SI(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):xI(i,i.length)}function AI(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function xI(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function kI(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(yI,"defaultMaxListeners",{enumerable:!0,get:function(){return mI},set:function(e){if("number"!=typeof e||e<0||gI(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");mI=e}}),yI.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},yI.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||gI(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},yI.prototype.getMaxListeners=function(){return bI(this)},yI.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)pI(a,this,t);else{var c=a.length,u=xI(a,c);for(r=0;r<c;++r)pI(u[r],this,t)}return!0},yI.prototype.addListener=function(e,t){return vI(this,e,t,!1)},yI.prototype.on=yI.prototype.addListener,yI.prototype.prependListener=function(e,t){return vI(this,e,t,!0)},yI.prototype.once=function(e,t){return wI(t),this.on(e,EI(this,e,t)),this},yI.prototype.prependOnceListener=function(e,t){return wI(t),this.prependListener(e,EI(this,e,t)),this},yI.prototype.removeListener=function(e,t){var r,n,i,o,s;if(wI(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},yI.prototype.off=yI.prototype.removeListener,yI.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},yI.prototype.listeners=function(e){return SI(this,e,!0)},yI.prototype.rawListeners=function(e){return SI(this,e,!1)},yI.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):AI.call(e,t)},yI.prototype.listenerCount=AI,yI.prototype.eventNames=function(){return this._eventsCount>0?lI(this._events):[]};const BI="CALLBACK";class II extends fI.exports.EventEmitter{setAdapter(e){return this.adapter=e,this}async request(e){try{if(!this.adapter)throw new Error("No adapter set, maybe you forgot to register the provider?");const t=await this.adapter.request(e,this.getNetwork());return this.emit("onResponseReady",e,t),t}catch(e){throw e}}sendResponse(e,t){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==BI)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendResponse(e,t)}sendError(e,t){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==BI)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendError(e,t)}}const TI=class extends II{constructor(e){super(),this._isConnected=!1,this.chainId=null,this.address=null,e&&e.network&&(this._network=e.network,e.chainId&&(this.chainId=e.chainId))}static bufferToHex(e){return"0x"+C.from(e).toString("hex")}static messageToBuffer(e){let t=C.from([]);try{t="string"==typeof e?C.from(e.replace("0x",""),"hex"):C.from(e)}catch(e){console.log(`messageToBuffer error: ${e}`)}return t}setConfig(e){this._network=e.network,this.address=e.address,this.chainId=e.chainId}async connect(){const e=await this.account();return this._isConnected=!0,this.emit("connect"),e}disconnect(){this._isConnected=!1,this.emit("disconnect")}isConnected(){return this._isConnected}async account(){const e=await this.request({method:"requestAccounts",params:{}});return JSON.parse(e)}network(){return this._network}getNetwork(){return TI.NETWORK}async signMessage(e){const t="APTOS",r=(await this.account()).address;let n=t;const i=window.location.protocol+"//"+window.location.hostname;e.address&&(n+="\naddress: "+r),e.application&&(n+="\napplication: "+i),e.chainId&&(n+="\nchainId: "+this.chainId),n+="\nmessage: "+e.message,n+="\nnonce: "+e.nonce;const o=C.from(n),s=TI.bufferToHex(o);return this.request({method:"signMessage",params:{data:s}}).then((o=>({address:r,application:i,chainId:this.chainId,fullMessage:n,message:e.message,nonce:e.nonce,prefix:t,signature:o})))}async signAndSubmitTransaction(e){const t=await this.signTransaction(e),r=await this.request({method:"sendTransaction",params:{tx:t}});return{hash:TI.messageToBuffer(r).toString()}}async signTransaction(e){const t=await this.request({method:"signTransaction",params:{data:e}});return JSON.parse(TI.messageToBuffer(t).toString())}};let RI=TI;RI.NETWORK="aptos";var OI=Object.defineProperty,LI=Object.defineProperties,MI=Object.getOwnPropertyDescriptors,CI=Object.getOwnPropertySymbols,PI=Object.prototype.hasOwnProperty,NI=Object.prototype.propertyIsEnumerable,UI=(e,t,r)=>t in e?OI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jI=(e,t)=>{for(var r in t||(t={}))PI.call(t,r)&&UI(e,r,t[r]);if(CI)for(var r of CI(t))NI.call(t,r)&&UI(e,r,t[r]);return e},$I=(e,t)=>{var r={};for(var n in e)PI.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&CI)for(var n of CI(e))t.indexOf(n)<0&&NI.call(e,n)&&(r[n]=e[n]);return r};class HI{constructor(e){this.provider=e}static mapToCamelCase(e){return jI(jI({},e),null!=e&&e.messages?{messages:(e?.messages||[]).map((e=>{var t=e,{state_init:r}=t,n=$I(t,["state_init"]);return((e,t)=>LI(e,MI(t)))(jI({},n),{stateInit:r})}))}:{})}async request(e,t){switch(e){case"tonConnect_connect":{const e=await this.provider.internalRequest("requestAccounts",t);return JSON.parse(e).map((e=>"ton_addr"===e.name?$I(e,["nonBounceable"]):e))}case"tonConnect_reconnect":{const e=await this.provider.internalRequest("tonConnect_reconnect",t);return JSON.parse(e)}case"ton_rawSign":return this.provider.internalRequest("signMessage",t);case"ton_sendTransaction":case"tonConnect_sendTransaction":{const r=await this.provider.internalRequest("signTransaction",HI.mapToCamelCase(t[0])),{nonce:n,hash:i}=JSON.parse(r);return"ton_sendTransaction"===e?n:i}case"ton_requestAccounts":{const e=await this.provider.internalRequest("requestAccounts",t),[{nonBounceable:r}]=JSON.parse(e);return[r]}case"ton_requestWallets":{const e=await this.provider.internalRequest("requestAccounts",t),[{nonBounceable:r,publicKey:n}]=JSON.parse(e);return[{address:r,publicKey:n,version:this.provider.version}]}default:return this.provider.internalRequest(e,t)}}}const zI=class extends ze{constructor(e){super(),this.version="v4R2",e&&e.version&&(this.version=e.version),null!=e&&e.disableMobileAdapter||(this.mobileAdapter=new HI(this))}disconnect(){return this.send("tonConnect_disconnect",{})}isConnected(){return Promise.resolve(!0)}async send(e,t){return this.mobileAdapter?await this.mobileAdapter.request(e,t):await(()=>this.internalRequest(e,t))()}internalRequest(e,t){return super.request({method:e,params:t})}getNetwork(){return zI.NETWORK}};let DI=zI;DI.NETWORK="ton";class FI extends Error{constructor(e,t){super(),this.code=e,this.message=t}toString(){return`${this.message} (${this.code})`}}class qI extends Error{constructor(e,t){super(e),this.code=t}}const KI=e=>{var t;return{event:"connect_error",payload:{code:null!=(t=e.code)?t:0,message:e.message}}};class WI{constructor(e,t){this.protocolVersion=2,this.isWalletBrowser=!0,this.callbacks=[],this.listen=e=>(this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter((t=>t!=e))}),e&&(typeof e.isWalletBrowser<"u"&&(this.isWalletBrowser=e.isWalletBrowser),e.walletInfo&&(this.walletInfo=e.walletInfo),e.deviceInfo&&(this.deviceInfo=e.deviceInfo)),this.provider=t}async connect(e,t){try{e>this.protocolVersion&&new qI("Unsupported protocol version",1);const r=await this.provider.send("tonConnect_connect",t);return"connect_error"===r?.event?this.emit(r):this.emit({event:"connect",payload:{items:r,device:this.deviceInfo}})}catch(e){return this.parseError(e,{id:0})}}async disconnect(){return await this.provider.send("tonConnect_disconnect",{}),this.emit({event:"disconnect",payload:{}})}emit(e){return this.callbacks.forEach((t=>t(e))),e}async restoreConnection(){var e;try{const e=await this.provider.send("tonConnect_reconnect",[{name:"ton_addr"}]);return this.emit({event:"connect",payload:{items:e,device:this.deviceInfo}})}catch(t){return t instanceof qI?this.emit(KI(t)):this.emit(KI(new qI(null!=(e=t.message)?e:"Unknown error")))}}async send(e){try{return{result:await this.provider.send(`tonConnect_${e.method}`,e.params.map((e=>JSON.parse(e)))),id:e.id.toString()}}catch(t){return this.parseError(t,{id:e.id})}}parseError(e,t){var r,n,i,o;return 4001===e?.code?{error:{message:"User Rejected the transaction",code:300},id:null!=(r=String(t.id))?r:0}:-32002===e?.code?{error:{message:"Bad request, a transaction is already pending",code:1},id:null!=(n=String(t.id))?n:0}:e&&![0,1,100,300,400].includes(e.code)?{error:new FI(0,"Bad request"),id:null!=(i=String(t.id))?i:0}:{error:e,id:null!=(o=String(t.id))?o:0}}}window.trustwallet={core:(e,t)=>new De({strategy:e,handler:t}),solana:e=>new mh(e),cosmos:e=>new hI(e),ethereum:e=>new iI(e),aptos:e=>new RI(e),ton:e=>new DI(e),tonBridge:(e,t)=>new WI(e,t),randomUUID:()=>y()}}));
